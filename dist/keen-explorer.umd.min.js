!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("react"),require("classnames"),require("moment"),require("keymirror"),require("jQuery"),require("string"),require("qs"),require("react-highlight"),require("keen-dataviz"),require("flux"),require("json-stable-stringify"),require("react-dom"),require("keen-analysis"));else if("function"==typeof define&&define.amd)define(["lodash","react","classnames","moment","keymirror","jQuery","string","qs","react-highlight","keen-dataviz","flux","json-stable-stringify","react-dom","keen-analysis"],t);else{var n="object"==typeof exports?t(require("lodash"),require("react"),require("classnames"),require("moment"),require("keymirror"),require("jQuery"),require("string"),require("qs"),require("react-highlight"),require("keen-dataviz"),require("flux"),require("json-stable-stringify"),require("react-dom"),require("keen-analysis")):t(e.lodash,e.react,e.classnames,e.moment,e.keymirror,e.jQuery,e.string,e.qs,e["react-highlight"],e["keen-dataviz"],e.flux,e["json-stable-stringify"],e["react-dom"],e["keen-analysis"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(e,t,n,r,i,a,s,o,l,c,p,u,h,d){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=88)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var r=n(0),i=n(44),a=n(9);function s(e){return"'"===e.substring(0,1)&&"'"===e.substring(e.length-1)}e.exports={toTitleCase:function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},singularize:function(e){return e.replace(/s+$/,"")},prettyPrintJSON:function(e){return JSON.stringify(e,void 0,2)},coercionTypeForPropertyType:function(e){return{string:"String",num:"Number",datetime:"Datetime",list:"List",null:"Null",bool:"Boolean"}[e]},booleanMap:function(e){return null===e||""===e?"":"false"===e?"false":"true"===e?"true":e?"true":"false"},sortItems:function(e,t){t=t||function(e){return e.replace(/[-_ .]/,"").toLowerCase()};var n=e.map(function(e,n){return{index:n,value:t(e)}});return n.sort(function(e,t){return e.value.localeCompare(t.value)}),n.map(function(t){return e[t.index]})},isDateInStrictFormat:function(e){return a(e,"YYYY-MM-DDTHH:mm:ss.SSS",!0).isValid()},convertDateToUTC:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())},formatISOTimeNoTimezone:function(e){return a(e).format("YYYY-MM-DDTHH:mm:ss.SSS")},generateRandomId:function(e){return(e||"")+(+new Date+Math.floor(999999*Math.random())).toString(36)},generateTempId:function(){return e.exports.generateRandomId("TEMP-")},isValidQueryValue:function(t){return r.isArray(t)?t.length>0:!1===t||(0===t||(r.isPlainObject(t)?!r.isEmpty(t):!e.exports.isNullOrUndefined(t)))},parseList:function(t){if(t){if(!e.exports.isList(t))return"";var n=i(t).parseCSV();return n=r.map(n,function(e){if(s(e)){var t=e.replace("'","");parseFloat(t)&&(e=parseFloat(t))}return e})}return""},isList:function(e){var t,n=!0,r=String(e).match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);if(r){for(var i=0;i<r.length&&(n=s(r[i].trim())||'"'===(t=r[i].trim()).substring(0,1)&&'"'===t.substring(t.length-1),n);i++);return n}return!1},isNullOrUndefined:function(e){return r.isNull(e)||r.isUndefined(e)},padLeft:function(e){return e<10?"0"+e:e}}},function(e,t,n){"use strict";var r=n(0),i=n(45),a=n(82),s=(n(9),n(2)),o=n(81),l=(n(5),n(8)),c=n(17),p=["event_collection","analysis_type","target_property","percentile","group_by","timeframe","interval","timezone","filters","steps","email","latest","property_names"],u=["extraction","count","funnel"];var h={};function d(e,t){return r.without(r.map(e,t),h)}e.exports={EXRACTION_EVENT_LIMIT:100,isPersisted:function(e){return e.id&&!e.id.toString().match("TEMP")},saveType:function(t){return e.exports.isPersisted(t)?"update":"save"},shouldHaveTarget:function(e){return!s.isNullOrUndefined(e.query.analysis_type)&&-1===u.indexOf(e.query.analysis_type)},isEmailExtraction:function(e){return"extraction"===e.query.analysis_type&&!r.isNull(e.query.email)},isImmediateExtraction:function(e){return"extraction"===e.query.analysis_type&&r.isNull(e.query.email)},mergeResponseWithExplorer:function(t,n){var i=r.defaultsDeep(e.exports.formatQueryParams(n),t);return delete i.originalModel,i.id=n.query_name,i.originalModel=r.cloneDeep(i),i},queryJSON:function(e){if(e&&e.query){var t=r.cloneDeep(e.query);return"extraction"===t.analysis_type?s.isNullOrUndefined(t.email)&&(t.latest=100):(delete t.latest,delete t.email,delete t.property_names),"funnel"!==t.analysis_type&&r.assign(t,c.getTimeParameters(t.time,t.timezone)),t.filters&&(t.filters=r.map(t.filters,function(e){return l.queryJSON(e)})),t.steps&&(t.steps=r.map(t.steps,o.stepJSON)),r.each(t,function(e,n){r.isArray(e)&&r.remove(e,function(e){return!r.isNumber(e)&&r.isEmpty(e)}),s.isValidQueryValue(e)&&r.includes(p,n)||delete t[n]}),t}},toJSON:function(t){var n=r.pick(t,["id","query_name","refresh_rate","metadata"]);return n.query=e.exports.queryJSON(t),"extraction"===n.query.analysis_type&&(n.refresh_rate=0),n},cleanJSONforSave:function(e){return"extraction"===e.query.analysis_type&&(e.query.latest=100,delete e.query.email,delete e.query.property_names),e},paramsForURL:function(t){var n=e.exports.toJSON(t);return r.omit(n,["id","query_name","refresh_rate","metadata"])},runQuery:function(e){e.client.query(e.query.analysis_type,r.omit(e.query,"analysis_type")).then(function(t,n){n?e.error(n):e.success(t),e.complete&&e.complete(n,t)}).catch(e.error)},formatQueryParams:function(e){if(e&&e.query){if(e.query&&e.query.timeframe){var t=c.unpackTimeframeParam(e.query.timeframe,e.query.timezone);e.query.time=t.time,e.query.timezone=t.timezone}return e.query.group_by&&!r.isArray(e.query.group_by)&&(e.query.group_by=[e.query.group_by]),e.query.filters&&(e.query.filters=r.compact(r.map(e.query.filters,l.formatFilterParams))),e.query.steps&&(e.query.steps=r.compact(r.map(e.query.steps,o.formatQueryParams)),e.query.steps[e.query.steps.length-1].active=!0),!e.id&&e.query_name&&(e.id=e.query_name),e.metadata||(e.metadata={}),e.metadata.display_name||(e.metadata.display_name=e.query_name),e.metadata.visualization&&e.metadata.visualization.chart_type||(e.metadata.visualization={},e.query.interval?e.metadata.visualization.chart_type="area":e.metadata.visualization.chart_type="metric"),e}},encodeAttribute:function(e){return encodeURIComponent(JSON.stringify(e))},getApiQueryUrl:function(t,n){var a=e.exports.queryJSON(n),s=t.url("queries",a.analysis_type);a.analysis_type;delete a.analysis_type;var o=r.cloneDeep(a.timeframe);delete a.timeframe;var l,p=r.map(a.filters,function(e){return r.omit(r.cloneDeep(e),"coercion_type")});delete a.filters,a.steps&&a.steps.length&&(l=e.exports.encodeAttribute(a.steps),delete a.steps),a.group_by&&r.isArray(a.group_by)&&a.group_by.length&&(a.group_by=a.group_by.length>1?JSON.stringify(a.group_by):a.group_by[0]);var u=i.stringify(a);return o&&"relative"===c.timeframeType(n.query.time)?u+="&timeframe="+o:o&&"absolute"===c.timeframeType(n.query.time)&&(u+="&timeframe="+(o=e.exports.encodeAttribute(o))),p&&(u+="&filters="+(p=e.exports.encodeAttribute(p))),l&&(u+="&steps="+l),s+="?api_key="+t.readKey()+"&"+u},resultCanBeVisualized:function(e){return e.response&&!s.isNullOrUndefined(e.response.result)&&(r.isNumber(e.response.result)||r.isArray(e.response.result)&&e.response.result.length)},isJSONViz:function(e){return e.metadata.visualization.chart_type&&"json"===e.metadata.visualization.chart_type.toLowerCase()},isTableViz:function(e){return e.metadata.visualization.chart_type&&"table"===e.metadata.visualization.chart_type.toLowerCase()},getSdkExample:function(t,n){var i,s,o,l={host:"api.keen.io",protocol:"https",requestType:"jsonp"},c=e.exports.queryJSON(t),p=a,u="Untitled Chart";t.metadata&&t.metadata.display_name&&(u=t.metadata.display_name);var m="";switch(t.metadata&&t.metadata.visualization&&t.metadata.visualization.chart_type&&"JSON"!==t.metadata.visualization.chart_type&&(m=t.metadata.visualization.chart_type),c.analysis_type){case"funnel":s=["steps"];break;default:s=["event_collection","filters","group_by","interval","target_property","percentile","timeframe","timezone"]}c.steps&&(c.steps=r.map(c.steps,function(e){return r.omit(e,"active")})),o=d(["host","protocol","requestType"],function(e){return n.config[e]==l[e]?h:"  "+e+": "+p(n.config[e])}).join(",\n"),r.each(c.filters,function(e){delete e.coercion_type}),i=d(s,function(e){return c[e]?"        "+e+": "+p(c[e],{space:0}):h}).join(",\n");var f,v,y=["<!DOCTYPE html>","<html>","<head>",'  <meta charset="utf-8">','  <link href="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.css" rel="stylesheet" />',"</head>","<body>","  \x3c!-- Target DOM Node --\x3e",'  <div id="keen-example-chart"></div>',"  ",'  <script src="https://d26b395fwzu5fz.cloudfront.net/keen-analysis-1.2.2.js" type="text/javascript"><\/script>','  <script src="https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.js" type="text/javascript"><\/script>','  <script type="text/javascript">',"    var client = new Keen({","      projectId: "+p(n.config.projectId)+",","      readKey: "+p(n.config.readKey)+(f=o,v=",",f?v:""),o,"    });","    ","    var chart = new Keen.Dataviz()",'      .el("#keen-example-chart")',"      .height(240)",'      .title("'+u+'")',""+m?'      .type("'+m+'")':"","      .prepare();","    ","    client","      .query("+p(c.analysis_type)+", {",i,"      })","      .then(function(res) {","        chart.data(res).render();","      })","      .catch(function(err) {","        chart.message(err.message);","      });","    ","  <\/script>","</body>","</html>"];return r.filter(y,function(e){return""!==e}).join("\n")},slugify:function(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/ /g,"-")}}},function(e,t,n){"use strict";var r=n(0),i=n(7),a=n(19),s=n(12),o=n(25),l=n(18),c=n(24),p=n(28),u=n(16),h=n(10),d=n(3),m=n(26),f={create:function(e){i.dispatch({actionType:a.EXPLORER_CREATE,attrs:e})},createBatch:function(e){i.dispatch({actionType:a.EXPLORER_CREATE_BATCH,models:e})},clone:function(e){i.dispatch({actionType:a.EXPLORER_CLONE,id:e}),l.create({text:"Query cloned! Add a name for this cloned query and save it.",type:"success",icon:"check"})},update:function(e,t){var n,s=u.getProject();i.dispatch({actionType:a.EXPLORER_UPDATE,id:e,updates:t}),(n=t.query?t.query:t.response&&t.response.query?t.response.query:{}).event_collection&&p.fetchCollectionSchema(s.client,n.event_collection),n.steps&&n.steps.length&&r.each(n.steps,function(e,t){p.fetchCollectionSchema(s.client,e.event_collection)})},remove:function(e){i.dispatch({actionType:a.EXPLORER_REMOVE,id:e})},setActive:function(e){i.dispatch({actionType:a.EXPLORER_SET_ACTIVE,id:e})},revertActiveChanges:function(){i.dispatch({actionType:a.EXPLORER_REVERT_ACTIVE_CHANGES})},clear:function(e){i.dispatch({actionType:a.EXPLORER_CLEAR,id:e})},validate:function(e){i.dispatch({actionType:a.EXPLORER_VALIDATE,id:e})},addFilter:function(e,t){i.dispatch({actionType:a.EXPLORER_ADD_FILTER,id:e,attrs:t})},removeFilter:function(e,t){i.dispatch({actionType:a.EXPLORER_REMOVE_FILTER,id:e,index:t})},updateFilter:function(e,t,n){i.dispatch({actionType:a.EXPLORER_UPDATE_FILTER,id:e,index:t,attrs:n})},addStep:function(e,t){i.dispatch({actionType:a.EXPLORER_ADD_STEP,id:e,attrs:t})},removeStep:function(e,t){i.dispatch({actionType:a.EXPLORER_REMOVE_STEP,id:e,index:t})},setStepActive:function(e,t){i.dispatch({actionType:a.EXPLORER_SET_STEP_ACTIVE,id:e,index:t})},updateStep:function(e,t,n){var r=u.getProject();i.dispatch({actionType:a.EXPLORER_UPDATE_STEP,id:e,index:t,attrs:n}),n.event_collection&&p.fetchCollectionSchema(r.client,n.event_collection)},moveStep:function(e,t,n){i.dispatch({actionType:a.EXPLORER_MOVE_STEP,id:e,index:t,direction:n})},addStepFilter:function(e,t,n){i.dispatch({actionType:a.EXPLORER_ADD_STEP_FILTER,id:e,stepIndex:t,attrs:n})},removeStepFilter:function(e,t,n){i.dispatch({actionType:a.EXPLORER_REMOVE_STEP_FILTER,id:e,stepIndex:t,filterIndex:n})},updateStepFilter:function(e,t,n,r){i.dispatch({actionType:a.EXPLORER_UPDATE_STEP_FILTER,id:e,stepIndex:t,filterIndex:n,attrs:r})},exec:function(t,n){var r=s.get(n);if(r.loading)throw new Error("Warning: calling exec when model loading is true. Explorer id: "+r.id);f.validate(r.id),(r=s.get(n)).isValid?(l.clearAll(),i.dispatch({actionType:a.EXPLORER_UPDATE,id:r.id,updates:{loading:!0}}),d.runQuery({client:t,query:d.queryJSON(r),error:e.exports.execError.bind(this,r),success:e.exports.execSuccess.bind(this,r)})):i.dispatch({actionType:a.EXPLORER_FOUND_INVALID,id:r.id})},execError:function(e,t){i.dispatch({actionType:a.EXPLORER_QUERY_ERROR,query:e.query,error:t.message}),f.update(e.id,{loading:!1}),l.create({text:t.message,type:"error"})},execSuccess:function(e,t){i.dispatch({actionType:a.EXPLORER_QUERY_SUCCESS,query:e.query,isSaved:d.isPersisted(e)}),l.clearAll();var n={};n.response=t,t.query||(t.query=d.queryJSON(e)),n.loading=!1,m.responseSupportsChartType(t.query,e.metadata.visualization.chart_type)||(n.metadata=r.cloneDeep(e.metadata),n.metadata.visualization.chart_type=m.getChartTypeOptions(t.query)[0]),n.dataTimestamp=Date.now(),f.update(e.id,n)},runEmailExtraction:function(t,n){f.validate(n);var r=s.get(n);r.isValid?(l.clearAll(),i.dispatch({actionType:a.EXPLORER_UPDATE,id:r.id,updates:{loading:!0}}),d.runQuery({client:t,query:d.queryJSON(r),success:e.exports.runEmailExtractionSuccess.bind(this,r),error:e.exports.runEmailExtractionError})):i.dispatch({actionType:a.EXPLORER_FOUND_INVALID,id:r.id})},runEmailExtractionSuccess:function(e,t){i.dispatch({actionType:a.EXPLORER_QUERY_SUCCESS,query:e.query,isSaved:d.isPersisted(e)}),l.clearAll(),l.create({text:"Email extraction successfully requested. Check your email ("+e.query.email+").",type:"success",icon:"check"}),f.update(e.id,{result:t,loading:!1})},runEmailExtractionError:function(e){l.create({text:e.message,type:"error",icon:"remove-sign"})},fetchAllPersisted:function(e,t){c.update({fetchingPersistedExplorers:!0}),e.get(null,function(e,n){if(e)t(e);else{var r=[];n.forEach(function(e){var t=d.formatQueryParams(e);h.run(o,t),t.isValid||(console.warn("A persisted explorer model is invalid: ",t),console.log("Errors: ",t.errors)),r.push(t)}),f.createBatch(r),c.update({fetchingPersistedExplorers:!1}),t(null)}})},fetchPersisted:function(e,t,n){e.get(t,function(e,t){if(e)n(e);else{var r=d.formatQueryParams(t);h.run(o,r),r.isValid||console.warn("A persisted explorer model is invalid: ",r),f.create(r),n(null)}})},save:function(t,n){var r=d.saveType(s.get(n)),o="save"===r?"create":"update";i.dispatch({actionType:a.EXPLORER_SAVING,id:n,saveType:r});var c=s.get(n);if(!c.isValid)return i.dispatch({actionType:a.EXPLORER_FOUND_INVALID,id:c.id}),void e.exports.update(n,{saving:!1});l.clearAll();var p=d.cleanJSONforSave(d.toJSON(s.get(n)));t[o](p,function(t,o){t?i.dispatch({actionType:a.EXPLORER_SAVE_FAIL,saveType:r,id:n,errorResp:t,query:s.get(n).query}):e.exports.saveSuccess(n,o)})},saveSuccess:function(e,t){var n=d.saveType(s.get(e)),r=d.mergeResponseWithExplorer(s.get(e),t);i.dispatch({actionType:a.EXPLORER_UPDATE,id:e,updates:r}),i.dispatch({actionType:a.EXPLORER_SAVE_SUCCESS,id:r.id,saveType:n,query:r.query})},destroy:function(e,t){i.dispatch({actionType:a.EXPLORER_DESTROYING});var n=r.clone(d.toJSON(s.get(t)));e.destroy(n,function(e,r){e?i.dispatch({actionType:a.EXPLORER_DESTROY_FAIL,errorMsg:e,query:s.get(t).query}):(i.dispatch({actionType:a.EXPLORER_REMOVE,id:t}),i.dispatch({actionType:a.EXPLORER_DESTROY_SUCCESS,query:n.query}))})}};e.exports=f},function(e,t,n){"use strict";n(0);var r=n(80),i=(n(2),{DEFAULT_TIMEZONE:"UTC",ANALYSIS_TYPES:["sum","count","count_unique","minimum","maximum","average","select_unique","extraction","percentile","median","funnel"],ABSOLUTE_INTERVAL_TYPES:[{name:"minutely",value:"minutely"},{name:"hourly",value:"hourly"},{name:"daily",value:"daily"},{name:"weekly",value:"weekly"},{name:"monthly",value:"monthly"},{name:"yearly",value:"yearly"}],RELATIVE_INTERVAL_TYPES:[{name:"minutes",value:"minutes"},{name:"hours",value:"hours"},{name:"days",value:"days"},{name:"weeks",value:"weeks"},{name:"months",value:"months"},{name:"years",value:"years"}],TIMEZONES:[{name:"UTC",offset:0,dst_offset:0},{name:"Europe/London",offset:0,dst_offset:3600},{name:"Africa/Casablanca",offset:0,dst_offset:0},{name:"Africa/Nairobi",offset:10800,dst_offset:0},{name:"Asia/Dubai",offset:14400,dst_offset:0},{name:"America/Sao_Paulo",offset:-10800,dst_offset:-7200},{name:"US/Eastern",offset:-18e3,dst_offset:-14400},{name:"US/Central",offset:-21600,dst_offset:-18e3},{name:"US/Mountain",offset:-25200,dst_offset:-21600},{name:"US/Pacific",offset:-28800,dst_offset:-25200},{name:"US/Alaska",offset:-32400,dst_offset:-28800},{name:"US/Hawaii",offset:-36e3,dst_offset:-32400},{name:"Europe/Paris",offset:3600,dst_offset:7200},{name:"Europe/Amsterdam",offset:3600,dst_offset:7200},{name:"Europe/Stockholm",offset:3600,dst_offset:7200},{name:"Europe/Prague",offset:3600,dst_offset:7200},{name:"Asia/Istanbul",offset:7200,dst_offset:10800},{name:"Europe/Istanbul",offset:7200,dst_offset:10800},{name:"Europe/Copenhagen",offset:3600,dst_offset:7200},{name:"Asia/Jakarta",offset:25200,dst_offset:25200},{name:"Asia/Singapore",offset:28800,dst_offset:28800},{name:"Australia/Perth",offset:28800,dst_offset:28800},{name:"Asia/Tokyo",offset:32400,dst_offset:32400},{name:"Australia/Sydney",offset:36e3,dst_offset:39600},{name:"Pacific/Auckland",offset:43200,dst_offset:46800}],FILTER_OPERATORS:[{name:"= Equal to",value:"eq",canBeCoeredTo:["String","Number","Null","List","Boolean","Datetime"]},{name:"≠ Not equal to",value:"ne",canBeCoeredTo:["String","Number","Null","List","Boolean","Datetime"]},{name:"> Greater than",value:"gt",canBeCoeredTo:["Number","Null","Datetime","String"]},{name:"≥ Greater than or equal to",value:"gte",canBeCoeredTo:["Number","Null","Datetime","String"]},{name:"< Less than",value:"lt",canBeCoeredTo:["Number","Null","Datetime","String"]},{name:"≤ Less than or equal to",value:"lte",canBeCoeredTo:["Number","Null","Datetime","String"]},{name:"∃ Property exists",value:"exists",canBeCoeredTo:["Boolean"]},{name:"⊚ String contains",value:"contains",canBeCoeredTo:["String","Null"]},{name:"⍉ String does not contain",value:"not_contains",canBeCoeredTo:["String","Null"]},{name:"⧇ Matches any value in a list",value:"in",canBeCoeredTo:["List"]},{name:"⚐ Within a given radius (geo)",value:"within",canBeCoeredTo:["Geo"]}]});e.exports={getConstant:function(e){return i[e]},eventsUrl:function(e){return e.url("events",{api_key:e.config.masterKey})},getEventCollectionPropertyNames:function(e,t){return e.schema[t]?e.schema[t].sortedProperties:[]},getPropertyType:function(e,t,n){return(t=e.schema[t])?t.properties[n]:null},getLocalTimezoneOffset:function(e){return-1*(new Date).getTimezoneOffset()*60},getLocalTimezone:function(t){var n=r.isDST(),a=e.exports.getLocalTimezoneOffset(),s=i.TIMEZONES.filter(function(e){return n?e.dst_offset===a:e.offset===a});return s.length?s[0].name:a}}},function(e,t){e.exports=n},function(e,t,n){"use strict";var r=n(79).Dispatcher;e.exports=new r},function(e,t,n){"use strict";var r=n(0),i=n(9),a=(n(44),n(17),n(2)),s=n(30),o=n(10);function l(e){return!r.isNull(e)&&!r.isUndefined(e)}e.exports={coercionFunctions:{Datetime:function(t){if("string"==typeof t.property_value){var n=new Date(t.property_value);if(null!==n&&"Invalid Date"!==n.toString())return n.toString()}return e.exports.defaultDate()},String:function(e){return l(e.property_value)?e.property_value.toString():null},Number:function(e){if(!l(e.property_value))return null;var t=parseFloat(e.property_value);return(void 0===t||null===t||isNaN(t))&&(t=""),t},Boolean:function(e){return!("false"===e.property_value||!1===e.property_value)},Null:function(e){return null},Geo:function(e){return e.property_value},List:function(e){return e.property_value}},defaultDate:function(){var e=i().subtract(1,"days").startOf("day").format("x");return new Date(Number(e))},getCoercedValue:function(t){return e.exports.coercionFunctions[t.coercion_type]?e.exports.coercionFunctions[t.coercion_type](t):null},getCoercionType:function(e){switch(n=e.property_value,{}.toString.call(n).match(/\s([a-zA-Z]+)/)[1].toLowerCase()){case"object":return"Geo";case"string":return"exists"===e.operator?"Boolean":["false","true"].indexOf(e.property_value)>-1?"Boolean":(t=e.property_value,isNaN(t)||-1!==["contains","not_contains"].indexOf(e.operator)?a.isDateInStrictFormat(e.property_value.substring(0,e.property_value.length-6))?"Datetime":a.isList(e.property_value)?"List":"String":"Number");case"array":return"List";case"boolean":return"Boolean";case"number":return"Number";case"null":return"Null"}var t,n},isComplete:function(e){for(var t=["property_name","property_value","operator","coercion_type"],n=!0,i=0;i<t.length;i++){var a=e[t[i]];if(n=!r.isUndefined(a)&&!r.isNull(a),r.isObject(a)&&(n=!r.isEmpty(a)),!n)break}return n},queryJSON:function(t){if(o.run(s,t),!t.isValid)return{};var n=r.cloneDeep(t);return n.property_value=e.exports.getCoercedValue(t),"Datetime"===n.coercion_type&&(n.property_value=a.formatISOTimeNoTimezone(n.property_value)),"List"===n.coercion_type&&(n.property_value=a.parseList(n.property_value)),r.pick(n,["property_name","operator","property_value"])},initList:function(e){var t="";return r.each(e.property_value,function(n,i){r.isString(n)&&(t+='"'+n+'"'),r.isNumber(n)&&(t+="'"+n+"'"),i!==e.property_value.length-1&&(t+=", ")}),e.property_value=t,e},formatFilterParams:function(t){return t.coercion_type=e.exports.getCoercionType(t),"List"===t.coercion_type&&(t=r.assign({},t,e.exports.initList(t))),t.property_value=e.exports.getCoercedValue(t),"Datetime"===t.coercion_type&&(t.property_value=a.convertDateToUTC(new Date(t.property_value))),t},coerceGeoValue:function(e){var t=e.match(/\.+$/);return"-"===e||t&&t.length?e:parseFloat(e)||0},validFilters:function(e){return r.filter(e,function(e){return o.run(s,e),e.isValid})}}},function(e,t){e.exports=r},function(e,t,n){"use strict";e.exports={run:function(e,t){var n=Object.keys(e);t.isValid=!0,t.errors=[];for(var r=0;r<n.length;r++){var i=e[n[r]];if(!i.shouldRun||i.shouldRun(t)){var a=i.validate(t);!0!==a&&(t.isValid=!1,t.errors.push({attribute:n[r],msg:!1===a?i.msg:a}))}}}}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),a=i.createClass({displayName:"ReactSelect",getDefaultProps:function(){return{items:[],wrapClasses:"",inputClasses:"",placeholder:"",handleBlur:function(){},handleChange:function(){},handleSelection:function(){}}},getInitialState:function(){return{focusedItem:"",limit:30,initialFocus:!1,selectedItem:0,visible:!1,visibleItems:0}},resetState:function(){this.setState({focusedItem:"",limit:30,selectedItem:0,visible:!1,initialFocus:!0})},handleClick:function(e){this.setState({visible:!0}),this.handleItemFocus()},handleChange:function(e){var t={initialFocus:!1};this.state.visible?(t.limit=30,t.selectedItem=0,this.refs.scrollpane.scrollTop=0):t.visible=!0,this.setState(t),this.props.handleChange(this.props.name,this.refs.input.value)},handleFocus:function(e){this.state.visible?this.resetState():this.setState({initialFocus:!0,visible:!0})},handleBlur:function(e){this.refs.scrollpane&&e.relatedTarget!==this.refs.scrollpane&&(this.state.visible||e.preventDefault(),this.resetTimeout=setTimeout(this.resetState,100),this.blurTimeout=setTimeout(this.props.handleBlur(e),100))},handleItemFocus:function(){clearTimeout(this.resetTimeout),clearTimeout(this.blurTimeout)},handleItemSelection:function(e){if(r(this.props.items[e])){var t=String(this.props.items[e]);this.setState({initialFocus:!1}),this.refs.input.focus(),this.resetState(),this.props.handleChange(this.props.name,t),this.props.handleSelection(this.props.name,t)}},handleKeyDown:function(e){var t,n;"Tab"!==e.key&&"Shift"!==e.key&&(this.setState({visible:!0}),this.refs.list&&this.state.selectedItem&&(n=(t=this.refs.list.children[this.state.selectedItem].scrollHeight+1)*this.state.selectedItem),this.keyDownCallbacks[e.key]&&this.keyDownCallbacks[e.key].call(this,e,t,n))},keyDownCallbacks:{ArrowUp:function(e,t,n){var r={},i=this.refs.list;this.state.selectedItem-1>=0?(r.selectedItem=this.state.selectedItem-1,i&&(r.focusedItem=i.children[this.state.selectedItem-1].innerHTML)):(r.selectedItem=0,i&&(r.focusedItem=i.children[0].innerHTML)),this.setState(r),i&&n>3*t&&(this.refs.scrollpane.scrollTop-=t),e.preventDefault()},ArrowDown:function(e,t,n){var r={},i=this.refs.list;this.state.selectedItem+1<this.visibleItems?(r.selectedItem=this.state.selectedItem+1,i&&(r.focusedItem=this.refs.list.children[this.state.selectedItem+1].innerHTML)):(r.selectedItem=this.visibleItems-1,i&&(r.focusedItem=i.children[this.visibleItems-1].innerHTML)),this.setState(r),i&&n>3*t&&(this.refs.scrollpane.scrollTop+=t),e.preventDefault()},Enter:function(e,t,n){var r=this.refs.list;if(r){var i=r.children[this.state.selectedItem];i&&this.handleItemSelection(i.getAttribute("data-index"))}else this.resetState();e.preventDefault()},Escape:function(e,t,n){this.handleBlur(e),e.preventDefault()}},handleScroll:function(e){var t=this.refs.scrollpane;t.scrollHeight-t.scrollTop-200<50&&this.setState({limit:this.state.limit+30})},appendListItems:function(e){var t=this;return e.forEach(function(e,n){t.props.items.push(e)}),this.forceUpdate(),this},insertListItems:function(e,t){return this.props.items.splice.apply(this.props.items,[e,0].concat(t)),this.forceUpdate(),this},removeListItems:function(){return this.props.items=[],this.forceUpdate(),this},getItems:function(){var e=this,t=0;this.visibleItems=0;var n=this.state.initialFocus?"":this.props.value||"";return this.props.items.map(function(r,a){if(!(n.length>0&&String(r).toLowerCase().search(_.escapeRegExp(n).toLowerCase())<0||++t>e.state.limit))return e.visibleItems=e.visibleItems+1,i.createElement("li",{className:e.state.selectedItem===t-1?"react-select-item active":"react-select-item",key:a,"data-index":a,onMouseDown:e.handleItemSelection.bind(e,a),onFocus:e.handleItemFocus.bind(e,a),"aria-live":"polite",role:"option"},r)})},getScrollPane:function(e){if(this.state.visible)return i.createElement("div",{ref:"scrollpane",className:"react-select-scrollpane",onScroll:this.handleScroll,tabIndex:"-1","aria-hidden":"false"},i.createElement("div",{className:"react-select-aria-notice","aria-live":"assertive"},this.state.focusedItem||""),i.createElement("ul",{ref:"list",className:"react-select-list","aria-atomic":"false","aria-label":"Begin typing to filter options, or key up or down to browse available options","aria-live":"assertive","aria-relevant":"additions",role:"listbox",id:this.props.id+"-scrollpane"},e))},render:function(){var e=this.getItems(),t=this.getScrollPane(e),n="react-select";this.props.wrapClasses&&(n=n+" "+this.props.wrapClasses),this.state.visible&&(n+=" visible");var r="react-select-input";return this.props.inputClasses&&(r=r+" "+this.props.inputClasses),i.createElement("div",{ref:"wrapper",className:n},i.createElement("input",{ref:"input",name:this.props.name,className:r,value:this.props.value||"",placeholder:this.props.placeholder,onClick:this.handleClick,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,"aria-expanded":this.state.visible,"aria-owns":this.props.id+"-scrollpane","aria-label":this.props.title||"Select value","aria-selected":!(!this.props.value||!this.props.value.length)||void 0,"aria-live":"polite",autoComplete:"off"}),t)}});e.exports=a},function(e,t,n){"use strict";var r=n(7),i=n(21).EventEmitter,a=n(0),s=n(19),o=n(2),l=n(3),c=n(8),p=n(5),u=n(16),h=n(10).run,d=n(25),m=(n(30),n(38),["event_collection","time","timezone","filters"]),f={};function v(){return{id:o.generateTempId(),query_name:null,active:!1,saving:!1,dataTimestamp:null,response:null,loading:!1,isValid:!0,errors:[],refresh_rate:0,query:{event_collection:null,analysis_type:null,target_property:null,percentile:null,group_by:[],interval:null,timezone:p.getLocalTimezone(),filters:[],steps:[],email:null,latest:null,property_names:[],time:{relativity:"this",amount:14,sub_timeframe:"days"}},metadata:{display_name:null,visualization:{chart_type:null}}}}function y(){return{event_collection:null,actor_property:null,time:{relativity:"this",amount:14,sub_timeframe:"days"},timezone:p.getLocalTimezone(),filters:[],optional:!1,inverted:!1,with_actors:!1,active:!1,isValid:!0,errors:[]}}function g(e){h(d,f[e])}function E(e,t){var n=a.mergeWith({},e,a.omit(t,"response"),function(e,t,n){return a.isArray(e)?t:"time"===n&&a.isPlainObject(e)?t:void 0});return t.response&&(n.response=t.response),t.query&&t.query.event_collection&&t.query.event_collection!==e.query.event_collection&&(n.query.property_names=[]),"funnel"===n.query.analysis_type&&"funnel"!==e.query.analysis_type?n=function(e,t){var n=y();n.active=!0,a.each(m,function(r){a.isUndefined(e.query[r])||a.isNull(e.query[r])||(n[r]=e.query[r]),t.query[r]="filters"===r?[]:null}),a.isUndefined(e.query.target_property)||a.isNull(e.query.target_property)||(n.actor_property=e.query.target_property,e.query.target_property=null);return t.query.steps=[n],t}(e,n):"funnel"!==n.query.analysis_type&&"funnel"===e.query.analysis_type&&(n=function(e,t){if(e.query.steps.length<1)return t;var n=a.find(e.query.steps,{active:!0})||e.query.steps[0];a.each(m,function(e){a.isUndefined(n[e])||(t.query[e]=n[e])}),!a.isNull(n.actor_property)&&l.shouldHaveTarget(t)&&(t.query.target_property=n.actor_property);return t.query.steps=[],t}(e,n)),n=function(e){l.isEmailExtraction(e)||(e.query.latest=null,e.query.email=null);"extraction"===e.query.analysis_type&&(e.query.group_by=null,e.query.interval=null);"extraction"!==e.query.analysis_type&&(e.query.latest=null);"percentile"!==e.query.analysis_type&&(e.query.percentile=null);a.includes(["count","extraction","funnel"],e.query.analysis_type)&&(e.query.target_property=null);"funnel"!==e.query.analysis_type&&(e.query.steps=[]);"funnel"===e.query.analysis_type&&(e.query.filters=[],e.query.time=null,e.query.timezone=null,e.query.group_by=null,e.query.timeframe=null,e.query.interval=null);return e}(n)}function b(e,t,n){if(n.property_name&&n.property_name!==t.property_name)"exists"===t.operator?n.coercion_type="Boolean":n.coercion_type=function(e,t){var n=p.getPropertyType(u.getProject(),e.query.event_collection,t.property_name);return o.coercionTypeForPropertyType(n)}(e,a.merge({},t,n));else if(n.operator&&n.operator!==t.operator){var r=n.operator;"in"===r&&(n.coercion_type="List"),"exists"===r&&(n.coercion_type="Boolean"),"within"===r&&(n.coercion_type="Geo");var i=a.find(p.getConstant("FILTER_OPERATORS"),{value:n.operator}).canBeCoeredTo,s=n.coercion_type||t.coercion_type;a.includes(i,s)||(n.coercion_type=i[0])}return"Geo"===n.coercion_type&&"Geo"!==t.coercion_type&&(n.property_value={coordinates:[],max_distance_miles:null}),n.property_value=c.getCoercedValue(a.merge({},t,n)),n}function _(e){return a.isArray(e)||(e=[e]),a.pull(e,null)}function C(e){if(e&&!0===e.active)throw new Error("You must use setActive to set a model as active.");e=e||{};var t=a.merge(v(),e);return t.query.steps&&(t.query.steps=a.map(t.query.steps,function(e){return a.merge(y(),e)})),t.metadata||(t.metadata={display_name:null,visualization:{chart_type:null}}),t.query.group_by=_(t.query.group_by),t.query.percentile=parseFloat(t.query.percentile)||null,f[t.id]=t,t.id}function T(e,t){if(t&&!0===t.active&&!f[e].active)throw new Error("You must use setActive to set a model as active.");var n=E(f[e],t);return n.query.group_by=_(n.query.group_by),n.query.percentile=parseFloat(n.query.percentile)||null,t.id&&t.id!==e?(f[t.id]=n,delete f[e],t.id):(f[e]=n,e)}function S(e){a.each(f,function(e,t){e.active=!1,delete e.originalModel}),f[e].active=!0,f[e].originalModel=a.cloneDeep(f[e])}function x(e,t){f[e].query.steps.forEach(function(e){e.active=!1}),f[e].query.steps[t].active=!0}var N=a.assign({},i.prototype,{unregisterWithDispatcher:function(){r.unregister(this.dispatchToken)},clearAll:function(){f={}},get:function(e){return f[e]},getActive:function(){return a.find(f,{active:!0})},getAll:function(){return f},getLast:function(){var e=a.keys(f);return f[e[e.length-1]]},getAllPersisted:function(){return a.filter(f,function(e){return l.isPersisted(e)})},emitChange:function(){this.emit("change")},addChangeListener:function(e){this.on("change",e)},removeChangeListener:function(e){this.removeListener("change",e)}});N.dispatchToken=r.register(function(e){function t(e){e&&g(e),N.emitChange()}switch(e.actionType){case s.EXPLORER_CREATE:C(e.attrs),t();break;case s.EXPLORER_CREATE_BATCH:e.models.forEach(function(e){f[e.id]?T(e.id,e):C(e)}),t();break;case s.EXPLORER_CLONE:var n=N.get(e.id);C({query:a.cloneDeep(n.query),metadata:{display_name:null,visualization:{chart_type:a.cloneDeep(n.metadata.visualization.chart_type)}}}),t();break;case s.EXPLORER_UPDATE:t(T(e.id,e.updates));break;case s.EXPLORER_REMOVE:var r=!0===f[e.id].active;if(function(e){delete f[e]}(e.id),r)S(C());t();break;case s.EXPLORER_SET_ACTIVE:S(e.id),t(e.id);break;case s.EXPLORER_REVERT_ACTIVE_CHANGES:t((i=a.find(f,{active:!0}),o=f[i.id].originalModel,f[i.id]=a.assign({},o,{originalModel:o,response:i.response}),i.id));break;case s.EXPLORER_CLEAR:!function(e){var t=f[e];f[e]=a.assign({},v(),a.pick(t,["id","query_name","active","metadata","originalModel"]))}(e.id),t();break;case s.EXPLORER_SAVING:T(e.id,{saving:!0}),t(e.id);break;case s.EXPLORER_SAVE_SUCCESS:case s.EXPLORER_SAVE_FAIL:T(e.id,{saving:!1}),t(e.id);break;case s.EXPLORER_ADD_FILTER:!function(e,t){t=t||{},f[e].query.filters.push(a.assign({property_name:null,property_value:null,operator:"eq",coercion_type:"String",isValid:!0,errors:[]},t))}(e.id,e.attrs),t(e.id);break;case s.EXPLORER_REMOVE_FILTER:!function(e,t){f[e].query.filters.splice(t,1)}(e.id,e.index),t(e.id);break;case s.EXPLORER_UPDATE_FILTER:!function(e,t,n){var r=f[e].query.filters[t];n=b(f[e],r,n),f[e].query.filters[t]=a.assign({},r,n),"Null"===f[e].query.filters[t].coercion_type&&(f[e].query.filters[t].property_value=null)}(e.id,e.index,e.attrs),t(e.id);break;case s.EXPLORER_ADD_STEP:!function(e,t){var n=f[e];if("funnel"!==n.query.analysis_type)throw new Error("Error: Attempting to add a step to a non-funnel query. Explorer id: "+n.id);var r=a.assign(y(),t||{});if(r.active=!0,n.query.steps.length>0){var i=n.query.steps[n.query.steps.length-1];r.time=i.time,r.timezone=i.timezone}n.query.steps.push(r),x(e,n.query.steps.length-1)}(e.id,e.attrs),t(e.id);break;case s.EXPLORER_REMOVE_STEP:!function(e,t){f[e].query.steps.splice(t,1),t>f[e].query.steps.length-1?x(e,f[e].query.steps.length-1):x(e,t)}(e.id,e.index),t(e.id);break;case s.EXPLORER_UPDATE_STEP:!function(e,t,n){var r=f[e].query.steps[t];f[e].query.steps[t]=a.assign({},r,n)}(e.id,e.index,e.attrs),t(e.id);break;case s.EXPLORER_SET_STEP_ACTIVE:x(e.id,e.index),t(e.id);break;case s.EXPLORER_MOVE_STEP:!function(e,t,n){var r=a.cloneDeep(f[e].query.steps);if("up"===n){if(0===t)return;var i=r[t-1],s=r[t];r[t-1]=s,r[t]=i}if("down"===n){if(t===r.length-1)return;i=r[t+1],s=r[t],r[t+1]=s,r[t]=i}f[e].query.steps=r}(e.id,e.index,e.direction),t(e.id);break;case s.EXPLORER_ADD_STEP_FILTER:!function(e,t,n){n=n||{},f[e].query.steps[t].filters.push(a.assign({property_name:null,property_value:null,operator:"eq",coercion_type:"String",isValid:!0,errors:[]},n))}(e.id,e.stepIndex,e.attrs),t(e.id);break;case s.EXPLORER_REMOVE_STEP_FILTER:!function(e,t,n){f[e].query.steps[t].filters.splice(n,1)}(e.id,e.stepIndex,e.filterIndex),t(e.id);break;case s.EXPLORER_UPDATE_STEP_FILTER:!function(e,t,n,r){var i=f[e].query.steps[t].filters[n];r=b(f[e],i,r),f[e].query.steps[t].filters[n]=a.assign({},i,r),"Null"===f[e].query.steps[t].filters[n].coercion_type&&(f[e].query.steps[t].filters[n].property_value=null)}(e.id,e.stepIndex,e.filterIndex,e.attrs),t(e.id);break;case s.EXPLORER_VALIDATE:g(e.id),t();break;case s.EXPLORER_FOUND_INVALID:!function(e){var t=f[e];"funnel"===t.query.analysis_type&&t.query.steps.forEach(function(t,n){t.isValid||x(e,n)})}(e.id),t()}var i,o;return!0}),e.exports=N},function(e,t,n){"use strict";var r=n(1),i=(n(0),r.createClass({displayName:"InputComponent",_onChange:function(e){this.setState({value:e.target.value}),this.props.onChange(e)},getDefaultProps:function(){return{classes:"form-group",inputClasses:"",type:"text",placeholder:"",readonly:!1,onChange:function(){}}},getInitialState:function(){return{value:this.props.value||""}},componentWillReceiveProps:function(e){this.setState({value:e.value})},render:function(){var e=this.props.required?r.createElement("small",null,"(required)"):null,t=this.props.label?r.createElement("label",{htmlFor:this.props.name},this.props.label," ",e):null,n="form-control";return this.props.inputClasses&&(n=n+" "+this.props.inputClasses),r.createElement("div",{className:this.props.classes},t,r.createElement("input",{ref:"input",type:this.props.type,name:this.props.name,className:n,placeholder:this.props.placeholder,onChange:this._onChange,onBlur:this.props.onBlur,value:this.state.value,readOnly:this.props.readonly,autoComplete:"off"}))}}));e.exports=i},function(e,t,n){"use strict";var r=n(1),i=n(6),a=n(0),s=r.createClass({displayName:"FieldsToggle",handleFieldsToggle:function(e){var t=this.props.attrsToStore,n={};a.isArray(t)||(t=[t]),a.each(t,function(t){if(e)this._storedAttrs[t]&&(n[t]=this._storedAttrs[t]);else{this._storedAttrs[t]=this.props.getFn(t);var r=this.props.resetValues[t]||null;n[t]=r}}.bind(this)),this.props.updateFn(n)},toggleButtonClick:function(e){e.preventDefault(),this.toggle()},toggle:function(){var e;null===this.props.fieldsCount&&(e=!this.state.open,this.setState({open:e}),this.handleFieldsToggle(e)),this.props.toggleCallback(e||null)},componentWillMount:function(){this._storedAttrs={}},getDefaultProps:function(){return{toggleCallback:function(){},initialOpenState:!1,fieldsCount:null,resetValues:{}}},getInitialState:function(){return{open:!!this.props.initialOpenState}},componentWillReceiveProps:function(e){!this.props.initialOpenState&&e.initialOpenState&&this.setState({open:!0})},render:function(){var e,t=this.props.fieldsCount?this.props.fieldsCount:null,n=i({"has-fields-count":t,open:this.state.open&&null===t,"fields-toggle":!0});return this.props.children&&(e=r.createElement("div",{className:"toggle-body"},this.props.children)),r.createElement("div",{className:n},r.createElement("a",{href:"#",className:"toggle-label",onClick:this.toggleButtonClick,ref:"toggle-label"},r.createElement("h5",{ref:"name"},this.props.name),r.createElement("button",{type:"button",className:"toggle-button"},r.createElement("span",{className:"icon",ref:"icon"},t))),e)}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(0),a=r.createClass({displayName:"SelectComponent",buildOptions:function(){return this.state.options.length?this.state.options.map(function(e){return r.createElement("option",{value:e.value,key:e.value,disabled:e.disabled||!1},e.name)}):null},wrapValuesInObjects:function(e){return i.isObject(e[0])?e:i.map(e,function(e){return{name:e,value:e}})},sortOptions:function(e){return e.sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0})},buildEmptyOption:function(){var e=this.props.emptyOption;return!0===e?r.createElement("option",{value:""}):e?r.createElement("option",{value:""},e):null},setupOptions:function(e){var t=this.wrapValuesInObjects(e);return this.props.sort&&(t=this.sortOptions(t)),t},getDefaultProps:function(){return{classes:"form-group",sort:!0,emptyOption:!0,reference:"select",handleSelection:function(){},handleBlur:function(){},options:[]}},componentWillReceiveProps:function(e){this.setState({options:this.setupOptions(e.options)})},getInitialState:function(){return{options:this.setupOptions(this.props.options)}},render:function(){var e=this.buildOptions(),t=this.props.label?r.createElement("label",{htmlFor:this.props.name},this.props.label):null,n=this.buildEmptyOption(),i=this.props.multiple?[]:"",a=this.props.selectedOption?this.props.selectedOption:i;return r.createElement("div",{className:this.props.classes},t,r.createElement("div",{className:"select-element"},r.createElement("select",{ref:this.props.reference,name:this.props.name,value:a,className:"form-control",multiple:this.props.multiple,onChange:this.props.handleSelection,onBlur:this.props.handleBlur,disabled:this.props.disabled},n,e)))}});e.exports=a},function(e,t,n){"use strict";var r=n(7),i=n(21).EventEmitter,a=n(0),s=n(43),o=(n(5),n(2)),l={};var c=a.assign({},i.prototype,{unregisterWithDispatcher:function(){r.unregister(p)},clearAll:function(){l={}},getProject:function(){var e=Object.keys(l);if(e.length)return l[e[0]]},getAll:function(){return l},emitChange:function(){this.emit("change")},addChangeListener:function(e){this.on("change",e)},removeChangeListener:function(e){this.removeListener("change",e)}}),p=r.register(function(e){var t,n;switch(e.actionType){case s.PROJECT_CREATE:!function(e){var t=o.generateTempId();l[t]=a.assign({id:null,loading:!0,eventCollections:[],sortedEventCollections:{},schema:{}},{id:t},e)}(e.attrs),c.emitChange();break;case s.PROJECT_UPDATE:t=e.id,n=e.updates,l[t]=a.assign({},l[t],n),c.emitChange();break;case s.PROJECT_UPDATE_EVENT_COLLECTION:!function(e,t,n){var r=a.assign({},l[e].schema[t],n);l[e].schema[t]=r}(e.id,e.collectionName,e.updates),c.emitChange()}return!0});e.exports=c},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),a=n(5),s=n(2);e.exports={timeframeType:function(e){if(i.isUndefined(e))return null;if(i.isPlainObject(e)){if(i.has(e,"start")||i.has(e,"end"))return"absolute";if(i.has(e,"relativity")&&i.has(e,"amount")&&i.has(e,"sub_timeframe"))return"relative";throw new Error("Invalid timeframe type: invalid time value.")}throw new Error("Invalid timeframe type: not a plain object.")},getTimezoneOffset:function(e){var t=i.find(a.getConstant("TIMEZONES"),{value:e});return t?t.offset:"+00:00"},timeframeBuilders:{absolute:function(e){if(e&&e.start&&e.end)return{start:s.formatISOTimeNoTimezone(e.start),end:s.formatISOTimeNoTimezone(e.end)}},relative:function(e){if(e&&e.relativity&&e.amount&&e.sub_timeframe)return[e.relativity,e.amount,e.sub_timeframe].join("_")}},getTimeframe:function(t){var n=e.exports.timeframeBuilders[e.exports.timeframeType(t)];return void 0===n?"":n(t)},getTimeParameters:function(t,n){return{timeframe:t?e.exports.getTimeframe(t):null,timezone:n||a.getConstant("DEFAULT_TIMEZONE")}},unpackTimeframeParam:function(t,n){return"object"===(void 0===t?"undefined":r(t))?e.exports.unpackAbsoluteTimeframe(t,n):"string"==typeof t?e.exports.unpackRelativeTimeframe(t,n):void 0},unpackAbsoluteTimeframe:function(e,t){var n={time:{},timezone:null};t&&a.getConstant("TIMEZONES").filter(function(e){return e.name===t}).length?n.timezone=t:n.timezone="UTC";var r=e.start?e.start.substring(0,19):"";n.time.start=s.formatISOTimeNoTimezone(r);var i=e.end?e.end.substring(0,19):"";return n.time.end=s.formatISOTimeNoTimezone(i),n},unpackRelativeTimeframe:function(e,t){var n=e.split("_");return{time:{relativity:n[0],amount:n[1],sub_timeframe:n[2]},timezone:t}}}},function(e,t,n){"use strict";var r=n(7),i=n(37),a={create:function(e){r.dispatch({actionType:i.NOTICE_CREATE,attrs:e})},clearAll:function(){r.dispatch({actionType:i.NOTICE_CLEAR_ALL})}};e.exports=a},function(e,t,n){"use strict";var r=n(20);e.exports=r({EXPLORER_CREATE:null,EXPLORER_CREATE_BATCH:null,EXPLORER_CLONE:null,EXPLORER_UPDATE:null,EXPLORER_REMOVE:null,EXPLORER_SET_ACTIVE:null,EXPLORER_REVERT_ACTIVE_CHANGES:null,EXPLORER_CLEAR:null,EXPLORER_VALIDATE:null,EXPLORER_FOUND_INVALID:null,EXPLORER_QUERY_SUCCESS:null,EXPLORER_QUERY_ERROR:null,EXPLORER_ADD_FILTER:null,EXPLORER_REMOVE_FILTER:null,EXPLORER_UPDATE_FILTER:null,EXPLORER_ADD_STEP:null,EXPLORER_REMOVE_STEP:null,EXPLORER_UPDATE_STEP:null,EXPLORER_SET_STEP_ACTIVE:null,EXPLORER_MOVE_STEP:null,EXPLORER_ADD_STEP_FILTER:null,EXPLORER_REMOVE_STEP_FILTER:null,EXPLORER_UPDATE_STEP_FILTER:null,EXPLORER_SAVE:null,EXPLORER_SAVE_NEW:null,EXPLORER_DESTROY:null,EXPLORER_SAVING:null,EXPLORER_SAVE_SUCCESS:null,EXPLORER_SAVE_FAIL:null,EXPLORER_DESTROYING:null,EXPLORER_DESTROY_SUCCESS:null,EXPLORER_DESTROY_FAIL:null})},function(e,t){e.exports=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,o,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,o=new Array(s-1),l=1;l<s;l++)o[l-1]=arguments[l];n.apply(this,o)}else if(i(n)){for(s=arguments.length,o=new Array(s-1),l=1;l<s;l++)o[l-1]=arguments[l];for(s=(c=n.slice()).length,l=0;l<s;l++)c[l].apply(this,o)}return!0},n.prototype.addListener=function(e,t){var s;if(!r(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned)&&((s=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()));return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,a,s,o;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(o=s;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=o;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){return e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t){e.exports=a},function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * pickadate.js v3.5.4, 2014/09/11
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
!function(i){"object"==r(t)?e.exports=i(n(22)):this.Picker=i(jQuery)}(function(e){var t=e(window),n=e(document),r=e(document.documentElement);function i(t,o,l,c){if(!t)return i;var p=!1,u={id:t.id||"P"+Math.abs(~~(Math.random()*new Date))},h=l?e.extend(!0,{},l.defaults,c):c||{},d=e.extend({},i.klasses(),h.klass),m=e(t),f=function(){return this.start()},v=f.prototype={constructor:f,$node:m,start:function(){return u&&u.start?v:(u.methods={},u.start=!0,u.open=!1,u.type=t.type,t.autofocus=t==document.activeElement,t.readOnly=!h.editable,t.id=t.id||u.id,"text"!=t.type&&(t.type="text"),v.component=new l(v,h),v.$root=e(i._.node("div",y(),d.picker,'id="'+t.id+'_root"')),v.$root.on({focusin:function(e){v.$root.removeClass(d.focused),e.stopPropagation()},"mousedown click":function(n){var r=n.target;r!=v.$root.children()[0]&&(n.stopPropagation(),"mousedown"!=n.type||e(r).is(":input")||"OPTION"==r.nodeName||(n.preventDefault(),t.focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var n=e(this),r=n.data(),i=n.hasClass(d.navDisabled)||n.hasClass(d.disabled),a=document.activeElement;a=a&&(a.type||a.href)&&a,(i||a&&!e.contains(v.$root[0],a))&&t.focus(),!i&&r.nav?v.set("highlight",v.component.item.highlight,{nav:r.nav}):!i&&"pick"in r?v.set("select",r.pick).close(!0):r.clear?v.clear().close(!0):r.close&&v.close(!0)}),s(v.$root[0],"hidden",!0),h.formatSubmit&&function(){var n;!0===h.hiddenName?(n=t.name,t.name=""):n=(n=["string"==typeof h.hiddenPrefix?h.hiddenPrefix:"","string"==typeof h.hiddenSuffix?h.hiddenSuffix:"_submit"])[0]+t.name+n[1];v._hidden=e('<input type=hidden name="'+n+'"'+(m.data("value")||t.value?' value="'+v.get("select",h.formatSubmit)+'"':"")+">")[0],m.on("change."+u.id,function(){v._hidden.value=t.value?v.get("select",h.formatSubmit):""}).after(v._hidden)}(),function(){m.data(o,v).addClass(d.input).val(m.data("value")?v.get("select",h.format):t.value).on("focus."+u.id+" click."+u.id,g),h.editable||m.on("keydown."+u.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return v.close(),!1;(32==t||n||!u.open&&v.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?v.clear().close():v.open())});s(t,{haspopup:!0,expanded:!1,readonly:!1,owns:t.id+"_root"+(v._hidden?" "+v._hidden.id:"")})}(),h.container?e(h.container).append(v.$root):m.after(v.$root),v.on({start:v.component.onStart,render:v.component.onRender,stop:v.component.onStop,open:v.component.onOpen,close:v.component.onClose,set:v.component.onSet}).on({start:h.onStart,render:h.onRender,stop:h.onStop,open:h.onOpen,close:h.onClose,set:h.onSet}),p=function(e){var t;e.currentStyle?t=e.currentStyle.position:window.getComputedStyle&&(t=getComputedStyle(e).position);return"fixed"==t}(v.$root.children()[0]),t.autofocus&&v.open(),v.trigger("start").trigger("render"))},render:function(e){return e?v.$root.html(y()):v.$root.find("."+d.box).html(v.component.nodes(u.open)),v.trigger("render")},stop:function(){return u.start?(v.close(),v._hidden&&v._hidden.parentNode.removeChild(v._hidden),v.$root.remove(),m.removeClass(d.input).removeData(o),setTimeout(function(){m.off("."+u.id)},0),t.type=u.type,t.readOnly=!1,v.trigger("stop"),u.methods={},u.start=!1,v):v},open:function(o){return u.open?v:(m.addClass(d.active),s(t,"expanded",!0),setTimeout(function(){v.$root.addClass(d.opened),s(v.$root[0],"hidden",!1)},0),!1!==o&&(u.open=!0,p&&r.css("overflow","hidden").css("padding-right","+="+a()),m.trigger("focus"),n.on("click."+u.id+" focusin."+u.id,function(e){var n=e.target;n!=t&&n!=document&&3!=e.which&&v.close(n===v.$root.children()[0])}).on("keydown."+u.id,function(n){var r=n.keyCode,a=v.component.key[r],s=n.target;27==r?v.close(!0):s!=t||!a&&13!=r?e.contains(v.$root[0],s)&&13==r&&(n.preventDefault(),s.click()):(n.preventDefault(),a?i._.trigger(v.component.key.go,v,[i._.trigger(a)]):v.$root.find("."+d.highlighted).hasClass(d.disabled)||v.set("select",v.component.item.highlight).close())})),v.trigger("open"))},close:function(e){return e&&(m.off("focus."+u.id).trigger("focus"),setTimeout(function(){m.on("focus."+u.id,g)},0)),m.removeClass(d.active),s(t,"expanded",!1),setTimeout(function(){v.$root.removeClass(d.opened+" "+d.focused),s(v.$root[0],"hidden",!0)},0),u.open?(u.open=!1,p&&r.css("overflow","").css("padding-right","-="+a()),n.off("."+u.id),v.trigger("close")):v},clear:function(e){return v.set("clear",null,e)},set:function(t,n,r){var i,a,s=e.isPlainObject(t),o=s?t:{};if(r=s&&e.isPlainObject(n)?n:r||{},t){for(i in s||(o[t]=n),o)a=o[i],i in v.component.item&&(void 0===a&&(a=null),v.component.set(i,a,r)),"select"!=i&&"clear"!=i||m.val("clear"==i?"":v.get(i,h.format)).trigger("change");v.render()}return r.muted?v:v.trigger("set",o)},get:function(e,n){if(null!=u[e=e||"value"])return u[e];if("value"==e)return t.value;if(e in v.component.item){if("string"==typeof n){var r=v.component.get(e);return r?i._.trigger(v.component.formats.toString,v.component,[n,r]):""}return v.component.get(e)}},on:function(t,n,r){var i,a,s=e.isPlainObject(t),o=s?t:{};if(t)for(i in s||(o[t]=n),o)a=o[i],r&&(i="_"+i),u.methods[i]=u.methods[i]||[],u.methods[i].push(a);return v},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in u.methods&&delete u.methods[t];return v},trigger:function(e,t){var n=function(e){var n=u.methods[e];n&&n.map(function(e){i._.trigger(e,v,[t])})};return n("_"+e),n(e),v}};function y(){return i._.node("div",i._.node("div",i._.node("div",i._.node("div",v.component.nodes(u.open),d.box),d.wrap),d.frame),d.holder)}function g(e){e.stopPropagation(),"focus"==e.type&&v.$root.addClass(d.focused),v.open()}return new f}function a(){if(r.height()<=t.height())return 0;var n=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=n[0].offsetWidth;n.css("overflow","scroll");var a=e('<div style="width:100%" />').appendTo(n)[0].offsetWidth;return n.remove(),i-a}function s(t,n,r){if(e.isPlainObject(n))for(var i in n)o(t,i,n[i]);else o(t,n,r)}function o(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}return i.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},i._={group:function(e){for(var t,n="",r=i._.trigger(e.min,e);r<=i._.trigger(e.max,e,[r]);r+=e.i)t=i._.trigger(e.item,e,[r]),n+=i._.node(e.node,t[0],t[1],t[2]);return n},node:function(t,n,r,i){return n?(n=e.isArray(n)?n.join(""):n,"<"+t+(r=r?' class="'+r+'"':"")+(i=i?" "+i:"")+">"+n+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getUTCDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:function(t,n){e.isPlainObject(t)||(t={attribute:n});for(var r in n="",t){var i=("role"==r?"":"aria-")+r,a=t[r];n+=null==a?"":i+'="'+t[r]+'"'}return n}},i.extend=function(t,n){e.fn[t]=function(r,a){var s=this.data(t);return"picker"==r?s:s&&"string"==typeof r?i._.trigger(s[r],s,[a]):this.each(function(){e(this).data(t)||new i(this,t,n,r)})},e.fn[t].defaults=n.defaults},i})},function(e,t,n){"use strict";var r=n(7),i=n(41),a={update:function(e){r.dispatch({actionType:i.APP_STATE_UPDATE,updates:e})},reset:function(){r.dispatch({actionType:i.APP_STATE_RESET})}};e.exports=a},function(e,t,n){"use strict";n(0);var r=n(3),i=n(39),a=n(38),s=n(10).run;function o(e){return"funnel"!==e.query.analysis_type}e.exports={analysis_type:{msg:"Choose an Analysis Type.",validate:function(e){return"string"==typeof e.query.analysis_type&&e.query.analysis_type.length>0}},event_collection:{msg:"Choose an Event Collection.",shouldRun:o,validate:function(e){return"string"==typeof e.query.event_collection&&e.query.event_collection.length>0}},target_property:{msg:"Choose a Target Property.",shouldRun:function(e){return r.shouldHaveTarget(e)},validate:function(e){return"string"==typeof e.query.target_property&&e.query.target_property.length>0}},percentile_value:{msg:"Choose a Percentile Value.",shouldRun:function(e){return"percentile"===e.query.analysis_type},validate:function(e){return null!==e.query.percentile&&""!==e.query.percentile&&"number"==typeof e.query.percentile}},filters:{shouldRun:o,msg:"One of your filters is invalid.",validate:function(e){return i.filters(e.query.filters)}},steps:{msg:"One of your funnel steps is invalid.",shouldRun:function(e){return"funnel"===e.query.analysis_type},validate:function(e){if(!e.query.steps)return!1;for(var t=!0,n=0;n<e.query.steps.length;n++)s(a,e.query.steps[n]),e.query.steps[n].isValid||(t=!1);return t}},time:{shouldRun:o,validate:function(e){return i.time(e.query.time)}},query_name:{msg:"You must give your saved query a name.",shouldRun:function(e){return e.saving},validate:function(e){var t=e.query_name;return null!==t&&void 0!==t&&"string"==typeof t&&t.length>0}},refresh_rate:{msg:"Refresh rate must be between 4 and 24 hours.",validate:function(e){var t=e.refresh_rate;return"number"!=typeof t||t>=1440&&t<=86400||0==t}},email:{msg:"A valid email address is required.",shouldRun:r.isEmailExtraction,validate:function(e){return new RegExp(/.+@.+\..+/i).test(e.query.email)}},latest:{msg:"Latest must be a number.",shouldRun:r.isEmailExtraction,validate:function(e){var t=e.query.latest;if(!t)return!0;var n=~~Number(t);return String(n)===t&&n>=0}}}},function(e,t,n){"use strict";var r=n(0);e.exports={getQueryDataType:function(e){var t,n="string"==typeof e.interval,r="string"==typeof e.group_by||e.group_by instanceof Array&&1===e.group_by.length,i=e.group_by instanceof Array&&2===e.group_by.length;return"funnel"===e.analysis_type?t="cat-ordinal":"extraction"===e.analysis_type?t="extraction":"select_unique"===e.analysis_type?t="nominal":r||n||i?r&&!n?t="categorical":!n||r||i?n&&(r||i)?t="cat-chronological":!n&&i&&(t="categorical"):t="chronological":t="singular",t},getChartTypeOptions:function(t){return{singular:["metric"],categorical:["piechart","barchart","columnchart","table"],"cat-interval":["columnchart","barchart","table"],"cat-ordinal":["barchart","columnchart","areachart","linechart","table"],chronological:["areachart","linechart","table"],"cat-chronological":["linechart","columnchart","barchart","areachart","table"],nominal:["table"],extraction:["table"]}[e.exports.getQueryDataType(t)].concat(["JSON"])},responseSupportsChartType:function(t,n){return r.includes(e.exports.getChartTypeOptions(t),n)},isTableChartType:function(e){return"table"==e}}},function(e,t,n){"use strict";var r=n(1),i=n(0);function a(e){return e&&!i.isEmpty(e)}var s=r.createClass({displayName:"NoticeComponent",close:function(e){e.preventDefault(),this.setState({open:!1}),this.props.closeCallback()},getDefaultProps:function(){return{notice:{},closeCallback:function(){},closable:!0}},getInitialState:function(){return{open:a(this.props.notice)}},componentWillReceiveProps:function(e){this.setState({open:a(e.notice)})},render:function(){var e,t,n="notice-component alert";if(this.state.open||(n+=" hide"),this.props.notice.type){var i=this.props.notice.type;"error"===i&&(i="danger"),n+=" alert-"+i}else n+=" alert-info";return this.props.notice.icon&&(e=r.createElement("span",{className:"icon glyphicon glyphicon-"+this.props.notice.icon})),this.props.closable&&(t=r.createElement("button",{className:"close",onClick:this.close},"×")),r.createElement("div",{className:n,key:"notice",ref:"notice"},t,r.createElement("p",null,e," ",r.createElement("strong",null,this.props.notice.text||"")))}});e.exports=s},function(e,t,n){"use strict";var r=n(0),i=n(7),a=n(43),s=n(16),o=(n(5),n(3)),l=n(2),c={create:function(e){i.dispatch({actionType:a.PROJECT_CREATE,attrs:e})},update:function(e,t){var n=s.getProject();i.dispatch({actionType:a.PROJECT_UPDATE,id:n.id,updates:t})},fetchProjectCollections:function(e){var t=s.getProject();return t||console.error("Cannot fetchProjectCollections: No project model has been created yet."),e.get(e.url("projectId")).auth(e.masterKey()).send().then(function(e){var n=r.assign({},t.schema);r.each(e.events,function(e){n[e.name]=r.assign(e,{properties:{},sortedProperties:[],loading:!1,recentEvents:null})}),c.update(t.id,{schema:n,eventCollections:l.sortItems(r.keys(n)),loading:!1})}).catch(function(e){console.error("Error fetching project collections: ",e.stack)})},fetchCollectionSchema:function(e,t){return!(s.getProject().eventCollections.indexOf(t)<0)&&(c.updateEventCollection(t,{loading:!0}),e.get(e.url("events",encodeURIComponent(t))).auth(e.masterKey()).send().then(function(e){c.updateEventCollection(t,{properties:e.properties,sortedProperties:l.sortItems(r.keys(e.properties)),loading:!1})}).catch(function(e){console.error("Error fetching project collections: ",e.stack)}))},updateEventCollection:function(e,t){var n=s.getProject();i.dispatch({actionType:a.PROJECT_UPDATE_EVENT_COLLECTION,id:n.id,collectionName:e,updates:t})},fetchRecentEventsForCollection:function(e,t){s.getProject();c.updateEventCollection(t,{loading:!0}),o.runQuery({client:e,query:{event_collection:t,analysis_type:"extraction",latest:10},success:function(e){c.updateEventCollection(t,{recentEvents:e.result})},error:function(e){console.error("Error requesting latest events for event collection: "+t,e.stack)},complete:function(){c.updateEventCollection(t,{loading:!1})}})}};e.exports=c},function(e,t,n){"use strict";var r=n(1),i=(n(0),r.createClass({displayName:"LoaderComponent",toggle:function(e){this.props.visible=e,this.forceUpdate()},getDefaultProps:function(){return{visible:!1,additionalClasses:!1}},render:function(){var e="explorer-loader";return this.props.visible||(e+=" hide"),this.props.additionalClasses&&(e+=" "+this.props.additionalClasses),r.createElement("div",{className:e},r.createElement("div",{className:"msg"},r.createElement("div",{className:"explorer-spinner"},r.createElement("div",{className:"rect1"}),r.createElement("div",{className:"rect2"}),r.createElement("div",{className:"rect3"}),r.createElement("div",{className:"rect4"}),r.createElement("div",{className:"rect5"})),"Loading..."))}}));e.exports=i},function(e,t,n){"use strict";var r=n(0),i=(n(10).run,n(2));function a(e){return"Geo"===e.coercion_type}e.exports={property_name:{msg:"Choose a property name",validate:function(e){return"string"==typeof e.property_name&&e.property_name.length>0}},operator:{msg:"Choose an operator",validate:function(e){return"string"==typeof e.operator&&e.operator.length>0}},property_value:{msg:"Choose a property value.",shouldRun:function(e){return!a(e)},validate:function(e){var t=e.property_value,n=e.coercion_type;return"List"==n?!!i.parseList(t):"Null"===n||"Boolean"===n||("Number"===n?r.isNumber(t):"String"===n||!!t)}},coercion_type:{msg:"Choose a coercion type",validate:function(e){return"string"==typeof e.coercion_type&&e.coercion_type.length>0}},coordinates:{msg:"Provide all coordinates.",shouldRun:a,validate:function(e){var t=e.property_value.coordinates,n=r.isArray(t)&&2===t.length;if(!n)return n;for(var i=0;i<t.length&&n;i++)n=r.isNumber(t[i]);return n}},max_distance_miles:{msg:"Provide a max distance in miles.",shouldRun:a,validate:function(e){var t=e.property_value.max_distance_miles;return t&&r.isNumber(t)}}}},function(e,t,n){"use strict";var r=n(45),i=n(0);e.exports={getSearchString:function(){return window.location.search},updateSearchString:function(e){var t;t=i.keys(e).length?"?"+r.stringify(e):window.location.origin+window.location.pathname,window.history.pushState({model:e},"",t)},getQueryAttributes:function(){return r.parse(this.getSearchString().replace("?",""),{depth:7})}}},function(e,t,n){"use strict";var r=n(0),i=n(1),a=n(54),s=n(40),o=n(5),l=n(8),c=i.createClass({displayName:"FilterManager",propTypes:{eventCollection:i.PropTypes.string,propertyNames:i.PropTypes.array,filters:i.PropTypes.array,addFilter:i.PropTypes.func.isRequired,removeFilter:i.PropTypes.func.isRequired,handleChange:i.PropTypes.func.isRequired,getPropertyType:i.PropTypes.func.isRequired},open:function(){this.refs.modal.open()},addFilter:function(e){e.preventDefault(),this.props.addFilter()},removeFilter:function(e){this.props.removeFilter(e)},handleChange:function(e,t,n){var i=r.cloneDeep(this.props.filters[e]);if(r.isNull(t.match("coordinates")))"max_distance_miles"===t&&"Geo"===i.coercion_type?i.property_value[t]=l.coerceGeoValue(n):i[t]=n;else{var a=parseInt(t.split(".")[1]);i.property_value.coordinates[a]=l.coerceGeoValue(n)}this.props.handleChange(e,i)},buildFilterNodes:function(){var e=this.props.filters.map(function(e,t){return i.createElement(a,{key:t,index:t,filter:e,propertyType:this.props.getPropertyType(this.props.eventCollection,e.property_name),eventCollection:this.props.eventCollection,propertyNames:this.props.propertyNames,handleChange:this.handleChange,removeFilter:this.removeFilter,filterOperators:o.getConstant("FILTER_OPERATORS")})}.bind(this));return i.createElement("div",null,e,i.createElement("div",{className:"filter-buttons"},i.createElement("a",{href:"#",className:"add-filter btn btn-primary",onClick:this.addFilter},i.createElement("i",{className:"icon glyphicon glyphicon-plus margin-right-tiny"}),"Add another filter")))},noFiltersMarkup:function(){return i.createElement("div",{className:"row"},i.createElement("div",{className:"col-md-10 col-md-offset-1"},i.createElement("div",{className:"no-filters-msg callout"},i.createElement("p",{className:"lead"},i.createElement("i",{className:"icon glyphicon glyphicon-info-sign margin-right-tiny"}),"Please select an Event Collection before making a filter."))))},render:function(){var e=this.props.eventCollection?this.buildFilterNodes():this.noFiltersMarkup();return i.createElement(s,{ref:"modal",title:"Filters",size:"large",onClose:this.modalClosed,modalClasses:"filters-modal",footerBtns:[{text:"Done",classes:"btn-success",iconName:"ok-circle"}]},i.createElement("div",{className:"filters"},e))}});e.exports=c},function(e,t,n){n(0);var r=n(1),i=n(11),a=["12:00 AM","12:15 AM","12:30 AM","12:45 AM","01:00 AM","01:15 AM","01:30 AM","01:45 AM","02:00 AM","02:15 AM","02:30 AM","02:45 AM","03:00 AM","03:15 AM","03:30 AM","03:45 AM","04:00 AM","04:15 AM","04:30 AM","04:45 AM","05:00 AM","05:15 AM","05:30 AM","05:45 AM","06:00 AM","06:15 AM","06:30 AM","06:45 AM","07:00 AM","07:15 AM","07:30 AM","07:45 AM","08:00 AM","08:15 AM","08:30 AM","08:45 AM","09:00 AM","09:15 AM","09:30 AM","09:45 AM","10:00 AM","10:15 AM","10:30 AM","10:45 AM","11:00 AM","11:15 AM","11:30 AM","11:45 AM","12:00 PM","12:15 PM","12:30 PM","12:45 PM","01:00 PM","01:15 PM","01:30 PM","01:45 PM","02:00 PM","02:15 PM","02:30 PM","02:45 PM","03:00 PM","03:15 PM","03:30 PM","03:45 PM","04:00 PM","04:15 PM","04:30 PM","04:45 PM","05:00 PM","05:15 PM","05:30 PM","05:45 PM","06:00 PM","06:15 PM","06:30 PM","06:45 PM","07:00 PM","07:15 PM","07:30 PM","07:45 PM","08:00 PM","08:15 PM","08:30 PM","08:45 PM","09:00 PM","09:15 PM","09:30 PM","09:45 PM","10:00 PM","10:15 PM","10:30 PM","10:45 PM","11:00 PM","11:15 PM","11:30 PM","11:45 PM"];function s(e,t){t||(t=new Date);var n=e.match(/(\d+)(?::(\d\d))?\s*(p?)/i);if(!n)return NaN;var r=parseInt(n[1],10);return 12!=r||n[3]?r+=r<12&&n[3]?12:0:r=0,t.setHours(r),t.setMinutes(parseInt(n[2],10)||0),t.setSeconds(0,0),t}var o=r.createClass({displayName:"Timepicker",validateTime:function(e){return s(e)instanceof Date?(this.setState({errorMsg:!1}),!0):(this.setState({errorMsg:"Invalid time"}),!1)},handleBlur:function(e){this.validateTime(e.target.value)&&this.props.handleBlur(e.target.name,s(e.target.value).getTime())},handleSelection:function(e,t){this.validateTime(t)&&this.props.handleSelection(e,s(t).getTime())},handleChange:function(e,t){this.setState({value:t}),this.props.handleChange(e,t)},getInitialState:function(){return{errorMsg:!1,value:this.props.value}},getDefaultProps:function(){return{refValue:"timepicker",label:!1,handleBlur:function(){},handleChange:function(){},handleSelection:function(){},placeholder:"",classes:"timepicker-wrapper form-group"}},componentWillReceiveProps:function(e){e.value!=this.state.value&&this.setState({value:e.value})},render:function(){var e=this.props.label?r.createElement("label",{htmlFor:this.props.name},this.props.label):null,t=this.state.errorMsg?r.createElement("p",null,this.state.errorMsg):null;return r.createElement("div",{className:this.props.classes},e,r.createElement(i,{ref:this.props.refValue,name:this.props.name,inputClasses:"form-control",items:a,handleBlur:this.handleBlur,handleChange:this.handleChange,handleSelection:this.handleSelection,value:this.state.value,title:this.props.name,sort:!0}),t)}});e.exports=o},function(e,t,n){var r=n(0),i=n(1),a=n(9),s=(n(23),n(58),n(57),i.createClass({displayName:"Datepicker",handleOnBlur:function(e){this.destroyPicker();var t=e.target.value,n=a(new Date(t)).isValid();n?(this.props.onBlur(e),this.setState({errorMsg:!1})):t&&!n&&this.setState({errorMsg:"Invalid"})},onFocus:function(){var e=this.props.minimum;$(this.refs[this.props.refValue]).pickadate({format:"mmm d, yyyy",editable:!0,min:e,onSet:r.bind(function(e){this.props.onSet(this.props.name,new Date(this.refs.datepicker.value))},this)})},destroyPicker:function(){var e=$(this.refs[this.props.refValue]).pickadate("picker");e&&e.stop()},getInitialState:function(){return{errorMsg:!1}},getDefaultProps:function(){return{refValue:"datepicker",label:!1,onChange:function(){},placeholder:"",classes:"datepicker-wrapper form-group",onSet:function(){}}},render:function(){var e=this.props.label?i.createElement("label",{htmlFor:this.props.name},this.props.label):null,t=this.state.errorMsg?i.createElement("p",null,this.state.errorMsg):"";return i.createElement("div",{className:this.props.classes},e,i.createElement("input",{type:"text",ref:this.props.refValue,name:this.props.name,className:"form-control",value:this.props.value,onChange:this.props.onChange,onBlur:this.handleOnBlur,onFocus:this.onFocus,placeholder:this.props.placeholder,autoComplete:"off"}),t)}}));e.exports=s},function(e,t,n){"use strict";n(0);var r=n(9),i=n(1),a=n(59),s=n(56),o=(n(14),n(11),n(55)),l=(n(4),n(17)),c=n(5);var p=i.createClass({displayName:"Timeframe",toggleTimeframeType:function(e){e.preventDefault();var t=e.currentTarget.dataset.type;this.props.handleChange("time","absolute"===t?{start:new Date(r().subtract(1,"days").startOf("day").format()),end:new Date(r().startOf("day").format())}:{relativity:"this",amount:"14",sub_timeframe:"days"})},isAbsolute:function(){return"absolute"===l.timeframeType(this.props.time)},isRelative:function(){return"relative"===l.timeframeType(this.props.time)},render:function(){this.props.timezone||c.getConstant("DEFAULT_TIMEZONE");if(this.isAbsolute())var e=i.createElement(a,{time:this.props.time,handleChange:this.props.handleChange});else e=i.createElement(s,{relativeIntervalTypes:c.getConstant("RELATIVE_INTERVAL_TYPES"),time:this.props.time,handleChange:this.props.handleChange});return i.createElement("div",{className:"timeframe"},i.createElement("div",{className:"field-component"},i.createElement("label",null,"Timeframe"),i.createElement("ul",{className:"nav nav-pills",role:"tablist"},i.createElement("li",{className:this.isRelative()?"active":""},i.createElement("a",{href:"#",className:"relative-tab","data-type":"relative",onClick:this.toggleTimeframeType},"Relative")),i.createElement("li",{className:this.isAbsolute()?"active":""},i.createElement("a",{href:"#",className:"absolute-tab","data-type":"absolute",onClick:this.toggleTimeframeType},"Absolute"))),e,i.createElement(o,{timezone:this.props.timezone,timeframe_type:l.timeframeType(this.props.time),handleChange:this.props.handleChange})))}});e.exports=p},function(e,t,n){"use strict";var r=n(1),i=(n(0),n(11)),a=r.createClass({displayName:"SelectField",getDefaultProps:function(){return{sort:!1,inputClasses:[]}},buildBrowseEventsLink:function(){if(this.props.onBrowseEvents)return r.createElement("button",{className:"btn btn-link field-secondary-control",title:"Browse event collections",type:"button",onClick:this.props.onBrowseEvents,id:"browse-event-collections"},r.createElement("span",{className:"icon glyphicon glyphicon-search"})," Preview collections")},render:function(){var e=this.props.requiredLabel?r.createElement("small",null,"(required)"):null;return r.createElement("div",{className:"field-component"},r.createElement("label",{htmlFor:this.props.name},this.props.label," ",e),r.createElement(i,{ref:"select",name:this.props.name,inputClasses:this.props.inputClasses.join(" ")+" form-control",items:this.props.options,handleChange:this.props.handleChange,value:this.props.value,sort:this.props.sort}),this.buildBrowseEventsLink())}});e.exports=a},function(e,t,n){"use strict";var r=n(20);e.exports=r({NOTICE_CREATE:null,NOTICE_CLEAR_ALL:null})},function(e,t,n){"use strict";n(0);var r=n(2),i=n(39);e.exports={event_collection:{msg:"Choose an Event Collection.",validate:function(e){return"string"==typeof e.event_collection&&e.event_collection.length>0}},actor_property:{msg:"You must select an actor property",validate:function(e){return"string"==typeof e.actor_property&&e.actor_property.length>0}},time:{validate:function(e){return i.time(e.time)}},filters:{msg:"One of your filters is invalid.",validate:function(e){return i.filters(e.filters)}},optional:{msg:"You must select whether this step is optional.",validate:function(e){return!r.isNullOrUndefined(e.optional)&&"boolean"==typeof e.optional}},inverted:{msg:"You must select whether this step is inverted.",validate:function(e){return!r.isNullOrUndefined(e.inverted)&&"boolean"==typeof e.inverted}},with_actors:{msg:'"with_actors" must be set to either true or false',validate:function(e){return!r.isNullOrUndefined(e.with_actors)&&"boolean"==typeof e.with_actors}}}},function(e,t,n){"use strict";var r=n(0),i=n(10).run,a=n(30),s=n(17),o=n(8);e.exports={filters:function(e){if(!e||r.isArray(e)&&!e.length)return!0;for(var t=!0,n=0;n<e.length;n++)o.isComplete(e[n])&&(i(a,e[n]),e[n].isValid||(t=!1));return t},time:function(e){return e?"relative"===s.timeframeType(e)?!!(e.relativity&&e.amount&&e.sub_timeframe)||"You must choose all 3 options for relative timeframes.":"absolute"===s.timeframeType(e)?!(!e.start||!e.end)||"You must provide a start and end time for absolute timeframes.":"You must provide a timeframe.":"You must provide a timeframe."}}},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(6),s=r.createClass({displayName:"Modal",closeClick:function(e){e.preventDefault(),this.close()},backdropClick:function(e){$(e.target).closest(".modal-dialog").length||this.close()},close:function(){this.state.open&&(this.removeBackdrop(),this.setState({open:!1}),this.props.onClose())},open:function(){this.state.open||(this.addBackdrop(),this.setState({open:!0}),this.props.onOpen())},setLoading:function(e){"boolean"==typeof e&&this.setState({loading:e})},addBackdrop:function(){$("body").addClass("modal-open");var e=document.createElement("div");e.id="modal-backdrop",e.className="modal-backdrop in",document.body.appendChild(e)},removeBackdrop:function(){$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},buildFooter:function(){if(this.props.footerBtns.length){var e=i.map(this.props.footerBtns,i.bind(function(e,t){var n=e.text,i="btn";if(e.classes?i=i+" "+e.classes:i+=" btn-default",e.iconName)var a="icon glyphicon glyphicon-"+e.iconName,s=r.createElement("span",{className:a});return r.createElement("button",{type:"button",ref:e.ref||"",className:i,onClick:e.onClick||this.close,key:t},s,n)},this));return r.createElement("div",{className:"modal-footer"},e)}},getInitialState:function(){return{open:!1,loading:!1}},getDefaultProps:function(){return{size:"small",modalClasses:"",footerBtns:[],onOpen:function(){},onClose:function(){}}},componentDidMount:function(){$(document).on("click",".modal.block",i.bind(this.backdropClick,this)),$(document).on("keyup",i.bind(function(e){27===e.keyCode&&e.target.className.indexOf("react-select-input")<0&&this.close()},this))},componentWillUnmount:function(){$(document).off("click",".modal-backdrop")},render:function(){var e=this.props.modalClasses+" modal";this.state.open&&(e+=" block");var t,n=a({"modal-dialog":!0,"modal-lg":"large"===this.props.size});if(this.props.titleIcon){var i="icon glyphicon glyphicon-"+this.props.titleIcon;this.props.title||(i+=" big no-margin"),this.props.iconClasses&&(i=i+" "+this.props.iconClasses),t=r.createElement("span",{className:i})}return r.createElement("div",{className:e},r.createElement("div",{className:n},r.createElement("div",{className:"modal-content"},r.createElement("div",{className:"modal-header"},r.createElement("button",{type:"button",className:"close",onClick:this.closeClick},r.createElement("span",{"aria-hidden":"true"},"×"),r.createElement("span",{className:"sr-only"},"Close")),r.createElement("h3",{className:"modal-title"},t,this.props.title)),r.createElement("div",{className:"modal-body"},this.props.children),this.buildFooter())))}});e.exports=s},function(e,t,n){"use strict";var r=n(20);e.exports=r({APP_STATE_UPDATE:null,APP_STATE_RESET:null})},function(e,t,n){"use strict";var r=n(0),i=n(7),a=n(21).EventEmitter,s=n(41);var o={fetchingPersistedExplorers:!1,codeSampleHidden:!0,ready:!1};function l(){o={fetchingPersistedExplorers:!1,codeSampleHidden:!0,ready:!1}}var c=r.assign({},a.prototype,{unregisterWithDispatcher:function(){i.unregister(this.dispatchToken)},getState:function(){return o},reset:function(){l()},emitChange:function(){this.emit("change")},addChangeListener:function(e){this.on("change",e)},removeChangeListener:function(e){this.removeListener("change",e)}});c.dispatchToken=i.register(function(e){switch(e.actionType){case s.APP_STATE_UPDATE:t=e.updates,o=r.assign({},o,t),c.emitChange();break;case s.APP_STATE_RESET:l(),c.emitChange()}var t;return!0}),e.exports=c},function(e,t,n){"use strict";var r=n(20);e.exports=r({PROJECT_CREATE:null,PROJECT_UPDATE:null,PROJECT_UPDATE_EVENT_COLLECTION:null})},function(e,t){e.exports=s},function(e,t){e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(7),a=n(21).EventEmitter,s=n(37),o=n(19),l=n(12),c={};function p(e){e.location&&"global"!==e.location||r.each(c,function(e,t){"global"===e.location&&delete c[t]});var t="TEMP-"+(+new Date+Math.floor(999999*Math.random())).toString(36);c[t]=r.assign({location:"global",text:null,type:null},e)}function u(){c={}}var h=r.assign({},a.prototype,{unregisterWithDispatcher:function(){i.unregister(this.dispatchToken)},getGlobalNotice:function(){return r.find(c,{location:"global"})},getStepNotices:function(){return r.filter(c,function(e){if("step"===e.location)return e})},clearAll:function(){u()},emitChange:function(){this.emit("change")},addChangeListener:function(e){this.on("change",e)},removeChangeListener:function(e){this.removeListener("change",e)}});h.dispatchToken=i.register(function(e){switch(i.waitFor([l.dispatchToken]),e.actionType){case s.NOTICE_CREATE:p(e.attrs),h.emitChange();break;case s.NOTICE_CLEAR_ALL:u(),h.emitChange();break;case o.EXPLORER_SAVING:p({type:"info",text:n="save"===e.saveType?"Saving query...":"Updating query...",icon:"info-sign"}),h.emitChange();break;case o.EXPLORER_SAVE_SUCCESS:p({type:"success",text:(n="save"===e.saveType?"Query saved":"Query updated")+".",icon:"ok"}),h.emitChange();break;case o.EXPLORER_SAVE_FAIL:var t,n="save"===e.saveType?"saving":"updating";e.errorMsg?t="Problem "+n+": "+e.errorMsg:e.errorResp&&"OverCachedQueryLimitError"===JSON.parse(e.errorResp.text).error_code?t="Oops! Looks like you’ve reached your caching limit. Need more cached queries? Contact us at team@keen.io":e.errorResp&&(t="Problem "+n+": "+JSON.parse(e.errorResp.text).message),p({type:"error",text:t,icon:"remove-sign"}),h.emitChange();break;case o.EXPLORER_DESTROYING:p({type:"info",text:"Deleting query...",icon:"info-sign"}),h.emitChange();break;case o.EXPLORER_DESTROY_SUCCESS:p({type:"success",text:"Query deleted.",icon:"ok"}),h.emitChange();break;case o.EXPLORER_DESTROY_FAIL:p({type:"error",text:"There was a problem deleting your query: "+e.errorMsg,icon:"remove-sign"}),h.emitChange();break;case o.EXPLORER_FOUND_INVALID:var a=l.get(e.id);p({text:"There was a problem: "+a.errors[0].msg,type:"error",icon:"remove-sign"}),"funnel"===a.query.analysis_type&&(r.each(c,function(e,t){"step"===e.location&&delete c[t]}),a.query.steps.forEach(function(e,t){e.isValid||p({id:a.id,location:"step",stepIndex:t,text:e.errors[0].msg,type:"error",icon:"remove-sign"})})),h.emitChange()}return!0}),e.exports=h},function(e,t,n){"use strict";var r=n(1),i=n(6),a=(n(0),n(3)),s=r.createClass({displayName:"QueryActions",runBtnStates:{default:{inactive:"Run Query",active:"Running..."},immediateExtraction:{inactive:"Run Extraction",active:"Running..."},emailExtraction:{inactive:"Send Email Extraction",active:"Sending..."}},runButtonText:function(){var e=this.runBtnStates.default;return a.isEmailExtraction(this.props.model)?e=this.runBtnStates.emailExtraction:a.isImmediateExtraction(this.props.model)&&(e=this.runBtnStates.immediateExtraction),this.props.model.loading?e.active:e.inactive},render:function(){var e,t,n,s,o=!0,l=i({disabled:this.props.model.loading,"btn btn-primary run-query":!0}),c=i({"btn btn-default code-sample-toggle pull-right":!0,open:!this.props.codeSampleHidden}),p=a.isEmailExtraction(this.props.model),u=a.isPersisted(this.props.model);this.props.model.query.analysis_type;return this.props.persistence&&(p&&(o=!1,e=r.createElement("p",{className:"no-margin margin-top-tiny"},r.createElement("small",null,"The Keen IO API currently does not support saving email extraction."))),t=r.createElement("button",{type:"button",className:"btn btn-success save-query",onClick:o?this.props.saveQueryClick:function(){},role:"save-query",disabled:this.props.model.loading||!o},u?"Update":"Save"),s=r.createElement("button",{type:"button",role:"delete-query",className:"btn btn-link",onClick:o?this.props.removeClick:function(){},disabled:!o},"Delete"),u&&(n=r.createElement("button",{type:"button",className:"btn btn-default",onClick:o?this.props.cloneQueryClick:function(){},role:"clone-query",disabled:this.props.model.loading||!o},"Clone"))),r.createElement("div",{className:"query-actions clearfix"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-10 clearfix"},r.createElement("div",{className:"run-group pull-left"},r.createElement("button",{type:"submit",role:"run-query",className:l,id:"run-query",onClick:this.props.handleQuerySubmit},this.runButtonText())),r.createElement("div",{className:"manage-group pull-left"},t,n,s)),r.createElement("div",{className:"col-md-2"},r.createElement("button",{className:c,role:"toggle-code-sample",onClick:this.props.toggleCodeSample},r.createElement("span",null,"</> Embed")))),e)}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(6),s=n(9),o=n(4),l=r.createClass({displayName:"CacheToggle",setCached:function(e){var t=i.clone(this.props.model);this._isCached()?t.refresh_rate=0:t.refresh_rate=14400,o.update(this.props.model.id,t),this.setState({settingsOpen:0!=t.refresh_rate&&this.state.settingsOpen})},setSettingsOpen:function(e){e.preventDefault(),this.setState({settingsOpen:!this.state.settingsOpen})},setRefreshRate:function(e){this.setState({refresh_rate:e.target.value})},setRefreshRateBlur:function(e){var t=Math.round(3600*e.target.value),n=i.clone(this.props.model);n.refresh_rate=t,o.update(this.props.model.id,n),this.forceUpdate()},getInitialState:function(){return{refresh_rate:this._refreshRateInHours(this.props.model),cached:!1,settingsOpen:!1}},componentWillReceiveProps:function(e){this.setState({refresh_rate:this._refreshRateInHours(e.model)})},render:function(){var e=this._isCached(),t=a({"cache-toggle":!0,inactive:!e}),n=a({"cache-details":!0,hide:!e}),i=a({"cache-settings":!0,hide:!this.state.settingsOpen}),s=e?"Caching enabled":"Enable caching";return r.createElement("div",{className:t},r.createElement("label",{htmlFor:"cache"},r.createElement("input",{type:"checkbox",name:"cache",id:"cache",onChange:this.setCached,checked:e}),s,r.createElement("a",{href:"https://keen.io/docs/api/#saved-queries",target:"_blank"},r.createElement("i",{className:"icon glyphicon glyphicon-question-sign"}))),r.createElement("span",{className:n},this._minutesAgo(),r.createElement("a",{href:"#",onClick:this.setSettingsOpen,className:"margin-left-tiny"},r.createElement("span",{className:"icon icon-cog glyphicon-cog glyphicon"}))),r.createElement("span",{className:i},"Refresh every ",r.createElement("input",{type:"text",name:"refresh_rate",value:this.state.refresh_rate,className:"form-control",onChange:this.setRefreshRate,onBlur:this.setRefreshRateBlur})," hours (","min 4 / max 24",")"))},_isCached:function(){return 0!=this.props.model.refresh_rate},_minutesAgo:function(){var e=this.props.model.run_information;if(null!=e&&200==e.last_run_status){var t=s(e.last_run_date).utcOffset(0);return"Last updated "+s.duration(t.diff(s())).humanize()+" ago."}},_refreshRateInHours:function(e){return e.refresh_rate/3600*100/100}});e.exports=l},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(9);var s=r.createClass({displayName:"BrowseQueries",clickCallback:function(e){this.props.clickCallback(e)},buildList:function(){var e=this.props.listItems.map(i.bind(function(e,t){var n,i;this.props.selectedIndex===t&&(n="active");var s=function(e){if(e.created_date){var t=a(new Date(e.created_date.replace(" ","T")));return t.isValid()?t.format("ll h:mm A"):null}}(e);s&&(i=r.createElement("p",{className:"date pull-right"},r.createElement("span",{className:"icon glyphicon glyphicon-time"}),s));var o=e.refresh_rate>0?"Cached":"",l=null;return l=e.metadata&&e.metadata.display_name?e.metadata.display_name:e.query_name?e.query_name:"Query not named",r.createElement("li",{className:n,key:t,"data-id":e.id,onClick:this.clickCallback},r.createElement("h5",{className:"name"},l),r.createElement("div",{className:"metadata clearfix"},r.createElement("p",{className:"date pull-left"},o),i))},this));return r.createElement("ul",{ref:"list",className:"interactive-list"},e)},fieldChanged:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)},getDefaultProps:function(){return{listItems:[],clickCallback:null,selectedIndex:null,notice:null,emptyContent:null}},render:function(){var e=this.props.listItems.length?null:this.props.emptyContent,t=this.buildList();return r.createElement("section",{className:"query-pane-section browse-queries"},this.props.notice,t,e)}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=r.createClass({displayName:"ApiUrl",getInitialState:function(){return{active:!1}},handleClick:function(){var e=this;e.setState({active:!e.state.active}),e.state.active||setTimeout(function(){e.refs.input.focus()},50)},handleInputSelect:function(e){e.target.setSelectionRange(0,9999)},handleInputChange:function(e){e.preventDefault()},render:function(){return r.createElement("div",{className:"explorer-api-url"},r.createElement("button",{className:"btn btn-link field-secondary-control",title:"API URL",type:"button",onClick:this.handleClick},r.createElement("span",{className:"icon glyphicon glyphicon-chevron-"+(this.state.active?"down":"right")+" icon-chevron-"+(this.state.active?"down":"right")})," API Query URL"),r.createElement("div",{className:this.state.active?"show":"hide"},r.createElement("input",{ref:"input",name:"api-query",className:"form-control input-sm",placeholder:"API Query URL will appear here...",value:this.props.isValid?this.props.url:"",onClick:this.handleInputSelect,onFocus:this.handleInputSelect,onChange:this.handleInputChange})))}});e.exports=i},function(e,t,n){"use strict";n(0),n(9);var r=n(1),i=n(15),a=n(14),s=(n(4),n(3),n(5)),o=r.createClass({displayName:"Interval",setInterval:function(e){this.props.handleChange("interval",e.target.value)},intervalFieldsToggled:function(e){e&&!this.props.interval&&this.props.handleChange("interval","daily")},intervalUpdateFn:function(e){this.props.handleChange("interval",e.interval)},intervalGetFn:function(e){if("interval"===e)return this.props.interval;throw new Error("Interval component is only aware of interval attributes")},render:function(){return r.createElement("div",{className:"field-component"},r.createElement(a,{ref:"interval-toggle",name:"Interval",initialOpenState:this.props.interval,attrsToStore:"interval",getFn:this.intervalGetFn,updateFn:this.intervalUpdateFn,toggleCallback:this.intervalFieldsToggled},r.createElement(i,{label:!1,name:"interval",classes:"interval-type",options:s.getConstant("ABSOLUTE_INTERVAL_TYPES"),emptyOption:!1,handleSelection:this.setInterval,selectedOption:this.props.interval,sort:!1})))}});e.exports=o},function(e,t,n){"use strict";n(0);var r=n(1),i=r.createClass({displayName:"Geo",render:function(){return r.createElement("div",null,r.createElement("div",{className:"col-md-12"},r.createElement("label",{htmlFor:"amount"},"Longitude"),r.createElement("input",{type:"text",name:"coordinates.0",className:"form-control",value:this.props.filter.property_value.coordinates[0]||"",onChange:this.props.handleChange,autoComplete:"off"})),r.createElement("div",{className:"col-md-12"},r.createElement("label",{htmlFor:"amount"},"Latitude"),r.createElement("input",{type:"text",name:"coordinates.1",className:"form-control",value:this.props.filter.property_value.coordinates[1]||"",onChange:this.props.handleChange,autoComplete:"off"})),r.createElement("div",{className:"col-md-12"},r.createElement("label",{htmlFor:"amount"},"Radius in Miles"),r.createElement("input",{type:"text",name:"max_distance_miles",className:"form-control",value:this.props.filter.property_value.max_distance_miles||"",onChange:this.props.handleChange,autoComplete:"off"})))}});e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(9),a=n(1),s=n(15),o=n(34),l=n(33),c=n(52),p=n(2),u=(n(8),"ll"),h="h:mm A";function d(e,t){var n=i(new Date(e)).format(u),r=i(new Date(t)).format(h);return new Date(n+" "+r).toString()}var m=a.createClass({displayName:"FilterValueFields",handleChangeWithEvent:function(e){this.props.handleChange(e.target.name,e.target.value)},setValueState:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)},setDate:function(e,t){this.props.handleChange(e,d(t,this.props.filter.property_value))},setTime:function(e,t){this.props.handleChange(e,d(this.props.filter.property_value,t))},handleDateBlur:function(e){this.setDate(e.target.name,e.target.value)},handleChange:function(e){this.props.handleChange(e.target.name,e.target.value)},getCoercionOptions:function(){var e=this.props.filter.operator;return e?r.find(this.props.filterOperators,{value:e}).canBeCoeredTo:[]},getInputPlaceholder:function(){var e=this.props.filter.coercion_type;return"List"===e?"Comma sep list":e},getInitialState:function(){return{property_value:this.props.filter.property_value}},componentWillReceiveProps:function(e){this.setState({property_value:e.filter.property_value})},render:function(){var e;return e="geo"===this.propertyType||"within"===this.props.filter.operator?a.createElement(c,{handleChange:this.handleChangeWithEvent,filter:this.props.filter}):"exists"===this.props.filter.operator||"Boolean"===this.props.filter.coercion_type?a.createElement(s,{name:"property_value",classes:"property-value",ref:"boolean-value-set",options:["true","false"],handleBlur:this.handleChangeWithEvent,handleSelection:this.setValueState,selectedOption:p.booleanMap(this.state.property_value)||"true",emptyOption:!1}):"Datetime"===this.props.filter.coercion_type?a.createElement("div",{className:"row property-value"},a.createElement("div",{className:"col-md-6 form-collapse-right"},a.createElement(o,{ref:"date-value-input",value:i(new Date(this.state.property_value)).format(u),label:!1,name:"property_value",placeholder:"Date",classes:"datepicker-wrapper",onSet:this.setDate,onBlur:this.handleDateBlur})),a.createElement("div",{className:"col-md-6 form-collapse-left"},a.createElement(l,{ref:"time-value-input",value:i(new Date(this.state.property_value)).format(h),label:!1,name:"property_value",placeholder:"Time",classes:"timepicker-wrapper",handleSelection:this.setTime,handleBlur:this.setTime}))):a.createElement("input",{type:"text",ref:"value-input",name:"property_value",className:"form-control property-value",value:this.state.property_value,onChange:this.setValueState,onBlur:this.handleChangeWithEvent,placeholder:this.getInputPlaceholder(),readOnly:"Null"===this.props.filter.coercion_type,autoComplete:"off"}),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-md-3 form-collapse-right"},a.createElement(s,{label:!1,ref:"type-set",name:"coercion_type",classes:"coercion-type",sort:!1,options:this.getCoercionOptions(),handleSelection:this.handleChangeWithEvent,selectedOption:this.props.filter.coercion_type,emptyOption:!1})),a.createElement("div",{className:"col-md-9 form-collapse-left"},e))}});e.exports=m},function(e,t,n){"use strict";n(0);var r=n(1),i=n(15),a=n(6),s=n(11),o=n(53),l=n(8),c=r.createClass({displayName:"Filter",removeFilter:function(e){e.preventDefault(),this.props.removeFilter(this.props.index)},handleChange:function(e,t){this.props.handleChange(this.props.index,e,t)},handleChangeWithEvent:function(e){this.props.handleChange(this.props.index,e.target.name,e.target.value)},buildValueFormGroup:function(){return r.createElement(o,{filter:this.props.filter,filterOperators:this.props.filterOperators,handleChange:this.handleChange})},buildOperatorSelect:function(){return r.createElement(i,{label:!1,name:"operator",classes:"operator",options:this.props.filterOperators,emptyOption:!1,sort:!1,handleSelection:this.handleChangeWithEvent,selectedOption:this.props.filter.operator})},buildPropertyNameSelect:function(){return r.createElement(s,{name:"property_name",inputClasses:"property-name form-control",items:this.props.propertyNames,handleChange:this.handleChange,placeholder:"Select a property name",value:this.props.filter.property_name,sort:!0})},getListSyntaxInfo:function(){if("List"===this.props.filter.coercion_type)return r.createElement("p",{className:"filter-instructions help-block"},"Wrap strings in ",r.createElement("b",null,"double")," quotes & numbers in ",r.createElement("b",null,"single")," quotes.")},buildValidationError:function(){if(this.filterCompleteAndInvalid())return r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-12"},r.createElement("p",{className:"invalid"},"Invalid: ",this.props.filter.errors[0].msg)))},filterCompleteAndInvalid:function(){var e=l.isComplete(this.props.filter),t=this.props.filter.isValid;return e&&!t},render:function(){var e=a({"filter-row":!0,"filter-complete":!l.isComplete(this.props.filter)||this.props.filter.isValid,"filter-incomplete":this.filterCompleteAndInvalid()});return r.createElement("div",{className:e},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-4 filter-property-col"},this.buildPropertyNameSelect()),r.createElement("div",{className:"col-md-2 filter-operator-col"},this.buildOperatorSelect()),r.createElement("div",{className:"col-md-5 filter-value-col"},this.buildValueFormGroup(),this.getListSyntaxInfo()),r.createElement("div",{className:"col-md-1 filter-close-col"},r.createElement("a",{href:"#",className:"remove-filter",onClick:this.removeFilter,"data-index":this.props.index},r.createElement("span",{className:"icon no-margin"},"×")))),this.buildValidationError())}});e.exports=c},function(e,t,n){"use strict";n(0);var r=n(1),i=n(11),a=n(5),s=(n(4),r.createClass({displayName:"Timezone",handleTimezoneBlur:function(){this.setState({active:!1}),this.refs["timezone-display"].focus()},handleTimezoneActivated:function(){var e=this;this.setState({active:!0}),setTimeout(function(){e.refs.timezone.refs.input.focus(),e.refs.timezone.setState({visible:!0})},100)},handleTimezoneChange:function(e,t){var n=a.getConstant("TIMEZONES").filter(function(e){return e.name===t})[0];this.props.handleChange("timezone",n?n.name:t)},getInitialState:function(){return{active:!1}},componentDidMount:function(){this.props.timezone||this.props.handleChange("timezone",a.getConstant("DEFAULT_TIMEZONE")),this.refs.timezone.setState({visible:!1})},render:function(){return r.createElement("div",{className:"timezone-toggle"+(this.state.active?" active":"")},r.createElement("div",{className:"toggle-display"},r.createElement("button",{ref:"timezone-display",className:"btn btn-link field-secondary-control",title:"Selectd timezone: "+this.props.timezone,type:"button",onClick:this.handleTimezoneActivated},r.createElement("span",{className:"icon glyphicon glyphicon-globe"})," Timezone: ",this.props.timezone)),r.createElement("div",{className:"toggle-options"},r.createElement(i,{ref:"timezone",name:"timezone",classes:"timezone form-control",value:this.props.timezone,items:a.getConstant("TIMEZONES").map(function(e){return e.name}),handleChange:this.handleTimezoneChange,handleBlur:this.handleTimezoneBlur})))}}));e.exports=s},function(e,t,n){var r=n(1),i=n(0),a=n(13),s=n(15),o=["this","previous"],l=(n(3),n(4),n(2));var c=r.createClass({displayName:"RelativePicker",setRelativeTime:function(e){var t=e.target.name,n=e.target.value,r=i.cloneDeep(this.props.time);r[t]=n,this.props.handleChange("time",r)},buildDescriptionCopy:function(){var e=this.props.time;if(function(e){return(e=e||{}).relativity&&e.amount&&e.sub_timeframe}(this.props.time)){var t=l.singularize(e.sub_timeframe,e.amount),n=e.amount>1?"s":"",i="this"==e.relativity?"including":"excluding",a=l.singularize(t);return r.createElement("p",{className:"help-block"},"The last ",e.amount," ",t,n," ",r.createElement("b",null,i)," the current ",a,".")}},render:function(){var e=this.buildDescriptionCopy();return r.createElement("div",{className:"relative-timeframe-picker"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-xs-4 form-collapse-right",id:"relative-type"},r.createElement("div",{className:"btn-group"},r.createElement(s,{label:!1,name:"relativity",classes:"relativity",options:o,emptyOption:!1,handleSelection:this.setRelativeTime,selectedOption:this.props.time.relativity}))),r.createElement("div",{className:"col-xs-3 form-collapse-left form-collapse-right",id:"interval-amount"},r.createElement(a,{label:!1,name:"amount",classes:"amount",onChange:this.setRelativeTime,placeholder:"e.g. 1",value:this.props.time.amount||"",autoComplete:"off"})),r.createElement("div",{className:"col-xs-5 form-collapse-left",id:"sub-interval-type"},r.createElement(s,{label:!1,name:"sub_timeframe",classes:"sub-timeframe",options:this.props.relativeIntervalTypes,emptyOption:!1,handleSelection:this.setRelativeTime,selectedOption:this.props.time.sub_timeframe,sort:!1}))),e)}});e.exports=c},function(e,t,n){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * Time picker for pickadate.js v3.5.4
 * http://amsul.github.io/pickadate.js/time.htm
 */
r=function(e,t){var n,r=e._;function i(e,t){var n,r=this,i=e.$node[0].value,a=e.$node.data("value"),s=a||i,o=a?t.formatSubmit:t.format;r.settings=t,r.$node=e.$node,r.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},r.item={},r.item.clear=null,r.item.interval=t.interval||30,r.item.disable=(t.disable||[]).slice(0),r.item.enable=-(!0===(n=r.item.disable)[0]?n.shift():-1),r.set("min",t.min).set("max",t.max).set("now"),s?r.set("select",s,{format:o,fromValue:!!i}):r.set("select",null).set("highlight",r.item.now),r.key={40:1,38:-1,39:1,37:-1,go:function(e){r.set("highlight",r.item.highlight.pick+e*r.item.interval,{interval:e*r.item.interval}),this.render()}},e.on("render",function(){var n=e.$root.children(),r=n.find("."+t.klass.viewset),i=function(e){return["webkit","moz","ms","o",""].map(function(t){return(t?"-"+t+"-":"")+e})},a=function(e,t){i("transform").map(function(n){e.css(n,t)}),i("transition").map(function(n){e.css(n,t)})};r.length&&(a(n,"none"),n[0].scrollTop=~~r.position().top-2*r[0].clientHeight,a(n,""))},1).on("open",function(){e.$root.find("button").attr("disabled",!1)},1).on("close",function(){e.$root.find("button").attr("disabled",!0)},1)}i.prototype.set=function(e,t,n){var r=this,i=r.item;return null===t?("clear"==e&&(e="select"),i[e]=t,r):(i["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop(),"select"==e?r.set("highlight",i.select,n):"highlight"==e?r.set("view",i.highlight,n):"interval"==e?r.set("min",i.min,n).set("max",i.max,n):e.match(/^(flip|min|max|disable|enable)$/)&&("min"==e&&r.set("max",i.max,n),i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,n,i){return n=void 0===n?e:n,r.isDate(n)&&(n=[n.getHours(),n.getMinutes()]),t.isPlainObject(n)&&r.isInteger(n.pick)?n=n.pick:t.isArray(n)?n=60*+n[0]+ +n[1]:r.isInteger(n)||(n=this.now(e,n,i)),"max"==e&&n<this.item.min.pick&&(n+=1440),"min"!=e&&"max"!=e&&(n-this.item.min.pick)%this.item.interval!=0&&(n+=this.item.interval),{hour:~~(24+(n=this.normalize(e,n,i))/60)%24,mins:(60+n%60)%60,time:(1440+n)%1440,pick:n}},i.prototype.createRange=function(e,n){var i=this,a=function(e){return!0===e||t.isArray(e)||r.isDate(e)?i.create(e):e};return r.isInteger(e)||(e=a(e)),r.isInteger(n)||(n=a(n)),r.isInteger(e)&&t.isPlainObject(n)?e=[n.hour,n.mins+e*i.settings.interval]:r.isInteger(n)&&t.isPlainObject(e)&&(n=[e.hour,e.mins+n*i.settings.interval]),{from:a(e),to:a(n)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){return e=this.createRange(e.from,e.to),t=this.createRange(t.from,t.to),this.withinRange(e,t.from)||this.withinRange(e,t.to)||this.withinRange(t,e.from)||this.withinRange(t,e.to)},i.prototype.now=function(e,t){var n,i=this.item.interval,a=new Date,s=60*a.getHours()+a.getMinutes(),o=r.isInteger(t);return s-=s%i,n=t<0&&i*t+s<=-i,s+="min"==e&&n?0:i,o&&(s+=i*(n&&"max"!=e?t+1:t)),s},i.prototype.normalize=function(e,t){var n=this.item.interval,r=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-r)%n},i.prototype.measure=function(e,n,i){return n||(n="min"==e?[0,0]:[23,59]),"string"==typeof n?n=this.parse(e,n):!0===n||r.isInteger(n)?n=this.now(e,n,i):t.isPlainObject(n)&&r.isInteger(n.pick)&&(n=this.normalize(e,n.pick,i)),n},i.prototype.validate=function(e,t,n){var r=n&&n.interval?n.interval:this.item.interval;return this.disabled(t)&&(t=this.shift(t,r)),t=this.scope(t),this.disabled(t)&&(t=this.shift(t,-1*r)),t},i.prototype.disabled=function(e){var n=this,i=n.item.disable.filter(function(i){return r.isInteger(i)?e.hour==i:t.isArray(i)||r.isDate(i)?e.pick==n.create(i).pick:t.isPlainObject(i)?n.withinRange(i,e):void 0});return i=i.length&&!i.filter(function(e){return t.isArray(e)&&"inverted"==e[2]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!i:i||e.pick<n.item.min.pick||e.pick>n.item.max.pick},i.prototype.shift=function(e,t){var n=this.item.min.pick,r=this.item.max.pick;for(t=t||this.item.interval;this.disabled(e)&&!((e=this.create(e.pick+=t)).pick<=n||e.pick>=r););return e},i.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)},i.prototype.parse=function(e,t,n){var i,a,s,o,l,c=this,p={};if(!t||"string"!=typeof t)return t;for(o in n&&n.format||((n=n||{}).format=c.settings.format),c.formats.toArray(n.format).map(function(e){var n,i=c.formats[e],a=i?r.trigger(i,c,[t,p]):e.replace(/^!/,"").length;i&&(n=t.substr(0,a),p[e]=n.match(/^\d+$/)?+n:n),t=t.substr(a)}),p)l=p[o],r.isInteger(l)?o.match(/^(h|hh)$/i)?(i=l,"h"!=o&&"hh"!=o||(i%=12)):"i"==o&&(a=l):o.match(/^a$/i)&&l.match(/^p/i)&&("h"in p||"hh"in p)&&(s=!0);return 60*(s?i+12:i)+a},i.prototype.formats={h:function(e,t){return e?r.digits(e):t.hour%12||12},hh:function(e,t){return e?2:r.lead(t.hour%12||12)},H:function(e,t){return e?r.digits(e):""+t.hour%24},HH:function(e,t){return e?r.digits(e):r.lead(t.hour%24)},i:function(e,t){return e?2:r.lead(t.mins)},a:function(e,t){return e?4:720>t.time%1440?"a.m.":"p.m."},A:function(e,t){return e?2:720>t.time%1440?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return r.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,n){return r.isInteger(e)&&r.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(r.isDate(e)||t.isArray(e))&&(r.isDate(n)||t.isArray(n))?this.create(e).pick===this.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(this.isTimeExact(e.from,n.from)&&this.isTimeExact(e.to,n.to))},i.prototype.isTimeOverlap=function(e,n){return r.isInteger(e)&&(r.isDate(n)||t.isArray(n))?e===this.create(n).hour:r.isInteger(n)&&(r.isDate(e)||t.isArray(e))?n===this.create(e).hour:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&this.overlapRanges(e,n)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,n){var i=this,a=i.item.disable.slice(0);return"flip"==n?i.flipEnable():!1===n?(i.flipEnable(1),a=[]):!0===n?(i.flipEnable(-1),a=[]):n.map(function(e){for(var n,s=0;s<a.length;s+=1)if(i.isTimeExact(e,a[s])){n=!0;break}n||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},i.prototype.activate=function(e,n){var i=this,a=i.item.disable,s=a.length;return"flip"==n?i.flipEnable():!0===n?(i.flipEnable(1),a=[]):!1===n?(i.flipEnable(-1),a=[]):n.map(function(e){var n,o,l,c;for(l=0;l<s;l+=1){if(o=a[l],i.isTimeExact(o,e)){n=a[l]=null,c=!0;break}if(i.isTimeOverlap(o,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e)[2]||n.push("inverted"):r.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(l=0;l<s;l+=1)if(i.isTimeExact(a[l],e)){a[l]=null;break}if(c)for(l=0;l<s;l+=1)if(i.isTimeOverlap(a[l],e)){a[l]=null;break}n&&a.push(n)}),a.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return r.isInteger(t)&&t>0?t:this.item.interval},i.prototype.nodes=function(e){var t=this,n=t.settings,i=t.item.select,a=t.item.highlight,s=t.item.view,o=t.item.disable;return r.node("ul",r.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){var l,c=(e=t.create(e)).pick,p=i&&i.pick==c,u=a&&a.pick==c,h=o&&t.disabled(e);return[r.trigger(t.formats.toString,t,[r.trigger(n.formatLabel,t,[e])||n.format,e]),(l=[n.klass.listItem],p&&l.push(n.klass.selected),u&&l.push(n.klass.highlighted),s&&s.pick==c&&l.push(n.klass.viewset),h&&l.push(n.klass.disabled),l.join(" ")),"data-pick="+e.pick+" "+r.ariaAttr({role:"option",selected:!(!p||t.$node.val()!==r.trigger(t.formats.toString,t,[n.format,e]))||null,activedescendant:!!u||null,disabled:!!h||null})]}})+r.node("li",r.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),"",r.ariaAttr({role:"presentation"})),n.klass.list,r.ariaAttr({role:"listbox",controls:t.$node[0].id}))},i.defaults={clear:"Clear",format:"h:i A",interval:30,klass:{picker:(n=e.klasses().picker)+" "+n+"--time",holder:n+"__holder",list:n+"__list",listItem:n+"__list-item",disabled:n+"__list-item--disabled",selected:n+"__list-item--selected",highlighted:n+"__list-item--highlighted",viewset:n+"__list-item--viewset",now:n+"__list-item--now",buttonClear:n+"__button--clear"}},e.extend("pickatime",i)},"object"==i(t)?e.exports=r(n(23),n(22)):r(Picker,jQuery)},function(e,t,n){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * Date picker for pickadate.js v3.5.4
 * http://amsul.github.io/pickadate.js/date.htm
 */
r=function(e,t){var n,r=e._;function i(e,t){var n,r=this,i=e.$node[0],a=i.value,s=e.$node.data("value"),o=s||a,l=s?t.formatSubmit:t.format,c=function(){return i.currentStyle?"rtl"==i.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};r.settings=t,r.$node=e.$node,r.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},r.item={},r.item.clear=null,r.item.disable=(t.disable||[]).slice(0),r.item.enable=-(!0===(n=r.item.disable)[0]?n.shift():-1),r.set("min",t.min).set("max",t.max).set("now"),o?r.set("select",o,{format:l}):r.set("select",null).set("highlight",r.item.now),r.key={40:7,38:-7,39:function(){return c()?-1:1},37:function(){return c()?1:-1},go:function(e){var t=r.item.highlight,n=new Date(Date.UTC(t.year,t.month,t.date+e));r.set("highlight",n,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var n="";r.disabled(r.get("now"))&&(n=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+n+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}i.prototype.set=function(e,t,n){var r=this,i=r.item;return null===t?("clear"==e&&(e="select"),i[e]=t,r):(i["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop(),"select"==e?r.set("highlight",i.select,n):"highlight"==e?r.set("view",i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,n,i){var a;return(n=void 0===n?e:n)==-1/0||n==1/0?a=n:t.isPlainObject(n)&&r.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(Date.UTC(n[0],n[1],n[2])),n=r.isDate(n)?n:this.create().obj):n=r.isInteger(n)?this.normalize(new Date(n),i):r.isDate(n)?this.normalize(n,i):this.now(e,n,i),{year:a||n.getUTCFullYear(),month:a||n.getUTCMonth(),date:a||n.getUTCDate(),day:a||n.getUTCDay(),obj:a||n,pick:a||n.getTime()}},i.prototype.createRange=function(e,n){var i=this,a=function(e){return!0===e||t.isArray(e)||r.isDate(e)?i.create(e):e};return r.isInteger(e)||(e=a(e)),r.isInteger(n)||(n=a(n)),r.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:r.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:a(e),to:a(n)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){return e=this.createRange(e.from,e.to),t=this.createRange(t.from,t.to),this.withinRange(e,t.from)||this.withinRange(e,t.to)||this.withinRange(t,e.from)||this.withinRange(t,e.to)},i.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setUTCDate(t.getUTCDate()+n.rel),this.normalize(t,n)},i.prototype.navigate=function(e,n,r){var i,a,s,o,l=t.isArray(n),c=t.isPlainObject(n),p=this.item.view;if(l||c){for(c?(a=n.year,s=n.month,o=n.date):(a=+n[0],s=+n[1],o=+n[2]),r&&r.nav&&p&&p.month!==s&&(a=p.year,s=p.month),a=(i=new Date(Date.UTC(a,s+(r&&r.nav?r.nav:0),1))).getUTCFullYear(),s=i.getUTCMonth();new Date(Date.UTC(a,s,o)).getUTCMonth()!==s;)o-=1;n=[a,s,o]}return n},i.prototype.normalize=function(e){return e.setUTCHours(0,0,0,0),e},i.prototype.measure=function(e,t){return t?"string"==typeof t?t=this.parse(e,t):r.isInteger(t)&&(t=this.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(e,n,i){var a,s,o,l,c=this,p=n,u=i&&i.interval?i.interval:1,h=-1===c.item.enable,d=c.item.min,m=c.item.max,f=h&&c.item.disable.filter(function(e){if(t.isArray(e)){var i=c.create(e).pick;i<n.pick?a=!0:i>n.pick&&(s=!0)}return r.isInteger(e)}).length;if((!i||!i.nav)&&(!h&&c.disabled(n)||h&&c.disabled(n)&&(f||a||s)||!h&&(n.pick<=d.pick||n.pick>=m.pick)))for(h&&!f&&(!s&&u>0||!a&&u<0)&&(u*=-1);c.disabled(n)&&(Math.abs(u)>1&&(n.month<p.month||n.month>p.month)&&(n=p,u=u>0?1:-1),n.pick<=d.pick?(o=!0,u=1,n=c.create([d.year,d.month,d.date+(n.pick===d.pick?0:-1)])):n.pick>=m.pick&&(l=!0,u=-1,n=c.create([m.year,m.month,m.date+(n.pick===m.pick?0:1)])),!o||!l);)n=c.create([n.year,n.month,n.date+u]);return n},i.prototype.disabled=function(e){var n=this,i=n.item.disable.filter(function(i){return r.isInteger(i)?e.day===(n.settings.firstDay?i:i-1)%7:t.isArray(i)||r.isDate(i)?e.pick===n.create(i).pick:t.isPlainObject(i)?n.withinRange(i,e):void 0});return i=i.length&&!i.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!i:i||e.pick<n.item.min.pick||e.pick>n.item.max.pick},i.prototype.parse=function(e,t,n){var i=this,a={};return t&&"string"==typeof t?(n&&n.format||((n=n||{}).format=i.settings.format),i.formats.toArray(n.format).map(function(e){var n=i.formats[e],s=n?r.trigger(n,i,[t,a]):e.replace(/^!/,"").length;n&&(a[e]=t.substr(0,s)),t=t.substr(s)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):t},i.prototype.formats=function(){function e(e,t,n){var r=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(r)+1),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?r.digits(e):t.date},dd:function(e,t){return e?2:r.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?r.digits(e):t.month+1},mm:function(e,t){return e?2:r.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return r.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),i.prototype.isDateExact=function(e,n){return r.isInteger(e)&&r.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(r.isDate(e)||t.isArray(e))&&(r.isDate(n)||t.isArray(n))?this.create(e).pick===this.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&(this.isDateExact(e.from,n.from)&&this.isDateExact(e.to,n.to))},i.prototype.isDateOverlap=function(e,n){var i=this.settings.firstDay?1:0;return r.isInteger(e)&&(r.isDate(n)||t.isArray(n))?(e=e%7+i)===this.create(n).day+1:r.isInteger(n)&&(r.isDate(e)||t.isArray(e))?(n=n%7+i)===this.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&this.overlapRanges(e,n)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,n){var i=this,a=i.item.disable.slice(0);return"flip"==n?i.flipEnable():!1===n?(i.flipEnable(1),a=[]):!0===n?(i.flipEnable(-1),a=[]):n.map(function(e){for(var n,s=0;s<a.length;s+=1)if(i.isDateExact(e,a[s])){n=!0;break}n||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},i.prototype.activate=function(e,n){var i=this,a=i.item.disable,s=a.length;return"flip"==n?i.flipEnable():!0===n?(i.flipEnable(1),a=[]):!1===n?(i.flipEnable(-1),a=[]):n.map(function(e){var n,o,l,c;for(l=0;l<s;l+=1){if(o=a[l],i.isDateExact(o,e)){n=a[l]=null,c=!0;break}if(i.isDateOverlap(o,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e)[3]||n.push("inverted"):r.isDate(e)&&(n=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),"inverted"]);break}}if(n)for(l=0;l<s;l+=1)if(i.isDateExact(a[l],e)){a[l]=null;break}if(c)for(l=0;l<s;l+=1)if(i.isDateOverlap(a[l],e)){a[l]=null;break}n&&a.push(n)}),a.filter(function(e){return null!=e})},i.prototype.nodes=function(e){var t,n,i=this,a=i.settings,s=i.item,o=s.now,l=s.select,c=s.highlight,p=s.view,u=s.disable,h=s.min,d=s.max,m=(t=(a.showWeekdaysFull?a.weekdaysFull:a.weekdaysShort).slice(0),n=a.weekdaysFull.slice(0),a.firstDay&&(t.push(t.shift()),n.push(n.shift())),r.node("thead",r.node("tr",r.group({min:0,max:6,i:1,node:"th",item:function(e){return[t[e],a.klass.weekdays,'scope=col title="'+n[e]+'"']}})))),f=function(e){return r.node("div"," ",a.klass["nav"+(e?"Next":"Prev")]+(e&&p.year>=d.year&&p.month>=d.month||!e&&p.year<=h.year&&p.month<=h.month?" "+a.klass.navDisabled:""),"data-nav="+(e||-1)+" "+r.ariaAttr({role:"button",controls:i.$node[0].id+"_table"})+' title="'+(e?a.labelMonthNext:a.labelMonthPrev)+'"')},v=function(){var t=a.showMonthsShort?a.monthsShort:a.monthsFull;return a.selectMonths?r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(p.month==e?" selected":"")+(p.year==h.year&&e<h.month||p.year==d.year&&e>d.month?" disabled":"")]}}),a.klass.selectMonth,(e?"":"disabled")+" "+r.ariaAttr({controls:i.$node[0].id+"_table"})+' title="'+a.labelMonthSelect+'"'):r.node("div",t[p.month],a.klass.month)},y=function(){var t=p.year,n=!0===a.selectYears?5:~~(a.selectYears/2);if(n){var s=h.year,o=d.year,l=t-n,c=t+n;if(s>l&&(c+=s-l,l=s),o<c){var u=l-s,m=c-o;l-=u>m?m:u,c=o}return r.node("select",r.group({min:l,max:c,i:1,node:"option",item:function(e){return[e,0,"value="+e+(t==e?" selected":"")]}}),a.klass.selectYear,(e?"":"disabled")+" "+r.ariaAttr({controls:i.$node[0].id+"_table"})+' title="'+a.labelYearSelect+'"')}return r.node("div",t,a.klass.year)};return r.node("div",(a.selectYears?y()+v():v()+y())+f()+f(1),a.klass.header)+r.node("table",m+r.node("tbody",r.group({min:0,max:5,i:1,node:"tr",item:function(e){var t=a.firstDay&&0===i.create([p.year,p.month,1]).day?-7:0;return[r.group({min:7*e-p.day+t+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=i.create([p.year,p.month,e+(a.firstDay?1:0)]);var t,n=l&&l.pick==e.pick,s=c&&c.pick==e.pick,m=u&&i.disabled(e)||e.pick<h.pick||e.pick>d.pick;return[r.node("div",e.date,(t=[a.klass.day],t.push(p.month==e.month?a.klass.infocus:a.klass.outfocus),o.pick==e.pick&&t.push(a.klass.now),n&&t.push(a.klass.selected),s&&t.push(a.klass.highlighted),m&&t.push(a.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+r.ariaAttr({role:"gridcell",selected:!(!n||i.$node.val()!==r.trigger(i.formats.toString,i,[a.format,e]))||null,activedescendant:!!s||null,disabled:!!m||null})),"",r.ariaAttr({role:"presentation"})]}})]}})),a.klass.table,'id="'+i.$node[0].id+'_table" '+r.ariaAttr({role:"grid",controls:i.$node[0].id,readonly:!0}))+r.node("div",r.node("button",a.today,a.klass.buttonToday,"type=button data-pick="+o.pick+(e&&!i.disabled(o)?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id}))+r.node("button",a.clear,a.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id}))+r.node("button",a.close,a.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+r.ariaAttr({controls:i.$node[0].id})),a.klass.footer)},i.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:(n=e.klasses().picker+"__")+"table",header:n+"header",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today",buttonClose:n+"button--close"}},e.extend("pickadate",i)},"object"==i(t)?e.exports=r(n(23),n(22)):r(Picker,jQuery)},function(e,t,n){var r=n(1),i=n(0),a=n(9),s=n(34),o=n(33),l=(n(3),n(4),r.createClass({displayName:"AbsolutePicker",setDate:function(e,t){var n=this.props.time,r=new Date(n.end),s=i.cloneDeep(n);"start_date"===e&&t>r&&(s.end=""),s[e]=new Date(a(new Date(t)).format("ll")+" "+a(n[e]).format("h:mm A")),this.props.handleChange("time",s)},handleDateBlur:function(e){var t=e.target.name,n=e.target.value;this.setDate(t,n)},setTime:function(e,t){var n=this.props.time,r=i.cloneDeep(n);r[e]=new Date(a(n[e]).format("ll")+" "+a(new Date(t)).format("h:mm A")),this.props.handleChange("time",r)},render:function(){var e=this.props.time;return r.createElement("div",{className:"absolute-timeframe-picker"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-xs-2"},r.createElement("label",null,"Start")),r.createElement("div",{className:"col-xs-5 form-collapse-right"},r.createElement(s,{ref:"start-date",value:a(e.start).format("ll"),name:"start",placeholder:"Date",onBlur:this.handleDateBlur,onSet:this.setDate})),r.createElement("div",{className:"col-xs-5 form-collapse-left"},r.createElement(o,{ref:"start-time",value:a(e.start).format("h:mm A"),name:"start",placeholder:"Time",handleBlur:this.setTime,handleSelection:this.setTime}))),r.createElement("div",{className:"row"},r.createElement("div",{className:"col-xs-2"},r.createElement("label",null,"End")),r.createElement("div",{className:"col-xs-5 form-collapse-right"},r.createElement(s,{ref:"end-date",value:a(e.end).format("ll"),minimum:a(e.start).format("ll"),name:"end",placeholder:"Date",onBlur:this.handleDateBlur,onSet:this.setDate})),r.createElement("div",{className:"col-xs-5 form-collapse-left"},r.createElement(o,{ref:"end-time",value:a(e.end).format("h:mm A"),name:"end",placeholder:"Time",handleBlur:this.setTime,handleSelection:this.setTime}))))}}));e.exports=l},function(e,t,n){"use strict";var r=n(1),i=(n(0),n(36)),a=n(35),s=n(14),o=n(27),l=n(32),c=n(8),p=n(6),u=r.createClass({displayName:"FunnelStep",propTypes:{index:r.PropTypes.number.isRequired,step:r.PropTypes.object.isRequired,eventCollections:r.PropTypes.array.isRequired,propertyNames:r.PropTypes.array.isRequired,onBrowseEvents:r.PropTypes.func.isRequired,getPropertyType:r.PropTypes.func.isRequired,moveStep:r.PropTypes.func.isRequired,removeStep:r.PropTypes.func.isRequired,handleChange:r.PropTypes.func.isRequired,toggleStepActive:r.PropTypes.func.isRequired,handleFilterChange:r.PropTypes.func.isRequired,handleAddFilter:r.PropTypes.func.isRequired,handleRemoveFilter:r.PropTypes.func.isRequired},removeStep:function(e){e.preventDefault(),this.props.canRemove&&confirm("Are you sure you want to delete this funnel step?")&&this.props.removeStep(this.props.index)},handleChange:function(e,t){this.props.handleChange(this.props.index,e,t)},handleChangeWithEvent:function(e){e.preventDefault(),this.props.handleChange(this.props.index,e.target.name,e.target.value)},handleCheckboxChange:function(e){this.props.handleChange(this.props.index,e.target.name,e.target.checked)},toggleStepActive:function(e){this.props.toggleStepActive(this.props.index,!this.props.step.active)},handleFiltersToggle:function(){this.refs["filter-manager"].open()},handleAddFilter:function(){this.props.handleAddFilter(this.props.index)},handleRemoveFilter:function(e){this.props.handleRemoveFilter(this.props.index,e)},handleFilterChange:function(e,t){this.props.handleFilterChange(this.props.index,e,t)},moveStepUp:function(e){e.preventDefault(),e.stopPropagation(),this.props.moveStep(this.props.index,"up")},moveStepDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.moveStep(this.props.index,"down")},buildStepBody:function(){var e,t;if(this.props.canRemove&&(e=r.createElement("a",{href:"#",className:"remove-step",onClick:this.removeStep},r.createElement("i",{className:"icon glyphicon glyphicon-remove-circle margin-right-tiny"}),"Remove Step")),this.props.notice&&(t=r.createElement(o,{notice:this.props.notice,closable:!1})),!0===this.props.step.active)return r.createElement("div",{className:"step-body margin-top-small margin-bottom-small"},t,r.createElement(i,{name:"event_collection",label:"Event Collection",value:this.props.step.event_collection,options:this.props.eventCollections,requiredLabel:!0,onBrowseEvents:this.props.onBrowseEvents,handleChange:this.handleChange}),r.createElement(i,{name:"actor_property",label:"Actor Property",value:this.props.step.actor_property,options:this.props.propertyNames,requiredLabel:!0,handleChange:this.handleChange}),r.createElement(a,{ref:"timeframe",time:this.props.step.time,timezone:this.props.step.timezone,handleChange:this.handleChange}),r.createElement("div",{className:"field-component"},r.createElement(s,{ref:"filters-fields-toggle",name:"Filters",toggleCallback:this.handleFiltersToggle,fieldsCount:c.validFilters(this.props.step.filters).length})),r.createElement(l,{ref:"filter-manager",eventCollection:this.props.step.event_collection,filters:this.props.step.filters,handleChange:this.handleFilterChange,removeFilter:this.handleRemoveFilter,addFilter:this.handleAddFilter,getPropertyType:this.props.getPropertyType,propertyNames:this.props.propertyNames}),r.createElement("label",{className:"block-label margin-top-small"},r.createElement("input",{name:"optional",type:"checkbox",checked:this.props.step.optional,onChange:this.handleCheckboxChange})," Optional Step"),r.createElement("label",{className:"block-label"},r.createElement("input",{name:"inverted",type:"checkbox",checked:this.props.step.inverted,onChange:this.handleCheckboxChange})," Inverted Step"),r.createElement("label",{className:"block-label"},r.createElement("input",{name:"with_actors",type:"checkbox",checked:this.props.step.with_actors,onChange:this.handleCheckboxChange})," With Actors"),r.createElement("hr",null),e)},render:function(){var e=p({"funnel-step":!0,active:this.props.step.active});return r.createElement("div",{className:e},r.createElement("div",{className:"step-header clearfix",onClick:this.toggleStepActive,role:"step-header"},r.createElement("div",{className:"step-move-btns"},r.createElement("a",{href:"#",className:"up",onClick:this.moveStepUp,role:"move-step"},r.createElement("span",{className:"arrow"})),r.createElement("a",{href:"#",className:"down",onClick:this.moveStepDown,role:"move-step"},r.createElement("span",{className:"arrow"}))),r.createElement("div",{className:"step-number"},this.props.index+1),r.createElement("div",{className:"step-name"},"Step ",this.props.index+1)),this.buildStepBody())}});e.exports=u},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(60),s=n(4),o=r.createClass({displayName:"FunnelsBuilder",propTypes:{modelId:r.PropTypes.string.isRequired,eventCollections:r.PropTypes.array.isRequired,steps:r.PropTypes.array.isRequired,stepNotices:r.PropTypes.array.isRequired,onBrowseEvents:r.PropTypes.func.isRequired,getEventPropertyNames:r.PropTypes.func.isRequired,getPropertyType:r.PropTypes.func.isRequired},handleChange:function(e,t,n){var r={};r[t]=n,s.updateStep(this.props.modelId,e,r)},addStep:function(e){e.preventDefault(),s.addStep(this.props.modelId)},removeStep:function(e){s.removeStep(this.props.modelId,e)},handleAddFilter:function(e){s.addStepFilter(this.props.modelId,e)},handleRemoveFilter:function(e,t){s.removeStepFilter(this.props.modelId,e,t)},handleFilterChange:function(e,t,n){s.updateStepFilter(this.props.modelId,e,t,n)},toggleStepActive:function(e,t){t?s.setStepActive(this.props.modelId,e):s.updateStep(this.props.modelId,e,{active:!1})},moveStep:function(e,t){s.moveStep(this.props.modelId,e,t)},buildSteps:function(){return this.props.steps.map(function(e,t){var n=i.find(this.props.stepNotices,{stepIndex:t});return r.createElement("li",{key:t},r.createElement(a,{index:t,step:e,notice:n,removeStep:this.removeStep,canRemove:this.props.steps.length>1,eventCollections:this.props.eventCollections,propertyNames:this.props.getEventPropertyNames(e.event_collection),onBrowseEvents:this.props.onBrowseEvents,toggleStepActive:this.toggleStepActive,handleChange:this.handleChange,handleAddFilter:this.handleAddFilter,handleRemoveFilter:this.handleRemoveFilter,handleFilterChange:this.handleFilterChange,getPropertyType:this.props.getPropertyType,handleFiltersToggle:this.handleFiltersToggle,moveStep:this.moveStep}))}.bind(this))},render:function(){return r.createElement("div",{className:"funnel-builder margin-top-small"},r.createElement("h4",null,"Steps"),r.createElement("ul",{className:"steps"},this.buildSteps()),r.createElement("a",{href:"#",className:"add-step",onClick:this.addStep},r.createElement("i",{className:"icon glyphicon glyphicon-plus-sign margin-right-tiny"}),"Add a step"))}});e.exports=o},function(e,t,n){"use strict";var r=n(1),i=n(13),a=(n(3),r.createClass({displayName:"LatestField",render:function(){return r.createElement("div",{className:"form-group"},r.createElement(i,{type:"text",name:"latest",label:"Limit number of events to extract",value:this.props.latest,placeholder:"Eg: 1000",onChange:this.props.handleChange}),r.createElement("small",{className:"text-muted"},r.createElement("span",{className:"icon glyphicon glyphicon-info-sign"}),r.createElement("span",null,"Results are limited to 10 million events")))}}));e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={open:!1,id:"react-multi-select",focusedIndex:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"interceptEvent",value:function(e){e&&(e.preventDefault(),e.stopPropagation())}},{key:"_toggleOpenClose",value:function(e){if(this.interceptEvent(e),this.state.open)return this.setState({open:!1});this.setState({open:!0})}},{key:"_isSelected",value:function(e){return this.props.items.filter(function(t){return!(t.value!==e||!t.selected)}).length>0}},{key:"_handleOptionChange",value:function(e){this.interceptEvent(e),this.props.handleChange(this.props.name,e.target.text,!this._isSelected(e.target.text))}},{key:"_renderOption",value:function(e,t){var n="react-select-box-option";return t===this.state.focusedIndex&&(n+=" react-select-box-option-focused"),e.selected&&(n+=" react-select-box-option-selected"),i.createElement("a",{id:this.state.id+"-"+t,className:n,href:"#",onClick:this._handleOptionChange.bind(this),title:e.label,key:t+"_"+e.label},e.label)}},{key:"_renderOptionMenu",value:function(){var e=this,t="react-select-box-options";this.state.open||(t+=" react-select-box-hidden");var n=this.props.items.map(function(t,n){return e._renderOption({value:t.value,selected:t.selected,label:t.value},n)});return i.createElement("div",{className:t,ref:"menu"},n)}},{key:"render",value:function(){var e=this.props.items.filter(function(e){return e.selected}),t=e.length>0?e.map(function(e){return e.value}).join(", "):this.props.label;return i.createElement("div",{className:"react-select-box-container react-select-box-multi"},i.createElement("button",{id:this.state.id,onClick:this._toggleOpenClose.bind(this),className:"react-select-box"},i.createElement("div",{className:"react-select-box-label"},t)),this._renderOptionMenu())}}]),t}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(1),a=n(3),s=n(13),o=n(63),l=n(62),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"_getExtractionKeys",value:function(){var e=this;if(void 0===this.props.projectSchema)return!1;var t=this.props.projectSchema[this.props.event_collection];return void 0!==t&&(!(!t.sortedProperties||!t.sortedProperties.length)&&t.sortedProperties.map(function(t){return{value:t,selected:e.props.property_names.indexOf(t)>-1}}))}},{key:"_handlePropertyNamesChange",value:function(e,t,n){var r=this.props.property_names.slice(0);n?r.push(t):r=r.filter(function(e){return e!==t}),this.props.handleChange(e,r)}},{key:"render",value:function(){var e=void 0,t=void 0,n=void 0;return this.props.isEmail&&(e=i.createElement(s,{type:"text",name:"email",label:"Recipient email address",placeholder:"your@email.com",required:"true",value:this.props.email,onChange:this.props.handleChangeWithEvent}),t=i.createElement(l,{latest:this.props.latest,handleChange:this.props.handleChangeWithEvent})),this._getExtractionKeys()&&(n=i.createElement(o,{name:"property_names",label:"Filter extraction properties",handleChange:this._handlePropertyNamesChange.bind(this),items:this._getExtractionKeys()})),i.createElement("div",{className:"field-component"},i.createElement("div",{className:"extraction-options"},i.createElement("label",null,i.createElement("input",{type:"radio",name:"extraction_type",value:"immediate",onChange:this.props.setExtractionType,checked:!this.props.isEmail})," Preview latest ",a.EXRACTION_EVENT_LIMIT," events now"),i.createElement("label",null,i.createElement("input",{type:"radio",name:"extraction_type",value:"email",onChange:this.props.setExtractionType,checked:this.props.isEmail})," Bulk CSV extraction by email"),e,t,n))}}]),t}();e.exports=c},function(e,t,n){"use strict";var r=n(1),i=(n(0),n(14)),a=n(11),s=r.createClass({displayName:"GroupByField",focusOnReactSelect:function(e){if(e&&!this.props.value){var t=this;setTimeout(function(){t.refs.select.refs.input.focus()},100)}},multiGroupToggle:function(){var e=this.props.value.length>1?"remove":"plus",t=this.props.value.length>1?"Remove second property":"Group by a second property";return r.createElement("a",{className:"double-groupby-toggle",href:"#",onClick:this.toggleMultiGroupBy},r.createElement("i",{className:"margin-right-bump icon glyphicon glyphicon-"+e}),t)},secondField:function(){if(this.props.value.length>1)return r.createElement(a,{ref:"select",inputClasses:"group-by form-control margin-bottom-tiny",wrapClasses:"margin-top-tiny",name:"group_by.1",items:this.props.options,handleChange:this.handleChange,value:this.props.value[1]||"",sort:!0})},getGroupBy:function(){return this.props.value},handleChange:function(e,t){var n=this.props.value.slice();n[e.split(".")[1]]=t,this.props.handleChange("group_by",n)},toggleMultiGroupBy:function(e){var t;switch(e.preventDefault(),this.props.value.length){case 0:t=["",""];break;case 1:t=this.props.value.concat([""]);break;case 2:t=this.props.value.slice(0,1)}this.props.handleChange("group_by",t)},shouldBeOpen:function(){return this.props.value&&this.props.value[0]},render:function(){return r.createElement("div",{className:"field-component"},r.createElement(i,{ref:"toggle",name:"Group By",initialOpenState:this.shouldBeOpen(),updateFn:this.props.updateGroupBy,getFn:this.getGroupBy,attrsToStore:"group_by",resetValues:{group_by:[]},toggleCallback:this.focusOnReactSelect},r.createElement(a,{ref:"select",inputClasses:"group-by form-control margin-bottom-tiny",name:"group_by.0",items:this.props.options,handleChange:this.handleChange,value:this.props.value[0]||"",sort:!0}),this.secondField(),this.multiGroupToggle()))}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=(n(0),n(13)),a=r.createClass({displayName:"PercentileField",render:function(){return r.createElement("div",{className:"field-component"},r.createElement(i,{ref:"input",label:"Percentile Value",classes:"percentile",name:"percentile",required:"true",placeholder:"Ex: 50",onChange:this.props.onChange,value:this.props.value||""}))}});e.exports=a},function(e,t,n){"use strict";var r=n(0),i=n(1),a=n(14),s=n(36),o=n(66),l=n(65),c=n(64),p=n(61),u=n(35),h=n(51),d=(n(13),n(50)),m=(n(12),n(3)),f=n(8),v=n(4),y=i.createClass({displayName:"QueryBuilder",handleSelectionWithEvent:function(e){this.handleChange(e.target.name,e.target.value)},handleChange:function(e,t){var n={query:{}};if(r.isPlainObject(e))for(key in e)n.query[key]=e[key];else n.query[e]=t;v.update(this.props.model.id,n)},updateGroupBy:function(e){v.update(this.props.model.id,{query:e})},handleRevertChanges:function(e){e.preventDefault(),v.revertActiveChanges()},shouldShowRevertButton:function(){return m.isPersisted(this.props.model)&&this.props.model.originalModel&&this.props.model.originalModel.query&&!r.isEqual(this.props.model.query,this.props.model.originalModel.query)},buildEventCollectionField:function(){if("funnel"!==this.props.model.query.analysis_type)return i.createElement(s,{name:"event_collection",label:"Event Collection",value:this.props.model.query.event_collection,requiredLabel:!0,onBrowseEvents:this.props.onBrowseEvents,handleChange:this.handleChange,options:this.props.project.eventCollections})},buildExtractionOptions:function(){if("extraction"===this.props.model.query.analysis_type)return i.createElement(c,{latest:this.props.model.query.latest,email:this.props.model.query.email,property_names:this.props.model.query.property_names,event_collection:this.props.model.query.event_collection,projectSchema:this.props.project.schema,isEmail:m.isEmailExtraction(this.props.model),handleChangeWithEvent:this.handleSelectionWithEvent,handleChange:this.handleChange,setExtractionType:this.props.setExtractionType})},buildGroupByField:function(){if(-1===["extraction","funnel"].indexOf(this.props.model.query.analysis_type))return i.createElement(l,{ref:"group-by-field",value:this.props.model.query.group_by,updateGroupBy:this.updateGroupBy,options:this.props.getEventPropertyNames(this.props.model.query.event_collection),handleChange:this.handleChange})},buildTargetPropertyField:function(){if(null!==this.props.model.query.analysis_type&&m.shouldHaveTarget(this.props.model))return i.createElement(s,{name:"target_property",label:"Target Property",inputClasses:["target-property"],requiredLabel:!0,handleChange:this.handleChange,options:this.props.getEventPropertyNames(this.props.model.query.event_collection),value:this.props.model.query.target_property,sort:!0})},buildPercentileField:function(){if("percentile"===this.props.model.query.analysis_type)return i.createElement(o,{ref:"percentile-field",value:this.props.model.query.percentile,onChange:this.handleSelectionWithEvent})},buildIntervalField:function(){if(-1===["extraction","funnel"].indexOf(this.props.model.query.analysis_type))return i.createElement(h,{interval:this.props.model.query.interval,handleChange:this.handleChange})},buildFilters:function(){if("funnel"!==this.props.model.query.analysis_type)return i.createElement("div",{className:"field-component"},i.createElement(a,{ref:"filters-fields-toggle",name:"Filters",toggleCallback:this.props.handleFiltersToggle,fieldsCount:f.validFilters(this.props.model.query.filters).length}))},buildGlobalTimeframePicker:function(){if("funnel"!==this.props.model.query.analysis_type)return i.createElement("div",null,i.createElement(u,{ref:"timeframe",time:this.props.model.query.time,timezone:this.props.model.query.timezone,handleChange:this.handleChange}),i.createElement("hr",{className:"fieldset-divider"}))},buildFunnelBuilder:function(){if("funnel"===this.props.model.query.analysis_type)return i.createElement(p,{modelId:this.props.model.id,steps:this.props.model.query.steps,stepNotices:this.props.stepNotices||[],onBrowseEvents:this.props.onBrowseEvents,eventCollections:this.props.project.eventCollections,getEventPropertyNames:this.props.getEventPropertyNames,getPropertyType:this.props.getPropertyType})},buildClearButton:function(){return this.shouldShowRevertButton()?i.createElement("button",{className:"btn btn-default btn-block",onClick:this.handleRevertChanges,role:"revert-query"},"Revert to original"):i.createElement("button",{type:"reset",role:"clear-query",className:"btn btn-default btn-block",id:"clear-explorer-query",onClick:this.props.handleClearQuery},"Clear")},render:function(){var e;return this.props.model.isValid&&(e=m.getApiQueryUrl(this.props.client,this.props.model)),i.createElement("section",{className:"query-pane-section query-builder"},i.createElement("form",{className:"form query-builder-form",onSubmit:this.props.handleQuerySubmit},i.createElement(s,{name:"analysis_type",label:"Analysis Type",inputClasses:["analysis-type"],options:this.props.analysisTypes,value:this.props.model.query.analysis_type,handleChange:this.handleChange,requiredLabel:!0}),this.buildEventCollectionField(),this.buildFunnelBuilder(),this.buildExtractionOptions(),this.buildTargetPropertyField(),this.buildPercentileField(),this.buildGlobalTimeframePicker(),this.buildGroupByField(),this.buildFilters(),this.buildIntervalField(),i.createElement("div",{className:"button-set-clear-toggle"},this.buildClearButton()),i.createElement(d,{url:e,isValid:this.props.model.isValid})))}});e.exports=y},function(e,t,n){"use strict";var r=n(1),i=n(6),a=r.createClass({displayName:"QueryPaneTabs",toggled:function(e){this.props.toggleCallback(e)},render:function(){var e,t=i({"query-pane-tabs clearfix":!0,"query-pane-persisted":this.props.persisted,"query-pane-new":!this.props.persisted});return this.props.persisted&&(e=r.createElement("li",{role:"presentation",className:"tab-new-query"},r.createElement("a",{ref:"new-query",href:"#",title:"Create a new query",onClick:this.props.createNewQuery},r.createElement("span",{className:"icon glyphicon icon-plus glyphicon-plus"})))),r.createElement("div",{className:t},r.createElement("ul",{className:"nav nav-tabs"},e,r.createElement("li",{role:"presentation",className:"build"===this.props.activePane?"tab-build-query active":"tab-build-query"},r.createElement("a",{ref:"build-tab",href:"#",id:"build-query",title:this.props.persisted?"Edit query":"Create a new query",onClick:this.toggled.bind(this,"build")},this.props.persisted?"Edit query":"Create a new query")),r.createElement("li",{role:"presentation",className:"browse"===this.props.activePane?"tab-browse-queries active":"tab-browse-queries"},r.createElement("a",{ref:"browse-tab",href:"#",id:"browse",title:"Browse saved queries",onClick:this.toggled.bind(this,"browse")},r.createElement("span",{className:"icon glyphicon icon-th-list glyphicon-th-list"}),"Browse"))))}});e.exports=a},function(e,t,n){"use strict";e.exports={exportToCsv:function(e,t){var n,r="data:text/csv;charset=utf-8,";e.forEach(function(t,n){t.forEach(function(e,n){r+=String(e).replace(/,/g,""),t.length>n+1&&(r+=",")}),e.length>n+1&&(r+="\n")}),(n=document.createElement("a")).setAttribute("href",encodeURI(r)),n.setAttribute("download",t),document.body.appendChild(n),n.click()}}},function(e,t){e.exports=l},function(e,t,n){"use strict";n(0);var r=n(1),i=n(6),a=n(70),s=r.createClass({displayName:"CodeSample",render:function(){var e,t=i({"code-sample-panel":!0,hide:this.props.hidden});return e=this.props.isValid?this.props.codeSample:"Your query is not valid right now, so we can't show you a code sample.",r.createElement("div",{className:t},r.createElement("a",{href:"#",className:"close-btn",onClick:this.props.onCloseClick},r.createElement("span",{className:"icon glyphicon glyphicon glyphicon-remove-circle no-margin"})),r.createElement("div",{className:"sample"},r.createElement(a,{className:"html"},e)))}});e.exports=s},function(e,t,n){"use strict";var r=n(1),i=n(26),a=(n(2),r.createClass({displayName:"KeenViz",lastDataTimestamp:null,lastChartType:null,showVisualization:function(){this.props.dataviz.destroy(),this.props.dataviz.data(this.props.model.response).el(this.refs["keen-viz"]).height(300).title(null).type(this.props.model.metadata.visualization.chart_type),"funnel"!==this.props.model.query.analysis_type&&this.props.dataviz.sortGroups("desc"),this.props.dataviz.render(),this.lastDataTimestamp=this.props.model.dataTimestamp,this.lastChartType=this.props.model.metadata.visualization.chart_type},shouldComponentUpdate:function(e,t){return this.lastChartType!==e.model.metadata.visualization.chart_type||(!this.lastDataTimestamp||this.lastDataTimestamp!==e.model.dataTimestamp)},componentDidUpdate:function(){this.showVisualization()},componentDidMount:function(){this.showVisualization()},render:function(){var e;return i.isTableChartType(this.props.model.metadata.visualization.chart_type)&&(e=r.createElement("button",{className:"btn btn-default btn-download-csv",role:"export-table",type:"button",onClick:this.props.exportToCsv},"Download CSV")),r.createElement("div",{ref:"keen-viz-wrapper"},r.createElement("div",{ref:"keen-viz"}),e)}}));e.exports=a},function(e,t,n){"use strict";n(0);var r=n(1),i=n(29),a=n(72),s=n(3),o=n(2).prettyPrintJSON,l=r.createClass({displayName:"Chart",buildVizContent:function(){return this.props.model.response?s.isEmailExtraction(this.props.model)?r.createElement("div",{ref:"notice",className:"big-notice"},r.createElement("div",{className:"alert alert-info"},"Email extractions don't have visualizations.")):s.resultCanBeVisualized(this.props.model)?s.resultCanBeVisualized(this.props.model)?this.buildViz():void this.props.dataviz.destroy():r.createElement("div",{ref:"notice",className:"big-notice"},r.createElement("div",{className:"alert alert-danger"},r.createElement("span",{className:"icon glyphicon glyphicon-info-sign error"}),"Your query returned no results.")):r.createElement("div",{ref:"notice",className:"big-notice"},r.createElement("div",{className:"alert alert-info"},"Let's go exploring!"))},buildViz:function(){var e,t=this.props.model.query.analysis_type+"-viz";if(s.isJSONViz(this.props.model)){var n={result:this.props.model.response.result};this.props.model.response.actors&&(n.actors=this.props.model.response.actors),e=r.createElement("textarea",{ref:"jsonViz",className:"json-view",value:o(n),readOnly:!0})}else e=r.createElement(a,{model:this.props.model,dataviz:this.props.dataviz,exportToCsv:this.props.exportToCsv});return r.createElement("div",{className:t},e)},render:function(){var e=this.buildVizContent();return r.createElement("div",{className:"chart-area"},r.createElement(i,{visible:this.props.model.loading}),e)}});e.exports=l},function(e,t){e.exports=c},function(e,t,n){"use strict";var r=n(0),i=n(1),a=n(6),s=n(74),o=n(15),l=n(27),c=n(73),p=n(71),u=n(7),h=(n(19),n(4)),d=(n(12),n(18)),m=n(3),f=n(26),v=n(2),y=n(69),g=i.createClass({displayName:"Visualization",getInitialState:function(){return{focusDisplayName:!1,focusQueryName:!1,blurTimeout:100}},handleDisplayNameFocus:function(){this.setState({focusDisplayName:!0})},handleDisplayNameBlur:function(){setTimeout(function(){this.setState({focusDisplayName:!1})}.bind(this),this.state.blurTimeout)},handleQueryNameFocus:function(){this.setState({focusQueryName:!0})},handleQueryNameBlur:function(){setTimeout(function(){this.setState({focusQueryName:!1})}.bind(this),this.state.blurTimeout)},noticeClosed:function(){d.clearAll()},changeChartType:function(e){var t={metadata:{visualization:{chart_type:r.find(this.formatChartTypes(),function(t){return t.value===e.target.value}).value}}};h.update(this.props.model.id,t)},formatChartTypes:function(){return r.map(f.getChartTypeOptions(this.props.model.query),function(e){return{name:"JSON"!==e?v.toTitleCase(e).replace("chart",""):e,value:e}})},chartType:function(){return this.props.model.metadata.visualization&&this.props.model.metadata.visualization.chart_type?this.props.model.metadata.visualization.chart_type:r.first(f.getChartTypeOptions(this.props.model.query))},componentWillMount:function(){this.dataviz=new s},componentWillUnmount:function(){u.unregister(this.dispatcherToken)},exportToCsv:function(){var e=this.dataviz.dataset.matrix,t=this.props.model.query_name||"untitled-query";y.exportToCsv(e,t)},render:function(){var e,t,n=a({"chart-detail-bar":!0,"chart-detail-bar-focus":(this.state.focusDisplayName||this.state.focusQueryName)&&null!==this.props.model.response&&!this.props.model.loading,"chart-detail-active":null!==this.props.model.response&&!this.props.model.loading});return this.props.model.isValid&&(t=m.getSdkExample(this.props.model,this.props.client)),this.props.persistence&&(e=i.createElement("div",{className:"chart-title-component"},i.createElement("input",{className:"chart-display-name",type:"text",onChange:this.props.onDisplayNameChange,onBlur:this.handleDisplayNameBlur,onFocus:this.handleDisplayNameFocus,spellCheck:"false",value:this.props.model.metadata.display_name,placeholder:"Give your query a name..."}),i.createElement("div",{className:"chart-query-name"},i.createElement("label",null,"Saved Query Resource Name  ",i.createElement("a",{href:"https://keen.io/docs/api/#saved-queries",target:"_blank"},i.createElement("i",{className:"icon glyphicon glyphicon-question-sign"}))),i.createElement("input",{className:"chart-query-name",type:"text",onChange:this.props.onQueryNameChange,onBlur:this.handleQueryNameBlur,onFocus:this.handleQueryNameFocus,spellCheck:"false",value:this.props.model.query_name})))),i.createElement("div",{className:"visualization"},i.createElement(l,{notice:this.props.notice,closeCallback:this.noticeClosed}),i.createElement("div",{className:"visualization-wrapper"},i.createElement("div",{className:n},e,i.createElement("div",{className:"chart-type-component"},i.createElement(o,{label:!1,ref:"chart-type",name:"chart_type",classes:"chart-type",options:this.formatChartTypes(),handleSelection:this.changeChartType,selectedOption:this.chartType(),emptyOption:!1,disabled:this.props.model.loading}))),i.createElement("div",{className:"chart-component"},i.createElement(c,{model:this.props.model,dataviz:this.dataviz,exportToCsv:this.exportToCsv})),i.createElement(p,{ref:"codesample",codeSample:t,hidden:this.props.appState.codeSampleHidden,onCloseClick:this.props.toggleCodeSample,isValid:this.props.model.isValid})))}});e.exports=g},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(6),s=n(29),o=n(2),l=(n(5),n(28)),c=n(40),p=r.createClass({displayName:"EventBrowser",onKeyUp:function(e){13===e.keyCode&&this.selectEventCollection()},shouldFetchCollectionSchema:function(e){return!!this.props.project.schema[e]&&i.keys(this.props.project.schema[e].properties).length<1},selectEventCollectionClick:function(e){e.preventDefault(),this.props.selectEventCollection(this.state.activeEventCollection)},setActiveEventCollectionClick:function(e){this.setActiveEventCollection(e.target.innerText)},setActiveEventCollection:function(e){e!==this.state.activeEventCollection&&(this.setState({activeEventCollection:e}),"recentEvents"===this.state.activeView?this.fetchRecentEvents(e):this.shouldFetchCollectionSchema(e)&&l.fetchCollectionSchema(this.props.client,e))},modalOpened:function(){"recentEvents"===this.state.activeView?this.fetchRecentEvents():this.shouldFetchCollectionSchema(this.state.activeEventCollection)&&l.fetchCollectionSchema(this.props.client,this.state.activeEventCollection)},fetchRecentEvents:function(e){var t=e||this.state.activeEventCollection,n=this.props.project.schema;i.isEmpty(n)||!n[t]||n[t].recentEvents||n[t].loading||l.fetchRecentEventsForCollection(this.props.client,t)},setSearchText:function(e){this.setState({searchtext:e.target.value})},buildEventCollectionNodes:function(){return i.map(this.props.project.eventCollections,i.bind(function(e){var t=new RegExp(this.state.searchtext,"i"),n=a({active:this.state.activeEventCollection===e,hide:!t.test(e)});return r.createElement("li",{className:n,key:e},r.createElement("a",{href:"#",onClick:this.setActiveEventCollectionClick},e))},this))},getNavClasses:function(e){return this.state.activeView===e?"active":""},shouldShowLoader:function(){return!!this.props.project.schema[this.state.activeEventCollection]&&this.props.project.schema[this.state.activeEventCollection].loading},getRecentEvents:function(){if(!this.props.project.schema[this.state.activeEventCollection])return"";var e=this.props.project.schema[this.state.activeEventCollection].recentEvents;return e?o.prettyPrintJSON(e):""},getSchema:function(){var e=this.props.project.schema,t=this.state.activeEventCollection,n=e[t]?e[t].properties:{},r={};return n&&i.each(Object.keys(n).sort(),function(e,t){r[e]=n[e]}),o.prettyPrintJSON(r)||""},changeActiveView:function(e){e.preventDefault();var t=e.target.name;this.setState({activeView:t}),"recentEvents"===t&&this.fetchRecentEvents()},getInitialState:function(){return{activeView:"schema",activeEventCollection:null,searchtext:""}},componentDidMount:function(){this.state.activeEventCollection||i.isEmpty(this.props.project.schema)||this.setActiveEventCollection(this.props.currentEventCollection||this.props.project.eventCollections[0])},componentWillReceiveProps:function(e){i.isEmpty(e.project.schema)||this.state.activeEventCollection||this.setState({activeEventCollection:e.project.eventCollections[0]}),e.currentEventCollection&&e.currentEventCollection!=this.props.currentEventCollection&&this.setState({activeEventCollection:e.currentEventCollection})},render:function(){var e;e="recentEvents"===this.state.activeView?this.getRecentEvents():this.getSchema();var t=r.createElement("div",{className:"event-browser",onKeyUp:this.handleKeyUp},r.createElement("div",{className:"event-names"},r.createElement("div",{className:"search-box"},r.createElement("input",{type:"text",name:"search",ref:"search-box",placeholder:"Search...",onChange:this.setSearchText,autoComplete:"off"}),r.createElement("span",{className:"glyphicon glyphicon-search icon"})),r.createElement("ul",{className:"nav nav-pills nav-stacked event-names-list",ref:"event-names-list"},this.buildEventCollectionNodes())),r.createElement("div",{className:"event-browser-content"},r.createElement("ul",{className:"nav nav-tabs view-options"},r.createElement("li",{className:this.getNavClasses("schema")},r.createElement("a",{href:"#",name:"schema",onClick:this.changeActiveView},"Schema")),r.createElement("li",{className:this.getNavClasses("recentEvents")},r.createElement("a",{href:"#",name:"recentEvents",onClick:this.changeActiveView},"Recent Events"))),r.createElement("div",{ref:"event-data-wrapper",className:"event-data-wrapper"},r.createElement(s,{ref:"loader",visible:this.shouldShowLoader()}),r.createElement("textarea",{className:"json-view",value:e,readOnly:!0})))),n=r.createElement("div",{className:"alert alert-info no-margin no-collections-alert"},"There is no data to preview. This project does not have any event collections."),i=[{text:"Close"}],a=this.props.project.eventCollections.length>0?"event-browser-modal":"";return this.props.project.eventCollections.length>0&&i.push({text:"Use this Event Collection",iconName:"ok",classes:"btn-primary",onClick:this.selectEventCollectionClick}),r.createElement(c,{ref:"modal",title:"Project Event Collections",size:"large",modalClasses:a,onOpen:this.modalOpened,footerBtns:i},this.props.project.eventCollections.length>0?t:n)}});e.exports=p},function(e,t,n){"use strict";var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),s=n(0),o=n(76),l=n(75),c=n(68),p=n(67),u=n(49),h=n(48),d=n(47),m=n(27),f=n(32),v=n(12),y=n(4),g=n(18),E=n(24),b=n(46),_=n(42),C=n(3),T=(n(8),n(5)),S=(y=n(4),n(31));function x(){return{allPersistedExplorers:v.getAllPersisted(),activeExplorer:v.getActive(),notice:b.getGlobalNotice(),stepNotices:b.getStepNotices(),appState:_.getState()}}var N=a.createClass((i(r={displayName:"Explorer",toggleFields:function(){s.each(this.getFieldsToggleComponents(),function(e){if(e.component){var t=!s.isUndefined(e.value)&&!s.isNull(e.value);e.component.setState({open:t})}})},selectEventCollection:function(e){var t={query:{event_collection:e}};y.update(this.state.activeExplorer.id,t),this.refs["event-browser"].refs.modal.close()},savedQueryClicked:function(e){if(e.preventDefault(),this.state.activeExplorer.loading)g.create({icon:"info-sign",type:"warning",text:"There is already a query in progress. Wait for it to finish loading before selecting a query."});else{y.revertActiveChanges();var t=e.currentTarget.dataset.id;y.setActive(t),y.exec(this.props.client,t)}},removeSavedQueryClicked:function(){confirm("Are you sure you want to delete this saved query?")&&y.destroy(this.props.persistence,this.state.activeExplorer.id)},saveQueryClick:function(e){e.preventDefault(),y.save(this.props.persistence,this.state.activeExplorer.id)},cloneQueryClick:function(e){e.preventDefault(),y.clone(this.state.activeExplorer.id);var t=v.getLast();y.setActive(t.id),this.setState({activeQueryPane:"build"})},createNewQuery:function(e){e.preventDefault(),y.create();var t=v.getLast();y.setActive(t.id),this.setState({activeQueryPane:"build"})},onBrowseEvents:function(e){e.preventDefault(),this.refs["event-browser"].refs.modal.open()},handleFiltersToggle:function(){this.refs["filter-manager"].open()},onDisplayNameChange:function(e){var t={query_name:C.slugify(e.target.value),metadata:{display_name:e.target.value}};y.update(this.state.activeExplorer.id,t)},onQueryNameChange:function(e){var t=e.target.value.replace(/[^\w-]/g,"");y.update(this.state.activeExplorer.id,{query_name:t})},handleRevertChanges:function(e){e.preventDefault(),y.revertActiveChanges()},handleQuerySubmit:function(e){e.preventDefault(),C.isEmailExtraction(this.state.activeExplorer)?y.runEmailExtraction(this.props.client,this.state.activeExplorer.id):y.exec(this.props.client,this.state.activeExplorer.id)},setExtractionType:function(e){var t={query:{email:"email"===e.target.value?"":null}};y.update(this.state.activeExplorer.id,t)},handleClearQuery:function(){var e=this;setTimeout(function(){y.clear(e.state.activeExplorer.id)},0)},handleAddFilter:function(){y.addFilter(this.state.activeExplorer.id)},handleRemoveFilter:function(e){y.removeFilter(this.state.activeExplorer.id,e)},handleFilterChange:function(e,t){y.updateFilter(this.state.activeExplorer.id,e,t)},setVizWrapTop:function(e){this.refs["viz-area"].style.top=e+"px"},getSelectedIndex:function(){return this.state.activeExplorer&&C.isPersisted(this.state.activeExplorer)?s.findIndex(this.state.allPersistedExplorers,{id:this.state.activeExplorer.id}):null},toggleQueryPane:function(e){this.setState({activeQueryPane:e})}},"getSelectedIndex",function(){for(var e,t=0;t<this.state.allPersistedExplorers.length;t++)if(this.state.allPersistedExplorers[t].active){e=t;break}return e}),i(r,"toggleCodeSample",function(e){e.preventDefault(),E.update({codeSampleHidden:!this.state.appState.codeSampleHidden})}),i(r,"getEventPropertyNames",function(e){return T.getEventCollectionPropertyNames(this.props.project,e)}),i(r,"getPropertyType",function(e,t){return T.getPropertyType(this.props.project,e,t)}),i(r,"componentDidMount",function(){v.addChangeListener(this._onChange),b.addChangeListener(this._onChange),_.addChangeListener(this._onChange)}),i(r,"componentWillUnmount",function(){v.removeChangeListener(this._onChange),b.removeChangeListener(this._onChange),_.removeChangeListener(this._onChange),this.state.activeExplorer.query.filters.length||y.addFilter(this.state.activeExplorer.id)}),i(r,"getInitialState",function(){return s.assign(x(),{activeQueryPane:"build"})}),i(r,"render",function(){var e,t,n,r,i;return this.props.persistence&&(n=a.createElement(c,{ref:"query-pane-tabs",activePane:this.state.activeQueryPane,toggleCallback:this.toggleQueryPane,createNewQuery:this.createNewQuery,persisted:C.isPersisted(this.state.activeExplorer)}),-1===["extraction"].indexOf(this.state.activeExplorer.query.analysis_type)&&(e=a.createElement(h,{model:this.state.activeExplorer})),this.state.appState.fetchingPersistedExplorers?r=a.createElement(m,{notice:{icon:"info-sign",text:"Loading saved queries...",type:"info"},closable:!1}):i=a.createElement("h4",{className:"text-center"},"You don't have any saved queries yet.")),t=this.props.persistence&&"build"!==this.state.activeQueryPane?a.createElement(u,{ref:"query-browser",listItems:this.state.allPersistedExplorers,emptyContent:i,notice:r,clickCallback:this.savedQueryClicked,selectedIndex:this.getSelectedIndex()}):a.createElement(p,{ref:"query-builder",model:this.state.activeExplorer,originalModel:this.state.activeExplorerOriginal,client:this.props.client,project:this.props.project,onBrowseEvents:this.onBrowseEvents,handleFiltersToggle:this.handleFiltersToggle,handleRevertChanges:this.handleRevertChanges,handleQuerySubmit:this.handleQuerySubmit,setExtractionType:this.setExtractionType,handleClearQuery:this.handleClearQuery,getEventPropertyNames:this.getEventPropertyNames,getPropertyType:this.getPropertyType,analysisTypes:T.getConstant("ANALYSIS_TYPES"),stepNotices:this.state.stepNotices}),a.createElement("div",{ref:"root"},a.createElement("div",{className:"row"},a.createElement("div",{className:"col-sm-5 col-md-4 explorer-query-builder"},n,t),a.createElement("div",{ref:"viz-area",className:"col-sm-7 col-md-8 explorer-visualization"},a.createElement(l,{notice:this.state.notice,model:this.state.activeExplorer,client:this.props.client,project:this.props.project,persistence:this.props.persistence,onNameChange:this.onNameChange,appState:this.state.appState,toggleCodeSample:this.toggleCodeSample,onQueryNameChange:this.onQueryNameChange,onDisplayNameChange:this.onDisplayNameChange}),e,a.createElement(d,{model:this.state.activeExplorer,handleRevertChanges:this.handleRevertChanges,handleQuerySubmit:this.handleQuerySubmit,saveQueryClick:this.saveQueryClick,removeClick:this.removeSavedQueryClicked,cloneQueryClick:this.cloneQueryClick,persistence:this.props.persistence,codeSampleHidden:this.state.appState.codeSampleHidden,toggleCodeSample:this.toggleCodeSample}))),a.createElement(o,{ref:"event-browser",client:this.props.client,project:this.props.project,currentEventCollection:this.state.activeExplorer.query.event_collection,selectEventCollection:this.selectEventCollection}),a.createElement(f,{ref:"filter-manager",eventCollection:this.state.activeExplorer.query.event_collection,filters:this.state.activeExplorer.query.filters,handleChange:this.handleFilterChange,removeFilter:this.handleRemoveFilter,addFilter:this.handleAddFilter,getPropertyType:this.getPropertyType,propertyNames:this.getEventPropertyNames(this.state.activeExplorer.query.event_collection)}))}),i(r,"_onChange",function(){var e=x();this.setState(e),C.isPersisted(e.activeExplorer)?window.history.pushState({model:e.activeExplorer},"","?saved_query="+e.activeExplorer.id):S.updateSearchString(C.paramsForURL(e.activeExplorer))}),r));e.exports=N},function(e,t,n){"use strict";var r=n(1),i=n(29),a=n(16),s=n(42),o=n(77);function l(){return{project:a.getProject(),app:s.getState()}}var c=r.createClass({displayName:"App",componentDidMount:function(){a.addChangeListener(this._onChange),s.addChangeListener(this._onChange)},componentWillUnmount:function(){a.removeChangeListener(this._onChange),s.addChangeListener(this._onChange)},getInitialState:function(){return l()},render:function(){return r.createElement("div",{id:"keen-explorer"},r.createElement(i,{visible:this.state.project.loading||!this.state.app.ready,additionalClasses:"app-loader"}),r.createElement(o,{project:this.state.project,client:this.props.client,persistence:this.props.persistence}))},_onChange:function(){this.setState(l())}});e.exports=c},function(e,t){e.exports=p},function(e,t,n){"use strict";e.exports={isDST:function(){var e=new Date,t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),r=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<r}}},function(e,t,n){"use strict";var r=n(0),i=n(2),a=n(8),s=n(17),o=["event_collection","actor_property","timeframe","interval","timezone","filters","optional","inverted","with_actors"];e.exports={stepJSON:function(e){var t=r.cloneDeep(e);return r.assign(t,s.getTimeParameters(e.time,e.timezone)),t.filters&&(t.filters=r.map(t.filters,function(e){return a.queryJSON(e,s.getTimezoneOffset(t.timezone))}),r.remove(t.filters,r.isEmpty)),r.each(t,function(e,n){i.isValidQueryValue(e)&&r.includes(o,n)||delete t[n]}),t},formatQueryParams:function(e){if(e.timeframe){var t=s.unpackTimeframeParam(e.timeframe,e.timezone);e.time=t.time,e.timezone=t.timezone}return e.filters&&(e.filters=r.compact(r.map(e.filters,a.formatFilterParams))),e.inverted=!0===e.inverted||"true"===e.inverted,e.optional=!0===e.optional||"true"===e.optional,e.with_actors=!0===e.with_actors||"true"===e.with_actors,e}}},function(e,t){e.exports=u},function(e,t,n){"use strict";var r=n(0);n(3);function i(e){this.config=e}i.prototype.create=function(e,t){var n=r.omit(e,["id"]);this.config.client.put(this.config.client.url("queries","saved",e.query_name)).auth(this.config.client.masterKey()).send(n).then(function(e){t(null,e)}).catch(t)},i.prototype.update=function(e,t){var n=r.omit(e,["id"]);this.config.client.put(this.config.client.url("queries","saved",e.id)).auth(this.config.client.masterKey()).send(n).then(function(e){t(null,e)}).catch(t)},i.prototype.destroy=function(e,t){this.config.client.del(this.config.client.url("queries","saved",e.id)).auth(this.config.client.masterKey()).send().then(function(e){t(null,e)}).catch(function(e){204===e.status?t(null,void 0):t(e,null)})},i.prototype.get=function(e,t){e?this.config.client.get(this.config.client.url("queries","saved",e.id)).auth(this.config.client.masterKey()).send().then(function(e){t(null,e)}).catch(t):this.config.client.get(this.config.client.url("queries","saved")).auth(this.config.client.masterKey()).send().then(function(e){t(null,e)}).catch(t)},e.exports=i},function(e,t,n){"use strict";e.exports={KeenSavedQueries:n(83)}},function(e,t){e.exports=h},function(e,t){e.exports=d},function(e,t,n){"use strict";var r=n(0),i=n(86),a=n(1),s=n(85),o=n(84),l=n(7),c=n(78),p=n(28),u=n(4),h=n(24),d=n(18),m=n(3),f=n(2),v=n(10).run,y=n(25),g=n(12),E=(n(16),n(31));function b(e){var t=f.generateTempId();this.appDispatcher=l,this.config={params:E.getQueryAttributes(),persistence:null},this.el(e),u.create(r.assign(m.formatQueryParams(this.config.params)||{},{id:t})),u.setActive(t),u.validate(t)}b.prototype.client=function(e){return arguments.length?(this.config.client=new i(e),this.config.client.resources({events:"{protocol}://{host}/3.0/projects/{projectId}/events"}),p.create({client:this.config.client}),p.fetchProjectCollections(this.config.client),this):this.config.client},b.prototype.el=function(e){return arguments.length?(e.nodeName?this.config.el=e:document.querySelector?this.config.el=document.querySelector(e):this.config.el=void 0,this):this.config.el},b.prototype.fetch=function(){if(this.config.persistence)if(u.fetchAllPersisted(this.config.persistence,function(e){e&&console.error("There was an error fetching the persisted explorers: ",e.stack)}),this.config.params.saved_query)u.fetchPersisted(this.config.persistence,{id:this.config.params.saved_query},this.doneFetchingSavedQuery.bind(this,this.config.params.saved_query));else{h.update({ready:!0});var e=m.isEmailExtraction(g.getActive());v(y,g.getActive()),!e&&g.getActive().isValid&&u.exec(this.config.client,g.getActive().id)}return this.render(),this},b.prototype.persistence=function(e){return arguments.length?("boolean"==typeof e&&e&&(this.config.client&&this.config.client.masterKey()||console.error("This feature requires a client instance with a masterKey value"),this.config.persistence=new Keen.Explorer.Persistence.KeenSavedQueries({baseUrl:this.config.client.url("queries","saved"),client:this.config.client}),this.config.persistence.config.masterKey=this.config.client.masterKey()),this):this.config.persistence},b.prototype.doneFetchingSavedQuery=function(e,t){if(t)if(404===t.status){d.create({text:"The saved query "+e+" could not be found.",type:"error",icon:"remove-sign"});var n=f.generateTempId();u.create({id:n}),u.setActive(n),h.update({ready:!0})}else console.error("There was a problem fetching a saved query: ",t.stack);else u.setActive(e),u.exec(this.config.client,e),h.update({ready:!0})},b.prototype.render=function(){var e=a.createFactory(c);s.render(e({persistence:this.config.persistence,client:this.config.client}),this.config.el)},window.Keen=window.Keen||{},window.Keen.Explorer=window.Keen.Explorer||{},window.Keen.Explorer.Persistence=o,window.Keen.Explorer.App=e.exports=b},function(e,t,n){e.exports=n(87)}])});
//# sourceMappingURL=keen-explorer.umd.min.js.map