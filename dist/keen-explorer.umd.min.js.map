{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"lodash\"","webpack:///external \"react\"","webpack:///./lib/js/app/utils/FormatUtils.js","webpack:///./lib/js/app/utils/ExplorerUtils.js","webpack:///./lib/js/app/actions/ExplorerActions.js","webpack:///./lib/js/app/utils/ProjectUtils.js","webpack:///external \"classnames\"","webpack:///./lib/js/app/dispatcher/AppDispatcher.js","webpack:///./lib/js/app/utils/FilterUtils.js","webpack:///external \"moment\"","webpack:///./lib/js/app/utils/RunValidations.js","webpack:///./lib/js/app/components/common/react_select.js","webpack:///./lib/js/app/stores/ExplorerStore.js","webpack:///./lib/js/app/components/common/input.js","webpack:///./lib/js/app/components/common/fields_toggle.js","webpack:///./lib/js/app/components/common/select.js","webpack:///./lib/js/app/stores/ProjectStore.js","webpack:///./lib/js/app/utils/TimeframeUtils.js","webpack:///./lib/js/app/actions/NoticeActions.js","webpack:///./lib/js/app/constants/ExplorerConstants.js","webpack:///external \"keymirror\"","webpack:///./node_modules/events/events.js","webpack:///external \"jQuery\"","webpack:///./lib/js/vendor/picker.js","webpack:///./lib/js/app/actions/AppStateActions.js","webpack:///./lib/js/app/validations/ExplorerValidations.js","webpack:///./lib/js/app/utils/ChartTypeUtils.js","webpack:///./lib/js/app/components/common/notice.js","webpack:///./lib/js/app/actions/ProjectActions.js","webpack:///./lib/js/app/components/common/loader.js","webpack:///./lib/js/app/validations/FilterValidations.js","webpack:///./lib/js/app/utils/QueryStringUtils.js","webpack:///./lib/js/app/components/common/filter_manager.js","webpack:///./lib/js/app/components/common/timepicker.js","webpack:///./lib/js/app/components/common/datepicker.js","webpack:///./lib/js/app/components/common/timeframe.js","webpack:///./lib/js/app/components/explorer/query_builder/select_field.js","webpack:///./lib/js/app/constants/NoticeConstants.js","webpack:///./lib/js/app/validations/StepValidations.js","webpack:///./lib/js/app/validations/SharedValidators.js","webpack:///./lib/js/app/components/common/modal.js","webpack:///./lib/js/app/constants/AppStateConstants.js","webpack:///./lib/js/app/stores/AppStateStore.js","webpack:///./lib/js/app/constants/ProjectConstants.js","webpack:///external \"string\"","webpack:///external \"qs\"","webpack:///./lib/js/app/stores/NoticeStore.js","webpack:///./lib/js/app/components/explorer/query_actions.js","webpack:///./lib/js/app/components/explorer/cache_toggle.js","webpack:///./lib/js/app/components/explorer/saved_queries/browse_queries.js","webpack:///./lib/js/app/components/explorer/query_builder/api_url.js","webpack:///./lib/js/app/components/common/interval.js","webpack:///./lib/js/app/components/common/geo.js","webpack:///./lib/js/app/components/common/filter_value_fields.js","webpack:///./lib/js/app/components/common/filter.js","webpack:///./lib/js/app/components/common/timezone.js","webpack:///./lib/js/app/components/common/relative_picker.js","webpack:///./lib/js/vendor/picker.time.js","webpack:///./lib/js/vendor/picker.date.js","webpack:///./lib/js/app/components/common/absolute_picker.js","webpack:///./lib/js/app/components/explorer/query_builder/funnels/funnel_step.js","webpack:///./lib/js/app/components/explorer/query_builder/funnels/funnel_builder.js","webpack:///./lib/js/app/components/explorer/query_builder/latest_field.js","webpack:///./lib/js/app/components/common/react_multi_select.js","webpack:///./lib/js/app/components/explorer/query_builder/extraction_options.js","webpack:///./lib/js/app/components/explorer/query_builder/group_by_field.js","webpack:///./lib/js/app/components/explorer/query_builder/percentile_field.js","webpack:///./lib/js/app/components/explorer/query_builder/index.js","webpack:///./lib/js/app/components/explorer/query_pane_tabs.js","webpack:///./lib/js/app/utils/DataUtils.js","webpack:///external \"react-highlight\"","webpack:///./lib/js/app/components/explorer/visualization/code_sample.js","webpack:///./lib/js/app/components/explorer/visualization/keen_viz.js","webpack:///./lib/js/app/components/explorer/visualization/chart.js","webpack:///external \"keen-dataviz\"","webpack:///./lib/js/app/components/explorer/visualization/index.js","webpack:///./lib/js/app/components/common/event_browser.js","webpack:///./lib/js/app/components/explorer/index.js","webpack:///./lib/js/app/components/app.js","webpack:///external \"flux\"","webpack:///./lib/js/app/utils/DateUtils.js","webpack:///./lib/js/app/utils/FunnelUtils.js","webpack:///external \"json-stable-stringify\"","webpack:///./lib/js/app/modules/persistence/KeenSavedQueries.js","webpack:///./lib/js/app/modules/persistence/persistence.js","webpack:///external \"react-dom\"","webpack:///external \"keen-analysis\"","webpack:///./lib/js/app/app.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__20__","__WEBPACK_EXTERNAL_MODULE__22__","__WEBPACK_EXTERNAL_MODULE__44__","__WEBPACK_EXTERNAL_MODULE__45__","__WEBPACK_EXTERNAL_MODULE__70__","__WEBPACK_EXTERNAL_MODULE__74__","__WEBPACK_EXTERNAL_MODULE__79__","__WEBPACK_EXTERNAL_MODULE__82__","__WEBPACK_EXTERNAL_MODULE__85__","__WEBPACK_EXTERNAL_MODULE__86__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_isWrappedInSingleQuotes","substring","length","toTitleCase","text","replace","txt","charAt","toUpperCase","substr","toLowerCase","singularize","prettyPrintJSON","json","JSON","stringify","undefined","coercionTypeForPropertyType","type","string","num","datetime","list","null","bool","booleanMap","sortItems","items","keyFunc","str","mapped","map","el","index","sort","b","localeCompare","isDateInStrictFormat","dateString","_moment2","default","isValid","convertDateToUTC","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","formatISOTimeNoTimezone","time","format","generateRandomId","prefix","Math","floor","random","toString","generateTempId","isValidQueryValue","_","isArray","isPlainObject","isEmpty","isNullOrUndefined","parseList","isList","parsedList","_string2","parseCSV","val","quotelessVal","parseFloat","String","match","trim","isNull","isUndefined","padLeft","QUERY_PARAMS","ANALYSIS_TYPES_WITHOUT_TARGET","SKIP","mapSkip","collection","fn","without","EXRACTION_EVENT_LIMIT","isPersisted","explorer","id","saveType","shouldHaveTarget","FormatUtils","query","analysis_type","indexOf","isEmailExtraction","email","isImmediateExtraction","mergeResponseWithExplorer","response","newModel","defaultsDeep","formatQueryParams","originalModel","query_name","cloneDeep","queryJSON","params","latest","property_names","assign","TimeframeUtils","getTimeParameters","timezone","filters","filter","FilterUtils","steps","FunnelUtils","stepJSON","each","remove","element","isNumber","includes","toJSON","pick","refresh_rate","cleanJSONforSave","paramsForURL","attrs","omit","runQuery","config","client","then","res","err","error","success","complete","catch","timeframe","unpackedTime","unpackTimeframeParam","group_by","compact","formatFilterParams","active","metadata","display_name","visualization","chart_type","interval","encodeAttribute","attr","encodeURIComponent","getApiQueryUrl","url","queryAttrs","Qs","timeframeType","readKey","resultCanBeVisualized","result","isJSONViz","isTableViz","getSdkExample","dynamicCriteria","paramNames","dynamicConstructorValues","defaultKeenAnalysisOpts","host","protocol","requestType","chartTitle","chartType","step","join","param","space","valueMaybe","append","projectId","slugify","ExplorerActions","AppDispatcher","dispatch","actionType","ExplorerConstants","EXPLORER_CREATE","createBatch","models","EXPLORER_CREATE_BATCH","clone","sourceId","EXPLORER_CLONE","NoticeActions","icon","update","updates","updated_query","project","ProjectStore","getProject","EXPLORER_UPDATE","event_collection","ProjectActions","fetchCollectionSchema","EXPLORER_REMOVE","setActive","EXPLORER_SET_ACTIVE","revertActiveChanges","EXPLORER_REVERT_ACTIVE_CHANGES","clear","EXPLORER_CLEAR","validate","EXPLORER_VALIDATE","addFilter","EXPLORER_ADD_FILTER","removeFilter","EXPLORER_REMOVE_FILTER","updateFilter","EXPLORER_UPDATE_FILTER","addStep","EXPLORER_ADD_STEP","removeStep","EXPLORER_REMOVE_STEP","setStepActive","EXPLORER_SET_STEP_ACTIVE","updateStep","EXPLORER_UPDATE_STEP","moveStep","direction","EXPLORER_MOVE_STEP","addStepFilter","stepIndex","EXPLORER_ADD_STEP_FILTER","removeStepFilter","filterIndex","EXPLORER_REMOVE_STEP_FILTER","updateStepFilter","EXPLORER_UPDATE_STEP_FILTER","exec","ExplorerStore","loading","Error","clearAll","ExplorerUtils","execError","this","execSuccess","EXPLORER_FOUND_INVALID","EXPLORER_QUERY_ERROR","message","EXPLORER_QUERY_SUCCESS","isSaved","ChartTypeUtils","responseSupportsChartType","getChartTypeOptions","dataTimestamp","now","runEmailExtraction","runEmailExtractionSuccess","runEmailExtractionError","fetchAllPersisted","persistence","callback","AppStateActions","fetchingPersistedExplorers","resp","forEach","model","formattedModel","RunValidations","run","ExplorerValidations","console","warn","log","errors","push","fetchPersisted","save","persistenceFunction","EXPLORER_SAVING","saving","explorerJSON","EXPLORER_SAVE_FAIL","errorResp","saveSuccess","updatedModel","EXPLORER_SAVE_SUCCESS","destroy","EXPLORER_DESTROYING","EXPLORER_DESTROY_FAIL","errorMsg","EXPLORER_DESTROY_SUCCESS","CONSTANTS","DEFAULT_TIMEZONE","ANALYSIS_TYPES","ABSOLUTE_INTERVAL_TYPES","RELATIVE_INTERVAL_TYPES","TIMEZONES","offset","dst_offset","FILTER_OPERATORS","canBeCoeredTo","getConstant","eventsUrl","api_key","masterKey","getEventCollectionPropertyNames","schema","sortedProperties","getPropertyType","propertyName","properties","getLocalTimezoneOffset","getTimezoneOffset","getLocalTimezone","isDST","DateUtils","localOffset","zones","zone","_flux","Dispatcher","exists","coercionFunctions","Datetime","property_value","coercedDate","defaultDate","Number","newVal","isNaN","Boolean","Null","Geo","List","yesterday","subtract","startOf","getCoercedValue","coercion_type","getCoercionType","obj","operator","isComplete","isObject","FilterValidations","initList","item","isString","coerceGeoValue","trailingDecimals","validFilters","validatorSet","keys","validator","shouldRun","attribute","msg","ReactSelect","React","createClass","displayName","getDefaultProps","wrapClasses","inputClasses","placeholder","handleBlur","handleChange","handleSelection","getInitialState","focusedItem","limit","initialFocus","selectedItem","visible","visibleItems","resetState","setState","handleClick","e","handleItemFocus","newState","state","refs","scrollpane","scrollTop","props","input","handleFocus","relatedTarget","preventDefault","resetTimeout","setTimeout","blurTimeout","clearTimeout","handleItemSelection","_typeof","selection","focus","handleKeyDown","itemHeight","itemOffset","children","scrollHeight","keyDownCallbacks","ArrowUp","innerHTML","ArrowDown","Enter","childNode","getAttribute","Escape","handleScroll","pane","appendListItems","arr","self","opt","forceUpdate","insertListItems","splice","apply","concat","removeListItems","getItems","count","inputString","search","escapeRegExp","_react2","createElement","className","data-index","onMouseDown","onFocus","aria-live","role","getScrollPane","ref","onScroll","tabIndex","aria-hidden","aria-atomic","aria-label","aria-relevant","render","onClick","onChange","onBlur","onKeyDown","aria-expanded","aria-owns","title","aria-selected","autoComplete","_events","_RunValidations","SHARED_FUNNEL_STEP_PROPERTIES","_explorers","_defaultAttrs","target_property","percentile","ProjectUtils","relativity","amount","sub_timeframe","_defaultStep","actor_property","optional","inverted","with_actors","_validate","_prepareUpdates","mergeWith","objValue","srcValue","firstStep","_migrateToFunnel","activeStep","find","_migrateFromFunnel","_removeInvalidFields","_prepareFilterUpdates","property_name","propertyType","_getDefaultFilterCoercionType","merge","newOp","coercionOptions","coordinates","max_distance_miles","_wrapGroupBy","pull","_create","newAttrs","_update","_setActive","_setStepActive","EventEmitter","unregisterWithDispatcher","unregister","dispatchToken","set","getActive","getAll","getLast","getAllPersisted","emitChange","emit","addChangeListener","on","removeChangeListener","removeListener","register","action","finishAction","source","wasActive","_remove","original","_clear","_addFilter","_removeFilter","_updateFilter","lastStep","_addStep","_removeStep","_updateStep","stepToDisplace","_moveStep","_addStepFilter","_removeStepFilter","_updateStepFilter","_markFirstInvalidStepActive","InputComponent","_onChange","event","target","classes","readonly","componentWillReceiveProps","nextProps","required","label","htmlFor","readOnly","FieldsToggle","handleFieldsToggle","toggledState","attrNames","attrsToStore","attrName","_storedAttrs","getFn","resetVal","resetValues","updateFn","toggleButtonClick","toggle","openState","fieldsCount","open","toggleCallback","componentWillMount","initialOpenState","bodyContent","_classnames2","has-fields-count","fields-toggle","href","SelectComponent","buildOptions","options","option","disabled","wrapValuesInObjects","sortOptions","A","B","buildEmptyOption","emptyOption","setupOptions","newOptions","reference","optionNodes","emptyVal","multiple","selectedValue","selectedOption","_projects","_dispatcherToken","ProjectConstants","PROJECT_CREATE","eventCollections","sortedEventCollections","PROJECT_UPDATE","PROJECT_UPDATE_EVENT_COLLECTION","collectionName","newCollection","_updateEventCollection","has","timeframeBuilders","absolute","start","end","relative","getTimeframe","timeframeBuilder","unpackAbsoluteTimeframe","unpackRelativeTimeframe","formattedValue","z","startVal","endVal","split","NoticeConstants","NOTICE_CREATE","NOTICE_CLEAR_ALL","_keymirror","_keymirror2","EXPLORER_SAVE","EXPLORER_SAVE_NEW","EXPLORER_DESTROY","_maxListeners","isFunction","arg","defaultMaxListeners","setMaxListeners","TypeError","er","handler","len","args","listeners","arguments","context","Array","slice","addListener","listener","newListener","warned","trace","once","fired","g","position","removeAllListeners","listenerCount","evlistener","emitter","Picker","jQuery","$","$window","$document","document","$html","documentElement","PickerConstructor","ELEMENT","NAME","COMPONENT","OPTIONS","IS_DEFAULT_THEME","STATE","abs","SETTINGS","extend","defaults","CLASSES","klasses","klass","$ELEMENT","PickerInstance","P","constructor","$node","methods","autofocus","activeElement","editable","component","$root","node","createWrappedComponent","picker","focusin","removeClass","focused","stopPropagation","mousedown click","is","nodeName","$target","targetData","data","targetDisabled","hasClass","navDisabled","contains","nav","highlight","close","aria","formatSubmit","hiddenName","hiddenPrefix","hiddenSuffix","_hidden","after","prepareElementHidden","addClass","focusToOpen","keycode","keyCode","isKeycodeDelete","test","haspopup","expanded","owns","prepareElement","container","onStart","onRender","stop","onStop","onOpen","onClose","onSet","theme","currentStyle","getComputedStyle","isUsingDefaultTheme","trigger","entireComponent","html","box","nodes","parentNode","removeChild","removeData","off","dontGiveFocus","opened","css","getScrollbarWidth","which","keycodeToMove","click","go","highlighted","giveFocus","thing","thingItem","thingValue","thingIsObject","thingObject","muted","formats","method","internal","thingName","thingMethod","names","namesCount","_trigger","methodList","wrap","frame","holder","height","$outer","appendTo","widthWithoutScroll","offsetWidth","widthWithScroll","ariaSet","setAttribute","group","groupObject","loopObjectScope","nodesList","counter","min","max","wrapper","lead","number","scope","digits","isDate","isInteger","ariaAttr","attrVal","Component","componentData","AppStateConstants","APP_STATE_UPDATE","reset","APP_STATE_RESET","isNotFunnel","percentile_value","SharedValidators","StepValidations","rate","RegExp","_lodash","getQueryDataType","dataType","isInterval","isGroupBy","is2xGroupBy","singular","categorical","cat-interval","cat-ordinal","chronological","cat-chronological","nominal","extraction","isTableChartType","noticeExists","notice","NoticeComponent","closeCallback","closable","closeBtn","fetchProjectCollections","auth","send","events","recentEvents","stack","updateEventCollection","fetchRecentEventsForCollection","eventCollection","LoaderComponent","additionalClasses","isGeoCoercionType","coercionType","valid","getSearchString","location","updateSearchString","queryStringData","urlPath","origin","pathname","history","pushState","getQueryAttributes","parse","depth","FilterManager","propTypes","PropTypes","propertyNames","array","func","isRequired","modal","coordinateIndex","parseInt","buildFilterNodes","filterNodes","_filter2","filterOperators","noFiltersMarkup","filterContent","_modal2","size","modalClosed","modalClasses","footerBtns","iconName","premadeTimes","parseTime","timeStr","dt","NaN","hours","setHours","setMinutes","setSeconds","Timepicker","validateTime","getTime","refValue","_react_select2","Datepicker","handleOnBlur","destroyPicker","minimum","pickadate","datepicker","Timeframe","toggleTimeframeType","currentTarget","dataset","isAbsolute","isRelative","timeframePicker","_absolute_picker2","_relative_picker2","relativeIntervalTypes","data-type","_timezone2","timeframe_type","SelectField","buildBrowseEventsLink","onBrowseEvents","requiredNote","requiredLabel","Modal","closeClick","backdropClick","closest","removeBackdrop","addBackdrop","setLoading","backdropEl","body","appendChild","buildFooter","btnConfig","iconClass","componentDidMount","componentWillUnmount","titleIcon","modalDialogClasses","modal-dialog","modal-lg","titleIconClasses","iconClasses","_appState","codeSampleHidden","ready","_reset","AppStateStore","getState","_notices","tempId","_clearAll","NoticeStore","getGlobalNotice","getStepNotices","waitFor","error_code","QueryActions","runBtnStates","inactive","immediateExtraction","emailExtraction","runButtonText","btnStates","saveMsg","saveBtn","cloneBtn","deleteBtn","actionsSupported","runButtonClasses","btn btn-primary run-query","codeSampleBtnClasses","btn btn-default code-sample-toggle pull-right","saveQueryClick","removeClick","cloneQueryClick","handleQuerySubmit","toggleCodeSample","CacheToggle","setCached","_isCached","settingsOpen","setSettingsOpen","setRefreshRate","setRefreshRateBlur","round","_refreshRateInHours","cached","isCached","parentClasses","cache-toggle","cacheDetailsClasses","cache-details","hide","cacheSettingsClasses","cache-settings","cacheToggleLabel","checked","_minutesAgo","runInformation","run_information","last_run_status","lastRun","last_run_date","utcOffset","moment","duration","diff","humanize","BrowseQueries","clickCallback","buildList","listElements","listItems","listItem","createdAt","selectedIndex","created_date","dateForItem","isCachedText","data-id","fieldChanged","emptyContent","_react","ApiUrl","handleInputSelect","setSelectionRange","handleInputChange","Interval","setInterval","intervalFieldsToggled","toggleState","intervalUpdateFn","intervalGetFn","_fields_toggle2","_select2","dateFormat","timeFormat","pasrseIntoDate","timeString","FilterValueFields","handleChangeWithEvent","setValueState","setDate","setTime","handleDateBlur","getCoercionOptions","getInputPlaceholder","newProps","valueInput","_geo2","_datepicker2","_timepicker2","Filter","buildValueFormGroup","_filter_value_fields2","buildOperatorSelect","buildPropertyNameSelect","getListSyntaxInfo","buildValidationError","filterCompleteAndInvalid","filterClasses","filter-row","filter-complete","filter-incomplete","Timezone","handleTimezoneBlur","handleTimezoneActivated","handleTimezoneChange","RELATIVE_TIMEFRAMES","RelativePicker","setRelativeTime","buildDescriptionCopy","hasRelativeTimeframe","subIntervalCopy","timeAmountPluralSuffix","relativityCopy","singularCurrentInterval","descriptionCopy","_input2","TimePicker","settings","collectionDisabled","clock","elementValue","elementDataValue","valueString","formatString","queue","select","view","disable","enable","shift","fromValue","40","38","39","37","timeChange","$pickerHolder","$viewset","viewset","vendors","prop","vendor","animations","$el","top","clientHeight","clockItem","pop","getHours","getMinutes","HOURS_IN_DAY","hour","normalize","mins","createRange","from","to","createTime","withinRange","range","timeUnit","overlapRanges","one","two","isBelowInterval","nowMinutes","isValueInteger","minTime","measure","MINUTES_IN_HOUR","timeObject","timeToVerify","isDisabledMatch","timeToDisable","minLimit","maxLimit","minutes","isPM","parseValue","parsingObject","toArray","formattingLabel","formatLength","h","hh","H","HH","MINUTES_IN_DAY","itemObject","isTimeExact","isTimeOverlap","flipEnable","deactivate","timesToDisable","disabledItems","unitToDisable","matchFound","activate","timesToEnable","disabledItemsCount","unitToEnable","disabledUnit","isRangeMatched","getFullYear","getMonth","getDate","isOpen","selectedObject","highlightedObject","viewsetObject","disabledCollection","loopedTime","timeMinutes","isSelected","isHighlighted","isDisabled","formatLabel","selected","activedescendant","buttonClear","controls","DatePicker","calendar","isRTL","targetDate","UTC","year","month","selectMonth","selectYear","includeToday","buttonToday","calendarItem","isInfiniteValue","Infinity","day","getUTCDay","createDate","dateUnit","rel","setUTCDate","navigate","targetDateObject","targetYear","targetMonth","isTargetArray","isTargetObject","setUTCHours","dateObject","hasEnabledBeforeTarget","hasEnabledAfterTarget","reachedMin","reachedMax","originalDateObject","isFlippedBase","minLimitObject","maxLimitObject","hasEnabledWeekdays","dateTime","dateToVerify","dateToDisable","firstDay","yyyy","yy","mm","dd","getWordLengthFromCollection","word","getFirstWordLength","ddd","weekdaysShort","dddd","weekdaysFull","mmm","monthsShort","mmmm","monthsFull","isDateExact","isDateOverlap","datesToDisable","datesToEnable","isExactRange","fullCollection","nowObject","tableHead","showWeekdaysFull","DAYS_IN_WEEK","weekdays","createMonthNav","next","labelMonthNext","labelMonthPrev","createMonthLabel","monthsCollection","showMonthsShort","selectMonths","loopedMonth","labelMonthSelect","createYearLabel","focusedYear","numberYears","selectYears","minYear","maxYear","lowestYear","highestYear","availableYears","neededYears","loopedYear","labelYearSelect","header","WEEKS_IN_CALENDAR","rowCounter","shiftDateBy","infocus","outfocus","table","today","buttonClose","footer","navPrev","navNext","AbsolutePicker","endValue","FunnelStep","toggleStepActive","handleFilterChange","handleAddFilter","handleRemoveFilter","canRemove","confirm","handleCheckboxChange","handleFiltersToggle","moveStepUp","moveStepDown","buildStepBody","_notice2","_select_field2","_timeframe2","_filter_manager2","stepWrapperClasses","funnel-step","FunnelsBuilder","modelId","stepNotices","getEventPropertyNames","buildSteps","_funnel_step2","LatestField","ReactMultiSelect","_classCallCheck","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","focusedIndex","interceptEvent","itemVal","_isSelected","_handleOptionChange","_this2","_renderOption","selectedItems","_toggleOpenClose","_renderOptionMenu","ExtractionOptions","projectSchema","shouldBeSelected","newPropertyNames","emailField","latestField","extractionPropertiesFilter","isEmail","_latest_field2","_getExtractionKeys","_react_multi_select2","_handlePropertyNamesChange","setExtractionType","GroupByField","focusOnReactSelect","toggled","multiGroupToggle","toggleMultiGroupBy","secondField","getGroupBy","shouldBeOpen","updateGroupBy","PercentileField","QueryBuilder","handleSelectionWithEvent","handleRevertChanges","shouldShowRevertButton","isEqual","buildEventCollectionField","buildExtractionOptions","_extraction_options2","buildGroupByField","_group_by_field2","buildTargetPropertyField","buildPercentileField","_percentile_field2","buildIntervalField","_interval2","buildFilters","buildGlobalTimeframePicker","buildFunnelBuilder","_funnel_builder2","buildClearButton","handleClearQuery","apiQueryUrl","onSubmit","analysisTypes","_api_url2","QueryPaneTabs","tab","btnNewQuery","queryPaneClasses","query-pane-tabs clearfix","query-pane-persisted","persisted","query-pane-new","createNewQuery","activePane","exportToCsv","filename","htmlElement","csvContent","row","cell","j","encodeURI","CodeSample","panelClasses","code-sample-panel","hidden","codeSample","onCloseClick","_reactHighlight2","KeenViz","lastDataTimestamp","lastChartType","showVisualization","dataviz","sortGroups","shouldComponentUpdate","nextState","componentDidUpdate","exportBtn","_FormatUtils","Chart","buildVizContent","buildViz","chartContent","content","actors","_keen_viz2","vizContent","_loader2","Visualization","focusDisplayName","focusQueryName","handleDisplayNameFocus","handleDisplayNameBlur","handleQueryNameFocus","handleQueryNameBlur","noticeClosed","changeChartType","formatChartTypes","first","KeenDataviz","dispatcherToken","matrix","DataUtils","chartDetailBarClasses","chart-detail-bar","chart-detail-bar-focus","chart-detail-active","onDisplayNameChange","spellCheck","onQueryNameChange","_chart2","_code_sample2","appState","EventBrowser","onKeyUp","selectEventCollection","shouldFetchCollectionSchema","selectEventCollectionClick","activeEventCollection","setActiveEventCollectionClick","setActiveEventCollection","innerText","activeView","fetchRecentEvents","modalOpened","collectionToUse","setSearchText","searchtext","buildEventCollectionNodes","re","getNavClasses","shouldShowLoader","getRecentEvents","getSchema","ordered","changeActiveView","tabName","currentEventCollection","previewData","browseContent","handleKeyUp","alertContent","getStoresState","allPersistedExplorers","activeExplorer","Explorer","_defineProperty","_React$createClass","toggleFields","getFieldsToggleComponents","toggleObj","hasValue","savedQueryClicked","removeSavedQueryClicked","newExplorer","activeQueryPane","setVizWrapTop","style","getSelectedIndex","findIndex","toggleQueryPane","cacheToggle","queryPane","queryPaneTabs","browseListNotice","browseEmptyContent","_query_pane_tabs2","_cache_toggle2","_browse_queries2","_index4","activeExplorerOriginal","_index2","onNameChange","_query_actions2","_event_browser2","QueryStringUtils","getProjectState","app","App","jan","jul","stdOffset","STEP_PARAMS","KeenSavedQueries","put","del","status","_KeenSavedQueries","KeenExplorer","appDispatcher","KeenAnalysis","resources","querySelector","fetch","saved_query","doneFetchingSavedQuery","Persistence","baseUrl","savedQueryName","createFactory","AppComponent","ReactDOM"],"mappings":"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,OACN+hB,QAAS,cACTiV,SAAU,eAGlB9b,EAAA9Y,QAAA+Y,cAAA,OAAKC,UAAU,WACZsb,OAOXr6B,EAAOD,QAAUu5B,qBClHjBh4B,EAAA,YACAA,EAAA,QACAA,EAAA,wDAEA,IAAMs5B,GACJ,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,WACA,YAGF,SAASC,EAAUC,EAASC,GACrBA,IACHA,EAAK,IAAI50B,MAGX,IAAIQ,EAAOm0B,EAAQ3yB,MAAM,6BACzB,IAAKxB,EACH,OAAOq0B,IAET,IAAIC,EAAQlB,SAASpzB,EAAK,GAAI,IAW9B,OAVa,IAATs0B,GAAgBt0B,EAAK,GAIvBs0B,GAAUA,EAAQ,IAAMt0B,EAAK,GAAM,GAAK,EAHxCs0B,EAAQ,EAMVF,EAAGG,SAASD,GACZF,EAAGI,WAAWpB,SAASpzB,EAAK,GAAI,KAAO,GACvCo0B,EAAGK,WAAW,EAAG,GACVL,EAGT,IAAIM,EAAa9gB,UAAMC,aAAYC,YAAA,aAEjC6gB,aAAc,SAAS94B,GAErB,OADaq4B,EAAUr4B,aACD2D,MACpBiN,KAAKqI,UAAWvF,UAAU,KACnB,IAEP9C,KAAKqI,UAAWvF,SAAU,kBACnB,IAIX4E,WAAY,SAAS0K,GACfpS,KAAKkoB,aAAa9V,EAAMC,OAAOjjB,QACjC4Q,KAAK8I,MAAMpB,WAAW0K,EAAMC,OAAO3jB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","file":"keen-explorer.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"react\"), require(\"classnames\"), require(\"moment\"), require(\"keymirror\"), require(\"jQuery\"), require(\"string\"), require(\"qs\"), require(\"react-highlight\"), require(\"keen-dataviz\"), require(\"flux\"), require(\"json-stable-stringify\"), require(\"react-dom\"), require(\"keen-analysis\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"react\", \"classnames\", \"moment\", \"keymirror\", \"jQuery\", \"string\", \"qs\", \"react-highlight\", \"keen-dataviz\", \"flux\", \"json-stable-stringify\", \"react-dom\", \"keen-analysis\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"lodash\"), require(\"react\"), require(\"classnames\"), require(\"moment\"), require(\"keymirror\"), require(\"jQuery\"), require(\"string\"), require(\"qs\"), require(\"react-highlight\"), require(\"keen-dataviz\"), require(\"flux\"), require(\"json-stable-stringify\"), require(\"react-dom\"), require(\"keen-analysis\")) : factory(root[\"lodash\"], root[\"react\"], root[\"classnames\"], root[\"moment\"], root[\"keymirror\"], root[\"jQuery\"], root[\"string\"], root[\"qs\"], root[\"react-highlight\"], root[\"keen-dataviz\"], root[\"flux\"], root[\"json-stable-stringify\"], root[\"react-dom\"], root[\"keen-analysis\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__20__, __WEBPACK_EXTERNAL_MODULE__22__, __WEBPACK_EXTERNAL_MODULE__44__, __WEBPACK_EXTERNAL_MODULE__45__, __WEBPACK_EXTERNAL_MODULE__70__, __WEBPACK_EXTERNAL_MODULE__74__, __WEBPACK_EXTERNAL_MODULE__79__, __WEBPACK_EXTERNAL_MODULE__82__, __WEBPACK_EXTERNAL_MODULE__85__, __WEBPACK_EXTERNAL_MODULE__86__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 88);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","import _ from 'lodash';\nimport S from 'string';\nimport moment from 'moment';\n\nconst ISO_DATE_FORMAT = 'YYYY-MM-DDTHH:mm:ss.SSS';\n\nfunction _isWrappedInSingleQuotes(value) {\n  return value.substring(0, 1) === \"'\" && value.substring(value.length - 1) === \"'\";\n}\n\nfunction _isWrappedInDoubleQuotes(value) {\n  return value.substring(0, 1) === '\"' && value.substring(value.length - 1) === '\"';\n}\n\nmodule.exports = {\n\n  toTitleCase: function(text) {\n    return text.replace(/\\w\\S*/g, function(txt) {\n      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n    });\n  },\n\n  singularize: function(text) {\n    return text.replace(/s+$/, '');\n  },\n\n  prettyPrintJSON: function(json) {\n    return JSON.stringify(json, undefined, 2);\n  },\n\n  coercionTypeForPropertyType: function(type) {\n    var coercionTypeMap = {\n      'string':   'String',\n      'num':      'Number',\n      'datetime': 'Datetime',\n      'list':     'List',\n      'null':     'Null',\n      'bool':     'Boolean'\n    };\n    return coercionTypeMap[type];\n  },\n\n  booleanMap: function(value) {\n    if (value === null || value === '' ) {\n      return '';\n    } else if (value === 'false') {\n      return 'false';\n    } else if (value === 'true') {\n      return 'true';\n    } else {\n      return value ? 'true' : 'false';\n    }\n  },\n\n  sortItems: function(items, keyFunc) {\n    // using a key + mapped indices avoids repeated calls to\n    // possibly-slow key functions.\n    // keyFunc is assumed to return a unicode string.\n    keyFunc = keyFunc || function formatString(str) {\n        return str.replace(/[-_ .]/, '').toLowerCase();\n    };\n\n    var mapped = items.map(function(el, i) {\n      return { index: i, value: keyFunc(el) };\n    })\n\n    mapped.sort(function(a, b) {\n      return a.value.localeCompare(b.value);\n    });\n\n    return mapped.map(function(el){\n      return items[el.index];\n    });\n  },\n\n  /**\n   * Checks whether the given string is in a date format, as defined by:\n   * 'YYYY-MM-DDTHH:mm:ss.SSS'\n   * @return {Boolean} Whether or not the string is in the expected format.\n   */\n  isDateInStrictFormat: function(dateString) {\n    return moment(dateString, ISO_DATE_FORMAT, true).isValid();\n  },\n\n  convertDateToUTC: function(date) {\n    return new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n  },\n\n  formatISOTimeNoTimezone: function(time) {\n    return moment(time).format('YYYY-MM-DDTHH:mm:ss.SSS');\n  },\n\n  generateRandomId: function(prefix) {\n    return (prefix || '') + (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n  },\n\n  generateTempId: function() {\n    return module.exports.generateRandomId('TEMP-');\n  },\n\n  isValidQueryValue: function(value) {\n    if (_.isArray(value)) return value.length > 0;\n    if (value === false) return true;\n    if (value === 0) return true;\n    if (_.isPlainObject(value)) return !_.isEmpty(value);\n    return !module.exports.isNullOrUndefined(value);\n  },\n\n  parseList: function(value) {\n    if (value) {\n      if (!module.exports.isList(value)) return '';\n      var parsedList = S(value).parseCSV();\n\n      parsedList = _.map(parsedList, function(val) {\n        if (_isWrappedInSingleQuotes(val)) {\n          var quotelessVal = val.replace(\"'\", \"\");\n          if (parseFloat(quotelessVal)) {\n            val = parseFloat(quotelessVal);\n          }\n        }\n        return val;\n      });\n\n      return parsedList;\n    } else {\n      return '';\n    }\n  },\n\n  isList: function(str) {\n    var strVal = String(str);\n    var isList = true;\n    var items = strVal.match(/(\".*?\"|[^\",\\s]+)(?=\\s*,|\\s*$)/g);\n    if (items) {\n      for(var i=0; i<items.length; i++) {\n        isList = (_isWrappedInSingleQuotes(items[i].trim()) || _isWrappedInDoubleQuotes(items[i].trim()));\n        if (!isList) break;\n      }\n      return isList;\n    }\n    else {\n      return false;\n    }\n\n  },\n\n  isNullOrUndefined: function(value) {\n    return (_.isNull(value) || _.isUndefined(value));\n  },\n\n  padLeft: function(value) {\n    return value < 10 ? '0' + value : value;\n  }\n\n};\n","import _ from 'lodash';\nimport Qs from 'qs';\nimport stringify from 'json-stable-stringify';\nimport moment from 'moment';\nimport FormatUtils from './FormatUtils';\nimport FunnelUtils from './FunnelUtils';\nimport ProjectUtils from './ProjectUtils';\nimport FilterUtils from './FilterUtils';\nimport TimeframeUtils from './TimeframeUtils';\n\nconst QUERY_PARAMS = [\n  'event_collection',\n  'analysis_type',\n  'target_property',\n  'percentile',\n  'group_by',\n  'timeframe',\n  'interval',\n  'timezone',\n  'filters',\n  'steps',\n  'email',\n  'latest',\n  'property_names'\n];\n\nconst EXRACTION_EVENT_LIMIT = 100;\n\nconst ANALYSIS_TYPES_WITHOUT_TARGET = [\n  'extraction',\n  'count',\n  'funnel'\n];\n\nfunction toCamelcaseName(name) {\n  return name.replace(/_(.)/, function(match, p1) {\n    return p1.toUpperCase();\n  })\n}\n\nfunction toUnderscoreName(name) {\n  return name.replace(/([A-Z])/, function(match, p1) {\n    return '_' + p1.toLowerCase();\n  })\n}\n\nvar SKIP = {}\nfunction mapSkip(collection, fn) {\n  return _.without(_.map(collection, fn), SKIP);\n}\n\nfunction echoIf(valueMaybe, append) {\n  if (valueMaybe) {\n    return append;\n  }\n  return '';\n}\n\nmodule.exports = {\n\n  EXRACTION_EVENT_LIMIT: EXRACTION_EVENT_LIMIT,\n\n  isPersisted: function(explorer) {\n    return explorer.id && !explorer.id.toString().match('TEMP');\n  },\n\n  saveType: function(explorer) {\n    return module.exports.isPersisted(explorer) ? 'update' : 'save';\n  },\n\n  shouldHaveTarget: function(explorer) {\n    return !FormatUtils.isNullOrUndefined(explorer.query.analysis_type) && ANALYSIS_TYPES_WITHOUT_TARGET.indexOf(explorer.query.analysis_type) === -1;\n  },\n\n  isEmailExtraction: function(explorer) {\n    return (explorer.query.analysis_type === 'extraction' && !_.isNull(explorer.query.email));\n  },\n\n  isImmediateExtraction: function(explorer) {\n    return (explorer.query.analysis_type === 'extraction' && _.isNull(explorer.query.email));\n  },\n\n  mergeResponseWithExplorer: function(explorer, response) {\n    var newModel = _.defaultsDeep(module.exports.formatQueryParams(response), explorer);\n    delete newModel.originalModel; // Remove the original model.\n    newModel.id = response.query_name; // Set the ID to the query_name (it's now persisted.)\n    newModel.originalModel = _.cloneDeep(newModel);\n    return newModel;\n  },\n\n  queryJSON: function(explorer) {\n    if (!explorer || !explorer.query) return;\n    var params = _.cloneDeep(explorer.query);\n\n    if (params.analysis_type === 'extraction') {\n      if (FormatUtils.isNullOrUndefined(params.email)) {\n        params.latest = EXRACTION_EVENT_LIMIT;\n      }\n    } else {\n      delete params.latest;\n      delete params.email;\n      delete params.property_names;\n    }\n\n    if (params.analysis_type !== 'funnel') {\n      _.assign(params, TimeframeUtils.getTimeParameters(params.time, params.timezone));\n    }\n\n    // Add filters\n    if (params.filters) {\n      params.filters = _.map(params.filters, function(filter){\n        return FilterUtils.queryJSON(filter);\n      });\n    }\n\n    if (params.steps) {\n      params.steps = _.map(params.steps, FunnelUtils.stepJSON);\n    }\n\n    _.each(params, function(value, key) {\n      // If it's an array, clean out any empty elements\n      if (_.isArray(value)) {\n        _.remove(value, function(element) {\n          return !_.isNumber(element) && _.isEmpty(element);\n        });\n      }\n\n      // Remove any empty properties or ones that shouldn't be\n      // part of the query request.\n      if (!FormatUtils.isValidQueryValue(value) || !_.includes(QUERY_PARAMS, key)) {\n        delete params[key];\n      }\n    });\n\n    return params;\n  },\n\n  toJSON: function(explorer) {\n    var json = _.pick(explorer, [\n      'id',\n      'query_name',\n      'refresh_rate',\n      'metadata'\n    ]);\n    json.query = module.exports.queryJSON(explorer);\n    if (json.query.analysis_type === 'extraction') json.refresh_rate = 0;\n    return json;\n  },\n\n  cleanJSONforSave: function(explorer) {\n    if (explorer.query.analysis_type === 'extraction') {\n      explorer.query.latest = EXRACTION_EVENT_LIMIT;\n      delete explorer.query.email;\n      delete explorer.query.property_names;\n    }\n    return explorer;\n  },\n\n  paramsForURL: function(explorer) {\n    var attrs = module.exports.toJSON(explorer);\n    return _.omit(attrs, [\n      'id',\n      'query_name',\n      'refresh_rate',\n      'metadata'\n    ]);\n  },\n\n  /**\n   * Execures a Keen.js query with the provided client and query params, calling the\n   * callbacks after execution.\n   * @param {Object} config The runQuery configuration\n   * Expected structure:\n   * {\n   *   client:   {The Keen.js client},\n   *   query:    {The object with the query parameters},\n   *   success:  {Success callback function},\n   *   error:    {Error callback function},\n   *   complete: {Complete callback function}\n   * }\n   * @return {undefined}\n   */\n  runQuery: function(config) {\n    config.client\n      .query(config.query.analysis_type, _.omit(config.query, 'analysis_type'))\n      .then(function(res, err){\n        if (err) {\n          config.error(err);\n        }\n        else {\n          config.success(res);\n        }\n        if (config.complete) config.complete(err, res);\n      })\n      .catch(config.error);\n  },\n\n  /**\n   * Takes in an object of query params directly taken from the URL and formats/deconstructs them appropriately to work well\n   * with our data model.\n   * @param  {Object} the raw params from the URL\n   * @return {Object} formatted attributes to be used for creating a new Explorer model.\n   */\n  formatQueryParams: function(params) {\n    if (!params || !params.query) return;\n    if (params.query && params.query.timeframe) {\n      var unpackedTime = TimeframeUtils.unpackTimeframeParam(params.query.timeframe, params.query.timezone);\n      params.query.time = unpackedTime.time;\n      params.query.timezone = unpackedTime.timezone;\n    }\n    if (params.query.group_by && !_.isArray(params.query.group_by)) {\n      params.query.group_by = [params.query.group_by];\n    }\n    if (params.query.filters) {\n      params.query.filters = _.compact(_.map(params.query.filters, FilterUtils.formatFilterParams));\n    }\n    if (params.query.steps) {\n      params.query.steps = _.compact(_.map(params.query.steps, FunnelUtils.formatQueryParams));\n      params.query.steps[params.query.steps.length - 1].active = true\n    }\n    if (!params.id && params.query_name) params.id = params.query_name;\n\n    if (!params.metadata) {\n      params.metadata = {};\n    }\n\n    if (!params.metadata.display_name) params.metadata.display_name = params.query_name;\n    if (!params.metadata.visualization || !params.metadata.visualization.chart_type) {\n      params.metadata.visualization = {};\n      if (params.query.interval) {\n        params.metadata.visualization.chart_type = \"area\";\n      } else {\n        params.metadata.visualization.chart_type = \"metric\";\n      }\n    }\n    return params;\n  },\n\n  encodeAttribute: function(attr) {\n    return encodeURIComponent(JSON.stringify(attr));\n  },\n\n  getApiQueryUrl: function(client, explorer) {\n    var attrs = module.exports.queryJSON(explorer);\n    var url = client.url('queries', attrs.analysis_type);\n\n    var analysisType = attrs.analysis_type;\n    delete attrs.analysis_type;\n\n    var timeframe = _.cloneDeep(attrs.timeframe);\n    delete attrs.timeframe;\n\n    var filters = _.map(attrs.filters, function(filter) {\n      return _.omit(_.cloneDeep(filter), 'coercion_type');\n    });\n    delete attrs.filters;\n\n    var steps;\n    if (attrs.steps && attrs.steps.length) {\n      steps = module.exports.encodeAttribute(attrs.steps);\n      delete attrs.steps;\n    }\n\n    if (attrs.group_by && _.isArray(attrs.group_by) && attrs.group_by.length) {\n      attrs.group_by = (attrs.group_by.length > 1) ? JSON.stringify(attrs.group_by) : attrs.group_by[0];\n    }\n\n    var queryAttrs = Qs.stringify(attrs);\n\n    if (timeframe && TimeframeUtils.timeframeType(explorer.query.time) === 'relative') {\n      queryAttrs += '&timeframe='+ timeframe;\n    }\n    else if (timeframe && TimeframeUtils.timeframeType(explorer.query.time) === 'absolute') {\n      // This is an absolute timeframe, so we need to encode the object in a specific way before sending it, as per keen docs => https://keen.io/docs/data-analysis/timeframe/#absolute-timeframes\n      timeframe = module.exports.encodeAttribute(timeframe);\n      queryAttrs += '&timeframe='+ timeframe;\n    }\n\n    // We need to encode the filters the same way as we encode the absolute timeframe.\n    if (filters) {\n      filters = module.exports.encodeAttribute(filters);\n      queryAttrs += '&filters='+ filters;\n    }\n\n    if (steps) {\n      queryAttrs += '&steps=' + steps;\n    }\n\n    url += '?api_key=' + client.readKey() + '&' + queryAttrs;\n    return url;\n  },\n\n  resultCanBeVisualized: function(explorer) {\n    return (explorer.response && !FormatUtils.isNullOrUndefined(explorer.response.result) && (_.isNumber(explorer.response.result) || (_.isArray(explorer.response.result) && explorer.response.result.length)));\n  },\n\n  isJSONViz: function(explorer) {\n    return explorer.metadata.visualization.chart_type && explorer.metadata.visualization.chart_type.toLowerCase() === 'json';\n  },\n\n  isTableViz: function(explorer) {\n    return explorer.metadata.visualization.chart_type && explorer.metadata.visualization.chart_type.toLowerCase() === 'table';\n  },\n\n  getSdkExample: function(explorer, client) {\n    var defaultKeenAnalysisOpts = {\n          host: 'api.keen.io',\n          protocol: 'https',\n          requestType: 'jsonp'\n        },\n        params = module.exports.queryJSON(explorer),\n        s = stringify,\n        dynamicCriteria,\n        paramNames,\n        dynamicConstructorNames = [\n          'host', 'protocol', 'requestType'\n        ],\n        funnelRootParams = [\n          'event_collection', 'steps'\n        ],\n        dynamicConstructorValues;\n\n    var chartTitle = 'Untitled Chart';\n    if (explorer.metadata && explorer.metadata.display_name) {\n      chartTitle = explorer.metadata.display_name;\n    }\n\n    var chartType = '';\n    if (explorer.metadata && explorer.metadata.visualization\n        && explorer.metadata.visualization.chart_type\n          && explorer.metadata.visualization.chart_type !== 'JSON') {\n            chartType = explorer.metadata.visualization.chart_type;\n    }\n\n    switch(params.analysis_type) {\n      case 'funnel':\n        paramNames = ['steps'];\n        break;\n\n      default:\n        paramNames = ['event_collection', 'filters', 'group_by', 'interval', 'target_property', 'percentile', 'timeframe', 'timezone'];\n        break;\n    }\n\n    if(params.steps) {\n      params.steps = _.map(params.steps, function(step) { return _.omit(step, 'active'); });\n    }\n\n    dynamicConstructorValues = mapSkip(dynamicConstructorNames, function(name) {\n      if (client.config[name] == defaultKeenAnalysisOpts[name]) {\n        return SKIP\n      }\n      return '  ' + name + ': ' + s(client.config[name])\n    }).join(',\\n');\n    // remove coercion from example; it's already been handled elsewhere.\n    _.each(params['filters'], function(filter) { delete filter['coercion_type'] })\n\n    dynamicCriteria = mapSkip(paramNames, function(param) {\n      if (!params[param]) {\n        return SKIP\n      }\n      return '        ' + param + ': ' + s(params[param], { space: 0 })\n    }).join(',\\n');\n\n    var value = [\n      '<!DOCTYPE html>',\n      '<html>',\n      '<head>',\n      '  <meta charset=\"utf-8\">',\n      '  <link href=\"https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.css\" rel=\"stylesheet\" />',\n      '</head>',\n      '<body>',\n      '  <!-- Target DOM Node -->',\n      '  <div id=\"keen-example-chart\"></div>',\n      '  ',\n      '  <script src=\"https://d26b395fwzu5fz.cloudfront.net/keen-analysis-1.2.2.js\" type=\"text/javascript\"></script>',\n      '  <script src=\"https://d26b395fwzu5fz.cloudfront.net/keen-dataviz-1.1.3.js\" type=\"text/javascript\"></script>',\n      '  <script type=\"text/javascript\">',\n      '    var client = new Keen({',\n      '      projectId: ' + s(client.config.projectId) + ',',\n      '      readKey: ' + s(client.config.readKey) + echoIf(dynamicConstructorValues, ','),\n      dynamicConstructorValues,\n      '    });',\n      '    ',\n      '    var chart = new Keen.Dataviz()',\n      '      .el(\"#keen-example-chart\")',\n      '      .height(240)',\n      '      .title(\"' + chartTitle + '\")',\n      '' + chartType ? '      .type(\"' + chartType + '\")' : '',\n      '      .prepare();',\n      '    ',\n      '    client',\n      '      .query(' + s(params.analysis_type) + ', {',\n               dynamicCriteria,\n      '      })',\n      '      .then(function(res) {',\n      '        chart.data(res).render();',\n      '      })',\n      '      .catch(function(err) {',\n      '        chart.message(err.message);',\n      '      });',\n      '    ',\n      '  </script>',\n      '</body>',\n      '</html>'\n    ]\n    return _.filter(value, function(val) { return val !== \"\"; }).join('\\n');\n  },\n\n  slugify: function(name) {\n    return name.toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/ /g, '-');\n  }\n\n};\n","import _ from 'lodash';\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport ExplorerConstants from '../constants/ExplorerConstants';\nimport ExplorerStore from '../stores/ExplorerStore';\nimport ExplorerValidations from '../validations/ExplorerValidations';\nimport NoticeActions from './NoticeActions';\nimport AppStateActions from './AppStateActions';\nimport ProjectActions from './ProjectActions';\nimport ProjectStore from '../stores/ProjectStore';\nimport RunValidations from '../utils/RunValidations';\nimport ExplorerUtils from '../utils/ExplorerUtils';\nimport ChartTypeUtils from '../utils/ChartTypeUtils';\n\nconst ExplorerActions = {\n\n  create: function(attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_CREATE,\n      attrs: attrs\n    });\n  },\n\n  createBatch: function(models) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_CREATE_BATCH,\n      models: models\n    });\n  },\n\n  clone: function(sourceId) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_CLONE,\n      id: sourceId\n    });\n    NoticeActions.create({\n      text: \"Query cloned! Add a name for this cloned query and save it.\",\n      type: 'success',\n      icon: 'check'\n    });\n  },\n\n  update: function(id, updates) {\n    var updated_query, project = ProjectStore.getProject();\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE,\n      id: id,\n      updates: updates\n    });\n    // Fetch schema for selected event collection\n    updated_query = updates.query ? updates.query : updates.response && updates.response.query ? updates.response.query : {};\n    if (updated_query.event_collection) {\n      ProjectActions.fetchCollectionSchema(project.client, updated_query.event_collection);\n    }\n    if (updated_query.steps && updated_query.steps.length) {\n      _.each(updated_query.steps, function(step, i) {\n        ProjectActions.fetchCollectionSchema(project.client, step.event_collection);\n      });\n    }\n  },\n\n  remove: function(id) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_REMOVE,\n      id: id\n    });\n  },\n\n  setActive: function(id) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_SET_ACTIVE,\n      id: id\n    });\n  },\n\n  revertActiveChanges: function() {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_REVERT_ACTIVE_CHANGES\n    });\n  },\n\n  clear: function(id) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_CLEAR,\n      id: id\n    });\n  },\n\n  validate: function(id) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_VALIDATE,\n      id: id\n    });\n  },\n\n  addFilter: function(id, attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_ADD_FILTER,\n      id: id,\n      attrs: attrs\n    });\n  },\n\n  removeFilter: function(id, index) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_REMOVE_FILTER,\n      id: id,\n      index: index\n    });\n  },\n\n  updateFilter: function(id, index, attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE_FILTER,\n      id: id,\n      index: index,\n      attrs: attrs\n    });\n  },\n\n  addStep: function(id, attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_ADD_STEP,\n      id: id,\n      attrs: attrs\n    });\n  },\n\n  removeStep: function(id, index) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_REMOVE_STEP,\n      id: id,\n      index: index\n    });\n  },\n\n  setStepActive: function(id, index) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_SET_STEP_ACTIVE,\n      id: id,\n      index: index\n    });\n  },\n\n  updateStep: function(id, index, attrs) {\n    var project = ProjectStore.getProject();\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE_STEP,\n      id: id,\n      index: index,\n      attrs: attrs\n    });\n\n    // Fetch schema for selected event collection\n    if (attrs.event_collection) {\n      ProjectActions.fetchCollectionSchema(project.client, attrs.event_collection);\n    }\n  },\n\n  moveStep: function(id, index, direction) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_MOVE_STEP,\n      id: id,\n      index: index,\n      direction: direction\n    });\n  },\n\n  addStepFilter: function(id, stepIndex, attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_ADD_STEP_FILTER,\n      id: id,\n      stepIndex: stepIndex,\n      attrs: attrs\n    });\n  },\n\n  removeStepFilter: function(id, stepIndex, filterIndex) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_REMOVE_STEP_FILTER,\n      id: id,\n      stepIndex: stepIndex,\n      filterIndex: filterIndex\n    });\n  },\n\n  updateStepFilter: function(id, stepIndex, filterIndex, attrs) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE_STEP_FILTER,\n      id: id,\n      stepIndex: stepIndex,\n      filterIndex: filterIndex,\n      attrs: attrs\n    });\n  },\n\n  exec: function(client, id) {\n    var explorer = ExplorerStore.get(id);\n    if (explorer.loading) {\n      throw new Error(\"Warning: calling exec when model loading is true. Explorer id: \" + explorer.id);\n    }\n    ExplorerActions.validate(explorer.id);\n    explorer = ExplorerStore.get(id);\n    if (!explorer.isValid) {\n      AppDispatcher.dispatch({\n        actionType: ExplorerConstants.EXPLORER_FOUND_INVALID,\n        id: explorer.id\n      });\n      return;\n    }\n    NoticeActions.clearAll();\n\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE,\n      id: explorer.id,\n      updates: { loading: true }\n    });\n\n    ExplorerUtils.runQuery({\n      client: client,\n      query: ExplorerUtils.queryJSON(explorer),\n      error: module.exports.execError.bind(this, explorer),\n      success: module.exports.execSuccess.bind(this, explorer)\n    });\n  },\n\n  execError: function(explorer, err) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_QUERY_ERROR,\n      query: explorer.query,\n      error: err.message\n    });\n    ExplorerActions.update(explorer.id, { loading: false });\n    NoticeActions.create({ text: err.message, type: 'error' });\n  },\n\n  execSuccess: function (explorer, response) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_QUERY_SUCCESS,\n      query: explorer.query,\n      isSaved: ExplorerUtils.isPersisted(explorer)\n    });\n    NoticeActions.clearAll();\n\n    var updates = {};\n    updates.response = response;\n    // If there is no query object on the response, add one. This is required for Dataviz to properly auto-parse\n    // the result + the query to correctly choose a chart type.\n    if (!response.query) response.query = ExplorerUtils.queryJSON(explorer);\n    updates.loading = false;\n\n    if (!ChartTypeUtils.responseSupportsChartType(response.query, explorer.metadata.visualization.chart_type)) {\n      updates.metadata = _.cloneDeep(explorer.metadata);\n      updates.metadata.visualization.chart_type = ChartTypeUtils.getChartTypeOptions(response.query)[0];\n    }\n\n    updates.dataTimestamp = Date.now();\n    ExplorerActions.update(explorer.id, updates);\n  },\n\n  runEmailExtraction: function(client, id) {\n    ExplorerActions.validate(id);\n    var explorer = ExplorerStore.get(id);\n\n    if (!explorer.isValid) {\n      AppDispatcher.dispatch({\n        actionType: ExplorerConstants.EXPLORER_FOUND_INVALID,\n        id: explorer.id\n      });\n      return;\n    }\n    NoticeActions.clearAll();\n\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE,\n      id: explorer.id,\n      updates: { loading: true }\n    });\n\n    ExplorerUtils.runQuery({\n      client: client,\n      query: ExplorerUtils.queryJSON(explorer),\n      success: module.exports.runEmailExtractionSuccess.bind(this, explorer),\n      error: module.exports.runEmailExtractionError,\n    });\n  },\n\n  runEmailExtractionSuccess: function(explorer, res) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_QUERY_SUCCESS,\n      query: explorer.query,\n      isSaved: ExplorerUtils.isPersisted(explorer)\n    });\n    NoticeActions.clearAll();\n    NoticeActions.create({\n      text: \"Email extraction successfully requested. Check your email (\"+explorer.query.email+\").\",\n      type: 'success',\n      icon: 'check'\n    });\n    ExplorerActions.update(explorer.id, {\n      result: res,\n      loading: false\n    });\n  },\n\n  runEmailExtractionError: function(err) {\n    NoticeActions.create({ text: err.message, type: 'error', icon: 'remove-sign' });\n  },\n\n  fetchAllPersisted: function(persistence, callback) {\n    AppStateActions.update({ fetchingPersistedExplorers: true });\n    persistence.get(null, function(err, resp) {\n      if (err) {\n        callback(err);\n        return;\n      }\n      var models = [];\n      resp.forEach(function(model) {\n        var formattedModel = ExplorerUtils.formatQueryParams(model);\n        RunValidations.run(ExplorerValidations, formattedModel);\n        if (!formattedModel.isValid) {\n          console.warn('A persisted explorer model is invalid: ', formattedModel);\n          console.log('Errors: ', formattedModel.errors);\n        }\n        models.push(formattedModel);\n      });\n      ExplorerActions.createBatch(models);\n      AppStateActions.update({ fetchingPersistedExplorers: false });\n      callback(null);\n    });\n  },\n\n  fetchPersisted: function(persistence, id, callback) {\n    persistence.get(id, function(err, resp) {\n      if (err) {\n        callback(err);\n        return;\n      }\n      var model = ExplorerUtils.formatQueryParams(resp);\n      RunValidations.run(ExplorerValidations, model);\n      if (!model.isValid) {\n        console.warn('A persisted explorer model is invalid: ', model);\n      }\n      ExplorerActions.create(model);\n      callback(null);\n    });\n  },\n\n  save: function(persistence, sourceId) {\n    var saveType = ExplorerUtils.saveType(ExplorerStore.get(sourceId));\n    var persistenceFunction = saveType === 'save' ? 'create' : 'update';\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_SAVING,\n      id: sourceId,\n      saveType: saveType\n    });\n\n    var explorer = ExplorerStore.get(sourceId);\n    if (!explorer.isValid) {\n      AppDispatcher.dispatch({\n        actionType: ExplorerConstants.EXPLORER_FOUND_INVALID,\n        id: explorer.id\n      });\n      module.exports.update(sourceId, { saving: false });\n      return;\n    }\n    NoticeActions.clearAll();\n\n    var explorerJSON = ExplorerUtils.cleanJSONforSave(\n      ExplorerUtils.toJSON(ExplorerStore.get(sourceId))\n    );\n    persistence[persistenceFunction](explorerJSON, function(err, res) {\n      if (err) {\n        AppDispatcher.dispatch({\n          actionType: ExplorerConstants.EXPLORER_SAVE_FAIL,\n          saveType: saveType,\n          id: sourceId,\n          errorResp: err,\n          query: ExplorerStore.get(sourceId).query\n        });\n        return;\n      }\n      module.exports.saveSuccess(sourceId, res);\n    });\n  },\n\n  saveSuccess: function(sourceId, res) {\n    var saveType = ExplorerUtils.saveType(ExplorerStore.get(sourceId));\n    var updatedModel = ExplorerUtils.mergeResponseWithExplorer(ExplorerStore.get(sourceId), res);\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_UPDATE,\n      id: sourceId,\n      updates: updatedModel\n    });\n    // We need to use the new model id below, not the old sourceId passed in.\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_SAVE_SUCCESS,\n      id: updatedModel.id,\n      saveType: saveType,\n      query: updatedModel.query\n    });\n  },\n\n  destroy: function(persistence, sourceId) {\n    AppDispatcher.dispatch({\n      actionType: ExplorerConstants.EXPLORER_DESTROYING\n    });\n    var attrs = _.clone(ExplorerUtils.toJSON(ExplorerStore.get(sourceId)));\n    persistence.destroy(attrs, function(err, res) {\n      if (err) {\n        AppDispatcher.dispatch({\n          actionType: ExplorerConstants.EXPLORER_DESTROY_FAIL,\n          errorMsg: err,\n          query: ExplorerStore.get(sourceId).query\n        });\n      } else {\n        AppDispatcher.dispatch({\n          actionType: ExplorerConstants.EXPLORER_REMOVE,\n          id: sourceId\n        });\n        AppDispatcher.dispatch({\n          actionType: ExplorerConstants.EXPLORER_DESTROY_SUCCESS,\n          query: attrs.query\n        });\n      }\n    });\n  }\n\n};\n\nmodule.exports = ExplorerActions;\n","import _ from 'lodash';\nimport DateUtils from './DateUtils';\nimport FormatUtils from './FormatUtils.js';\n\n// ***********************\n// ** Project Constants\n// ***********************\n\nconst CONSTANTS = {\n\n  DEFAULT_TIMEZONE: 'UTC',\n\n  ANALYSIS_TYPES: [\n    'sum',\n    'count',\n    'count_unique',\n    'minimum',\n    'maximum',\n    'average',\n    'select_unique',\n    'extraction',\n    'percentile',\n    'median',\n    'funnel'\n  ],\n\n  ABSOLUTE_INTERVAL_TYPES: [\n    { name: 'minutely', value: 'minutely' },\n    { name: 'hourly',   value: 'hourly' },\n    { name: 'daily',    value: 'daily' },\n    { name: 'weekly',   value: 'weekly' },\n    { name: 'monthly',  value: 'monthly' },\n    { name: 'yearly',   value: 'yearly' }\n  ],\n\n  RELATIVE_INTERVAL_TYPES: [\n    { name: 'minutes',  value: 'minutes' },\n    { name: 'hours',    value: 'hours' },\n    { name: 'days',     value: 'days' },\n    { name: 'weeks',    value: 'weeks' },\n    { name: 'months',   value: 'months' },\n    { name: 'years',    value: 'years' }\n  ],\n\n  TIMEZONES: [\n    {\n      name: 'UTC',\n      offset: 0,\n      dst_offset: 0\n    },\n    {\n      name: 'Europe/London',\n      offset: 0,\n      dst_offset: 3600\n    },\n    {\n      name: 'Africa/Casablanca',\n      offset: 0,\n      dst_offset: 0\n    },\n    {\n      name: 'Africa/Nairobi',\n      offset: 10800,\n      dst_offset: 0\n    },\n    {\n      name: 'Asia/Dubai',\n      offset: 14400,\n      dst_offset: 0\n    },\n    {\n      name: 'America/Sao_Paulo',\n      offset: -10800,\n      dst_offset: -7200\n    },\n    {\n      name: 'US/Eastern',\n      offset: -18000,\n      dst_offset: -14400\n    },\n    {\n      name: 'US/Central',\n      offset: -21600,\n      dst_offset: -18000\n    },\n    {\n      name: 'US/Mountain',\n      offset: -25200,\n      dst_offset: -21600\n    },\n    {\n      name: 'US/Pacific',\n      offset: -28800,\n      dst_offset: -25200\n    },\n    {\n      name: 'US/Alaska',\n      offset: -32400,\n      dst_offset: -28800\n    },\n    {\n      name: 'US/Hawaii',\n      offset: -36000,\n      dst_offset: -32400\n    },\n    {\n      name: 'Europe/Paris',\n      offset: 3600,\n      dst_offset: 7200\n    },\n    {\n      name: 'Europe/Amsterdam',\n      offset: 3600,\n      dst_offset: 7200\n    },\n    {\n      name: 'Europe/Stockholm',\n      offset: 3600,\n      dst_offset: 7200\n    },\n    {\n      name: 'Europe/Prague',\n      offset: 3600,\n      dst_offset: 7200\n    },\n    {\n      name: 'Asia/Istanbul',\n      offset: 7200,\n      dst_offset: 10800\n    },\n    {\n      name: 'Europe/Istanbul',\n      offset: 7200,\n      dst_offset: 10800\n    },\n    {\n      name: 'Europe/Copenhagen',\n      offset: 3600,\n      dst_offset: 7200\n    },\n    {\n      name: 'Asia/Jakarta',\n      offset: 25200,\n      dst_offset: 25200\n    },\n    {\n      name: 'Asia/Singapore',\n      offset: 28800,\n      dst_offset: 28800\n    },\n    {\n      name: 'Australia/Perth',\n      offset: 28800,\n      dst_offset: 28800\n    },\n    {\n      name: 'Asia/Tokyo',\n      offset: 32400,\n      dst_offset: 32400\n    },\n    {\n      name: 'Australia/Sydney',\n      offset: 36000,\n      dst_offset: 39600\n    },\n    {\n      name: 'Pacific/Auckland',\n      offset: 43200,\n      dst_offset: 46800\n    }\n  ],\n\n  FILTER_OPERATORS: [\n    { name: '\\u003D Equal to',\n      value: 'eq',\n      canBeCoeredTo: ['String', 'Number', 'Null', 'List', 'Boolean', 'Datetime']\n    },\n    { name: '\\u2260 Not equal to',\n      value: 'ne',\n      canBeCoeredTo: ['String', 'Number', 'Null', 'List', 'Boolean', 'Datetime']\n    },\n    { name: '\\u003E Greater than',\n      value: 'gt',\n      canBeCoeredTo: ['Number', 'Null', 'Datetime', 'String']\n    },\n    { name: '\\u2265 Greater than or equal to',\n      value: 'gte',\n      canBeCoeredTo: ['Number', 'Null', 'Datetime', 'String']\n    },\n    { name: '\\u003C Less than',\n      value: 'lt',\n      canBeCoeredTo: ['Number', 'Null', 'Datetime', 'String']\n    },\n    { name: '\\u2264 Less than or equal to',\n      value: 'lte',\n      canBeCoeredTo: ['Number', 'Null', 'Datetime', 'String']\n    },\n    { name: '\\u2203 Property exists',\n      value: 'exists',\n      canBeCoeredTo: ['Boolean']\n    },\n    { name: '\\u229A String contains',\n      value: 'contains',\n      canBeCoeredTo: ['String', 'Null']\n    },\n    { name: '\\u2349 String does not contain',\n      value: 'not_contains',\n      canBeCoeredTo: ['String', 'Null']\n    },\n    { name: '\\u29C7 Matches any value in a list',\n      value: 'in',\n      canBeCoeredTo: ['List']\n    },\n    { name: '\\u2690 Within a given radius (geo)',\n      value: 'within',\n      canBeCoeredTo: ['Geo']\n    }\n  ]\n};\n\nmodule.exports = {\n\n  getConstant: function(name) {\n    return CONSTANTS[name];\n  },\n\n  eventsUrl: function(client) {\n    return client.url('events', {\n      api_key: client.config.masterKey\n    });\n  },\n\n  getEventCollectionPropertyNames: function(project, collection) {\n    return project.schema[collection] ? project.schema[collection].sortedProperties : [];\n  },\n\n  getPropertyType: function(project, collection, propertyName) {\n    var collection = project.schema[collection];\n    return collection ? collection.properties[propertyName] : null;\n  },\n\n  /*\n    Returns the local timezone offset in seconds offset from UTC.\n    This is how the Keen API wants the offset to look. This is also\n    opposite in negative/positive numbers from how Javascript\n    handles it.\n   */\n  getLocalTimezoneOffset: function(date){\n    return (new Date().getTimezoneOffset() * -1) * 60;\n  },\n\n  getLocalTimezone: function(date){\n    var isDST = DateUtils.isDST();\n    var localOffset = module.exports.getLocalTimezoneOffset();\n    var zones = CONSTANTS.TIMEZONES.filter((zone) => {\n      if (isDST) {\n        return zone.dst_offset === localOffset;\n      } else {\n        return zone.offset === localOffset;\n      }\n    });\n    if (!zones.length) return localOffset;\n    return zones[0].name;\n  },\n\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","import { Dispatcher } from 'flux';\n\nmodule.exports = new Dispatcher();\n","import _ from 'lodash';\nimport moment from 'moment';\nimport S from 'string';\nimport TimeframeUtils from './TimeframeUtils';\nimport FormatUtils from './FormatUtils';\nimport FilterValidations from '../validations/FilterValidations';\nimport RunValidations from './RunValidations';\n\nfunction exists(value) {\n  return !_.isNull(value) && !_.isUndefined(value);\n}\n\nfunction toType(obj) {\n  return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase();\n}\n\nfunction isNumeric(num) {\n  return !isNaN(num);\n}\n\nmodule.exports = {\n\n  coercionFunctions: {\n\n    'Datetime': function(filter) {\n      if (typeof filter.property_value === 'string') {\n        var coercedDate = new Date(filter.property_value);\n        if (coercedDate !== null && coercedDate.toString() !== 'Invalid Date') return coercedDate.toString();\n      }\n      return module.exports.defaultDate();\n    },\n\n    'String': function(filter) {\n      if (!exists(filter.property_value)) return null;\n      return filter.property_value.toString();\n    },\n\n    'Number': function(filter) {\n      if (!exists(filter.property_value)) return null;\n      var newVal = parseFloat(filter.property_value);\n      if (typeof newVal === 'undefined' || newVal === null || isNaN(newVal)) {\n        newVal = '';\n      }\n      return newVal;\n    },\n\n    'Boolean': function(filter) {\n      var isFalse = filter.property_value === 'false' || filter.property_value === false;\n      return isFalse ? false : true;\n    },\n\n    'Null': function(filter) {\n      return null;\n    },\n\n    'Geo': function(filter) {\n      return filter.property_value;\n    },\n\n    'List': function(filter) {\n      return filter.property_value;\n    }\n\n  },\n\n  defaultDate: function() {\n    var yesterday = moment().subtract(1, 'days').startOf('day').format('x');\n    return new Date(Number(yesterday));\n  },\n\n  getCoercedValue: function(filter) {\n    if (!module.exports.coercionFunctions[filter.coercion_type]) return null;\n    return module.exports.coercionFunctions[filter.coercion_type](filter);\n  },\n\n  /**\n   * Gets the type for the given filter's property_value. This value should be raw, as in it should not have\n   * been put through getCoercedValue yet. So for example, if it's a list type, it should be a string with the\n   * expected list format: \"\\a word\\\"\", '1', '56', \\\"\"another word\\\"\"\n   * @param  {Object} filter The filter to get the property value coercion type for.\n   * @return {String}        The determined type for the given property value.\n   */\n  getCoercionType: function(filter) {\n    switch (toType(filter.property_value)) {\n      case 'object':\n        return 'Geo';\n        break;\n      case 'string':\n        if (filter.operator === 'exists') return 'Boolean';\n        if (['false', 'true'].indexOf(filter.property_value) > -1) return 'Boolean';\n        if (isNumeric(filter.property_value) && ['contains', 'not_contains'].indexOf(filter.operator) === -1) return 'Number';\n        if (FormatUtils.isDateInStrictFormat(filter.property_value.substring(0, filter.property_value.length-6))) return 'Datetime';\n        if (FormatUtils.isList(filter.property_value)) return 'List';\n        return 'String';\n        break;\n      case 'array':\n        return 'List';\n        break;\n      case 'boolean':\n        return 'Boolean';\n        break;\n      case 'number':\n        return 'Number';\n        break;\n      case 'null':\n        return 'Null';\n        break;\n    }\n  },\n\n  isComplete: function(filter) {\n    var attrs = [\n      'property_name',\n      'property_value',\n      'operator',\n      'coercion_type'\n    ];\n    var complete = true;\n    for(var i=0; i<attrs.length; i++) {\n      var val = filter[attrs[i]];\n      complete = !_.isUndefined(val) && !_.isNull(val);\n      if (_.isObject(val)) complete = !_.isEmpty(val);\n      if (!complete) break;\n    }\n    return complete;\n  },\n\n  queryJSON: function(filter) {\n    RunValidations.run(FilterValidations, filter);\n    if (!filter.isValid) return {};\n\n    var attrs = _.cloneDeep(filter);\n    attrs.property_value = module.exports.getCoercedValue(filter);\n\n    if (attrs.coercion_type === 'Datetime') {\n      attrs.property_value = FormatUtils.formatISOTimeNoTimezone(attrs.property_value);\n    }\n    if (attrs.coercion_type === 'List') {\n      attrs.property_value = FormatUtils.parseList(attrs.property_value);\n    }\n\n    return _.pick(attrs, ['property_name', 'operator', 'property_value']);\n  },\n\n  initList: function(filter) {\n    var newVal = \"\";\n    _.each(filter.property_value, function(item, index){\n      if (_.isString(item)) newVal += '\"' + item + '\"';\n      if (_.isNumber(item)) newVal += \"'\" + item + \"'\";\n      if (index !== filter.property_value.length - 1) newVal += ', ';\n    });\n    filter.property_value = newVal;\n    return filter;\n  },\n\n  formatFilterParams: function(filter) {\n    filter.coercion_type = module.exports.getCoercionType(filter);\n    if (filter.coercion_type === 'List') {\n      filter = _.assign({}, filter, module.exports.initList(filter));\n    }\n    filter.property_value = module.exports.getCoercedValue(filter);\n    if (filter.coercion_type === 'Datetime') {\n      filter.property_value = FormatUtils.convertDateToUTC(new Date(filter.property_value));\n    }\n    return filter;\n  },\n\n  coerceGeoValue: function(value) {\n    var trailingDecimals = value.match(/\\.+$/);\n    if (value === '-' || (trailingDecimals && trailingDecimals.length)) {\n      return value;\n    } else {\n      return parseFloat(value) || 0;\n    }\n  },\n\n  validFilters: function(filters) {\n    return _.filter(filters, function(filter) {\n      RunValidations.run(FilterValidations, filter)\n      return filter.isValid;\n    });\n  }\n\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = {\n\n  run: function(validatorSet, model) {\n    var keys = Object.keys(validatorSet);\n    model.isValid = true;\n    model.errors = [];\n\n    for (var i=0; i<keys.length; i++) {\n      var validator = validatorSet[keys[i]];\n\n      // Check if this validator should be run at all.\n      if (validator.shouldRun && !validator.shouldRun(model)) continue;\n\n      var result = validator.validate(model);\n\n      // Validator returned true. This attribute is valid. Move on.\n      if (result === true) continue;\n\n      // There is an error. Set the model as invalid and set the errors on the model.\n      model.isValid = false;\n      model.errors.push({\n        attribute: keys[i],\n        msg: (result === false) ? validator.msg : result\n      });\n    }\n  }\n\n};\n","import React from 'react';\nimport _ from 'lodash';\n\n/* TODO:\n[ ] resting state (selection/empty)\n[x] activate component on `up/down` key, or by typing\n[x] 'esc' key to close w/out changing selection (webkit pattern)\n[~] accessibility\n    [x] announce/surface options to screen readers\n    [x] input field should instruct further key controls\n[x] snag: re-activating w/ prior selection -> only see that selection\n    - should we show all on first (re-)focus?\n    - only filter list when typing? track interaction states?\n[ ] snag: long strings wrap and throw off scroll-sync\n    - truncrate at calc'd length? maybe truncate the middle? 'beginning.ah...ok.end'\n    - crazy: 'walk' the truncatation of the 'active' li (from right to left) after a 1-2sec 'pause'\n    - can we use 'left/right' key actions to change truncation? maybe w/ CSS?\n[ ] snag: mobile. perhaps we should revert to native elements, to avoid input+list+keyboard hysteria?\n[ ] bug: Escape event listener bubbles up and closes the modal.\n[ ] bug: With breaks on selects inside filter manager modal.\n*/\n\nconst ReactSelect = React.createClass({\n\n  getDefaultProps: function() {\n    return {\n      items: [],\n      wrapClasses: '',\n      inputClasses: '',\n      placeholder: '',\n      handleBlur: function(){},\n      handleChange: function(){},\n      handleSelection: function(){}\n    };\n  },\n\n  getInitialState: function() {\n    return {\n      focusedItem: '',\n      limit: 30,\n      initialFocus: false,\n      selectedItem: 0,\n      visible: false,\n      visibleItems: 0\n    };\n  },\n\n  resetState: function(){\n    this.setState({\n      focusedItem: '',\n      limit: 30,\n      selectedItem: 0,\n      visible: false,\n      initialFocus: true\n    });\n  },\n\n  handleClick: function(e) {\n    this.setState({ visible: true });\n    this.handleItemFocus();\n  },\n\n  handleChange: function(e) {\n    var newState = {\n      initialFocus: false\n    };\n    if (this.state.visible) {\n      newState['limit'] = 30;\n      newState['selectedItem'] = 0;\n      this.refs.scrollpane.scrollTop = 0;\n    }\n    else {\n      newState['visible'] = true;\n    }\n    this.setState(newState);\n    this.props.handleChange(\n      this.props.name,\n      this.refs.input.value\n    );\n  },\n\n  handleFocus: function(e) {\n    if (!this.state.visible) {\n      this.setState({\n        initialFocus: true,\n        visible: true\n      });\n    }\n    else {\n      this.resetState();\n    }\n  },\n\n  handleBlur: function(e) {\n    if (this.refs.scrollpane && e.relatedTarget !== this.refs.scrollpane) {\n      if (!this.state.visible) e.preventDefault();\n      this.resetTimeout = setTimeout(this.resetState, 100);\n      this.blurTimeout = setTimeout(this.props.handleBlur(e), 100);\n    }\n  },\n\n  handleItemFocus: function() {\n    clearTimeout(this.resetTimeout);\n    clearTimeout(this.blurTimeout);\n  },\n\n  handleItemSelection: function(index) {\n    if (typeof this.props.items[index]) {\n      var selection = String(this.props.items[index]);\n      this.setState({ initialFocus: false });\n      this.refs.input.focus();\n      this.resetState();\n      this.props.handleChange(this.props.name, selection);\n      this.props.handleSelection(this.props.name, selection);\n    }\n  },\n\n  handleKeyDown: function(e) {\n    var itemHeight, itemOffset;\n\n    if (e.key === \"Tab\" || e.key === \"Shift\") return;\n\n    this.setState({ visible: true });\n\n    if (this.refs.list && this.state.selectedItem) {\n      itemHeight = this.refs.list.children[this.state.selectedItem].scrollHeight + 1;\n      itemOffset = itemHeight * this.state.selectedItem;\n    }\n\n    if (this.keyDownCallbacks[e.key]) {\n      this.keyDownCallbacks[e.key].call(this, e, itemHeight, itemOffset);\n    }\n  },\n\n  keyDownCallbacks: {\n\n    \"ArrowUp\": function(e, itemHeight, itemOffset) {\n      var newState = {};\n      var list = this.refs.list;\n\n      if (this.state.selectedItem-1 >= 0) {\n        newState['selectedItem'] = this.state.selectedItem-1;\n        if (list) {\n          newState['focusedItem'] = list.children[this.state.selectedItem-1].innerHTML;\n        }\n      }\n      else {\n        newState['selectedItem'] = 0;\n        if (list) {\n          newState['focusedItem'] = list.children[0].innerHTML;\n        }\n      }\n      this.setState(newState);\n\n      if (list && itemOffset > itemHeight*3) {\n        this.refs.scrollpane.scrollTop -= itemHeight;\n      }\n      e.preventDefault();\n    },\n\n    \"ArrowDown\": function(e, itemHeight, itemOffset) {\n      var newState = {};\n      var list = this.refs.list;\n\n      if (this.state.selectedItem+1 < this.visibleItems) {\n        newState['selectedItem'] = this.state.selectedItem+1;\n        if (list) {\n          newState['focusedItem'] = this.refs.list.children[this.state.selectedItem+1].innerHTML;\n        }\n      }\n      else {\n        newState['selectedItem'] = this.visibleItems-1;\n        if (list) {\n          newState['focusedItem'] = list.children[this.visibleItems-1].innerHTML;\n        }\n      }\n      this.setState(newState);\n\n      if (list && itemOffset > itemHeight*3) {\n        this.refs.scrollpane.scrollTop += itemHeight;\n      }\n      e.preventDefault();\n    },\n\n    \"Enter\": function(e, itemHeight, itemOffset) {\n      var list = this.refs.list;\n      if (list) {\n        var childNode = list.children[this.state.selectedItem];\n        if (childNode) this.handleItemSelection( childNode.getAttribute('data-index') );\n      }\n      else {\n        this.resetState();\n      }\n      e.preventDefault();\n    },\n\n    \"Escape\": function(e, itemHeight, itemOffset) {\n      this.handleBlur(e);\n      e.preventDefault();\n    }\n\n  },\n\n  handleScroll: function(e) {\n    var pane = this.refs.scrollpane;\n    var diff = pane.scrollHeight - pane.scrollTop - 200;\n      // -200 offset is a hack to account for fixed height\n    if (diff < 50) {\n      this.setState({ limit: this.state.limit + 30 });\n    }\n  },\n\n  // Data management\n\n  appendListItems: function(arr) {\n    var self = this;\n    arr.forEach(function(opt, i){\n      self.props.items.push(opt);\n    });\n    this.forceUpdate();\n    return this;\n  },\n\n  insertListItems: function(index, arr){\n    this.props.items.splice.apply(this.props.items, [index,0].concat(arr));\n    this.forceUpdate();\n    return this;\n  },\n\n  removeListItems: function(){\n    this.props.items = [];\n    this.forceUpdate();\n    return this;\n  },\n\n  getItems: function() {\n    var self = this;\n    var count = 0;\n    this.visibleItems = 0;\n    var inputString = this.state.initialFocus ? '' : (this.props.value || '');\n    return this.props.items.map(function(item, index) {\n      // If input is present, skip items that don't match\n      if (inputString.length > 0 && String(item).toLowerCase().search(_.escapeRegExp(inputString).toLowerCase()) < 0) return;\n\n      // Simple result limiting\n      count++; if (count > self.state.limit) return;\n      self.visibleItems = self.visibleItems+1;\n      return (\n        <li className={self.state.selectedItem === count-1 ? \"react-select-item active\" : \"react-select-item\" }\n          key={index}\n          data-index={index}\n          onMouseDown={self.handleItemSelection.bind(self, index)}\n          onFocus={self.handleItemFocus.bind(self, index)}\n          aria-live=\"polite\"\n          role=\"option\">\n            {item}\n        </li>\n      );\n    });\n  },\n\n  getScrollPane: function(items) {\n    // Hide scrollpane unless active\n    if (this.state.visible) {\n      return (\n        <div\n        ref=\"scrollpane\"\n        className=\"react-select-scrollpane\"\n        onScroll={this.handleScroll}\n        tabIndex=\"-1\"\n        aria-hidden=\"false\">\n          <div className=\"react-select-aria-notice\" aria-live=\"assertive\">\n            {this.state.focusedItem || ''}\n          </div>\n          <ul ref=\"list\" className=\"react-select-list\"\n              aria-atomic=\"false\"\n              aria-label=\"Begin typing to filter options, or key up or down to browse available options\"\n              aria-live=\"assertive\"\n              aria-relevant=\"additions\"\n              role=\"listbox\"\n              id={this.props.id + '-scrollpane'}>\n            {items}\n          </ul>\n        </div>\n      );\n    }\n  },\n\n  // React methods\n\n  render: function(){\n    var items = this.getItems();\n    var scrollpane = this.getScrollPane(items);\n\n    var wrapClasses = 'react-select';\n    if (this.props.wrapClasses) {\n      wrapClasses = wrapClasses + ' ' + this.props.wrapClasses;\n    }\n    if (this.state.visible) {\n      wrapClasses = wrapClasses + ' visible';\n    }\n\n    var inputClasses = 'react-select-input';\n    if (this.props.inputClasses) {\n      inputClasses = inputClasses + ' ' + this.props.inputClasses;\n    }\n\n    return (\n      <div ref=\"wrapper\" className={wrapClasses}>\n        <input ref=\"input\"\n               name={this.props.name}\n               className={inputClasses}\n               value={this.props.value || \"\"}\n               placeholder={this.props.placeholder}\n               onClick={this.handleClick}\n               onChange={this.handleChange}\n               onFocus={this.handleFocus}\n               onBlur={this.handleBlur}\n               onKeyDown={this.handleKeyDown}\n               aria-expanded={this.state.visible}\n               aria-owns={this.props.id + '-scrollpane'}\n               aria-label={this.props.title || \"Select value\"}\n               aria-selected={(this.props.value && this.props.value.length) ? true : undefined}\n               aria-live=\"polite\"\n               autoComplete=\"off\" />\n        {scrollpane}\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = ReactSelect;\n","/* ExplorerStore */\n\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport { EventEmitter } from 'events';\nimport _ from 'lodash';\nimport ExplorerConstants from '../constants/ExplorerConstants';\nimport FormatUtils from '../utils/FormatUtils';\nimport ExplorerUtils from '../utils/ExplorerUtils';\nimport FilterUtils from '../utils/FilterUtils';\nimport ProjectUtils from '../utils/ProjectUtils';\nimport ProjectStore from './ProjectStore';\n\nimport { run as RunValidations } from '../utils/RunValidations.js';\nimport ExplorerValidations from '../validations/ExplorerValidations.js';\nimport FilterValidations from '../validations/FilterValidations.js';\nimport StepValidations from '../validations/StepValidations.js';\n\nconst CHANGE_EVENT = 'change';\nconst SHARED_FUNNEL_STEP_PROPERTIES = ['event_collection', 'time', 'timezone', 'filters'];\n\nlet _explorers = {};\n\nfunction _defaultAttrs() {\n  return {\n    id: FormatUtils.generateTempId(),\n    query_name: null,\n    active: false,\n    saving: false,\n    dataTimestamp: null,\n    response: null,\n    loading: false,\n    isValid: true,\n    errors: [],\n    refresh_rate: 0,\n    query: {\n      event_collection: null,\n      analysis_type: null,\n      target_property: null,\n      percentile: null,\n      group_by: [],\n      interval: null,\n      timezone: ProjectUtils.getLocalTimezone(),\n      filters: [],\n      steps: [],\n      email: null,\n      latest: null,\n      property_names: [],\n      time: {\n        relativity: 'this',\n        amount: 14,\n        sub_timeframe: 'days'\n      }\n    },\n    metadata: _defaultMetadata()\n  };\n}\n\nfunction _defaultMetadata() {\n  return {\n    display_name: null,\n    visualization: {\n      chart_type: null\n    }\n  };\n}\n\nfunction _defaultFilter() {\n  return {\n    property_name: null,\n    property_value: null,\n    operator: 'eq',\n    coercion_type: 'String',\n    isValid: true,\n    errors: []\n  };\n}\n\nfunction _defaultGeoFilter() {\n  return {\n    coordinates: [],\n    max_distance_miles: null\n  };\n}\n\nfunction _defaultStep() {\n  return {\n    event_collection: null,\n    actor_property: null,\n    time: {\n      relativity: 'this',\n      amount: 14,\n      sub_timeframe: 'days'\n    },\n    timezone: ProjectUtils.getLocalTimezone(),\n    filters: [],\n    optional: false,\n    inverted: false,\n    with_actors: false,\n    active: false,\n    isValid: true,\n    errors: []\n  }\n}\n\n\nfunction _validate(id) {\n  RunValidations(ExplorerValidations, _explorers[id]);\n}\n\n/**\n * Get the default coercion type for this filter based off the filter's property_name's set type\n * in the project schema.\n * @param  {Object} explorer  The explorer model that the filter belongs to\n * @param  {Object} filter    The filter\n * @return {String}           The default coercion type\n */\nfunction _getDefaultFilterCoercionType(explorer, filter) {\n  var propertyType = ProjectUtils.getPropertyType(\n    ProjectStore.getProject(),\n    explorer.query.event_collection,\n    filter.property_name);\n  var targetCoercionType = FormatUtils.coercionTypeForPropertyType(propertyType);\n  return targetCoercionType;\n}\n\n/**\n * Runs through the changeset and moves data around if necessary\n * @param {Object} explorer   The explorer model that is being updated\n * @param {Object} updates    The updated explorer model\n * @return {Object}           The new set of updates\n */\nfunction _prepareUpdates(explorer, updates) {\n  // TODO: We're assigning the response object directly onto the model so we\n  // don't have to loop through the (sometimes) massive response object.\n  function customizer(objValue, srcValue, key) {\n    if (_.isArray(objValue)) {\n      return srcValue;\n    } else if (key === 'time' && _.isPlainObject(objValue)) {\n      return srcValue;\n    }\n  }\n  var newModel = _.mergeWith({}, explorer, _.omit(updates, 'response'), customizer);\n  if (updates.response) newModel.response = updates.response;\n\n  // Check if the event collection has changed. Clear the property names if so.\n  if (updates.query && updates.query.event_collection && updates.query.event_collection !== explorer.query.event_collection) {\n    newModel.query.property_names = [];\n  }\n\n  if(newModel.query.analysis_type === 'funnel' && explorer.query.analysis_type !== 'funnel') {\n    newModel = _migrateToFunnel(explorer, newModel);\n  } else if(newModel.query.analysis_type !== 'funnel' && explorer.query.analysis_type === 'funnel') {\n    newModel = _migrateFromFunnel(explorer, newModel);\n  }\n  newModel = _removeInvalidFields(newModel);\n\n  return newModel;\n}\n\n/**\n * If the query got changed to a funnel, move the step-specific parameters to a steps object.\n * @param {Object} explorer The explorer model that is being updated\n * @param {Object} newModel The updated explorer model\n * @return {Object}         The new set of updates\n */\nfunction _migrateToFunnel(explorer, newModel) {\n  var firstStep = _defaultStep();\n  firstStep.active = true;\n\n  _.each(SHARED_FUNNEL_STEP_PROPERTIES, function (key) {\n    if(!_.isUndefined(explorer.query[key]) && !_.isNull(explorer.query[key])) {\n      firstStep[key] = explorer.query[key]\n    }\n\n    newModel.query[key] = (key === 'filters') ? [] : null;\n  });\n\n  if(!_.isUndefined(explorer.query.target_property) && !_.isNull(explorer.query.target_property)) {\n    firstStep.actor_property = explorer.query.target_property;\n    explorer.query.target_property = null;\n  }\n\n  newModel.query.steps = [firstStep];\n\n  return newModel;\n}\n\n/**\n * If the query got changed from a funnel, move the applicable parameters out to the root query\n * @param {Object} explorer The explorer model that is being updated\n * @param {Object} newModel The updated explorer model\n * @return {Object}         The new set of updates\n */\nfunction _migrateFromFunnel(explorer, newModel) {\n  if (explorer.query.steps.length < 1) return newModel;\n  var activeStep = _.find(explorer.query.steps, { active: true }) || explorer.query.steps[0];\n\n  _.each(SHARED_FUNNEL_STEP_PROPERTIES, function (key) {\n    if (!_.isUndefined(activeStep[key])) {\n      newModel.query[key] = activeStep[key];\n    }\n  });\n\n  if (!_.isNull(activeStep.actor_property) && ExplorerUtils.shouldHaveTarget(newModel)) {\n    newModel.query.target_property = activeStep.actor_property;\n  }\n\n  newModel.query.steps = [];\n\n  return newModel;\n}\n\n/**\n * Removes fields from the query that aren't valid given the new analysis type.\n * @param {Object} newModel   The updated explorer model\n * @return {Object}           The new set of updates\n */\nfunction _removeInvalidFields(newModel) {\n  if (!ExplorerUtils.isEmailExtraction(newModel)) {\n    newModel.query.latest = null;\n    newModel.query.email = null;\n  }\n  if (newModel.query.analysis_type === 'extraction') {\n    newModel.query.group_by = null;\n    newModel.query.interval = null;\n  }\n  if (newModel.query.analysis_type !== 'extraction') {\n    newModel.query.latest = null;\n  }\n  if (newModel.query.analysis_type !== 'percentile') {\n    newModel.query.percentile = null;\n  }\n  if (_.includes(['count', 'extraction', 'funnel'], newModel.query.analysis_type)) {\n    newModel.query.target_property = null;\n  }\n  if (newModel.query.analysis_type !== 'funnel') {\n    newModel.query.steps = [];\n  }\n  if(newModel.query.analysis_type === 'funnel') {\n    newModel.query.filters = [];\n    newModel.query.time = null;\n    newModel.query.timezone = null;\n    newModel.query.group_by = null;\n    newModel.query.timeframe = null;\n    newModel.query.interval = null;\n  }\n  return newModel;\n}\n\n/**\n * Looks at updates about to be made to a filter and performs a series of operations to\n * change the filter values depending on the coercion_type, operator and type of property_value.\n * @param  {Object} explorer  The explorer model that owns the filter to be updated\n * @param  {Object} filter    The filter to be updated\n * @param  {Object} updates   The updates to be made to the filter\n * @return {Object}           The updated version of the filter after the changes have been made to it.\n */\nfunction _prepareFilterUpdates(explorer, filter, updates) {\n  if (updates.property_name && updates.property_name !== filter.property_name) {\n    if (filter.operator === 'exists') {\n      updates.coercion_type = 'Boolean';\n    } else {\n      // No need to update the operator - we allow any operator for any property type right now.\n      updates.coercion_type = _getDefaultFilterCoercionType(explorer, _.merge({}, filter, updates));\n    }\n  }\n  else if (updates.operator && updates.operator !== filter.operator) {\n    var newOp = updates.operator;\n    if (newOp === 'in') updates.coercion_type = 'List';\n    if (newOp === 'exists') updates.coercion_type = 'Boolean';\n    if (newOp === 'within') updates.coercion_type = 'Geo';\n\n    // If it's not any of these operators, we still need to make sure that the current coercion_type is available\n    // as an option for this new operator.\n    var coercionOptions = _.find(ProjectUtils.getConstant('FILTER_OPERATORS'), { value: updates.operator }).canBeCoeredTo;\n    var coercion_type = updates.coercion_type || filter.coercion_type;\n    if (!_.includes(coercionOptions, coercion_type)) {\n      updates.coercion_type = coercionOptions[0];\n    }\n  }\n\n  if (updates.coercion_type === 'Geo' && filter.coercion_type !== 'Geo') {\n    updates.property_value = _defaultGeoFilter();\n  }\n\n  updates.property_value = FilterUtils.getCoercedValue(_.merge({}, filter, updates));\n\n  return updates;\n}\n\nfunction _wrapGroupBy(group_by) {\n  if (!_.isArray(group_by)) group_by = [group_by];\n  return _.pull(group_by, null);\n}\n\nfunction _create(attrs) {\n  if (attrs && attrs.active === true) {\n    throw new Error('You must use setActive to set a model as active.');\n    return;\n  }\n\n  attrs = attrs || {};\n  var newAttrs = _.merge(_defaultAttrs(), attrs);\n\n  if (newAttrs.query.steps) {\n    newAttrs.query.steps = _.map(newAttrs.query.steps, function (step) {\n      return _.merge(_defaultStep(), step);\n    });\n  }\n  if (!newAttrs.metadata) newAttrs.metadata = _defaultMetadata();\n  newAttrs.query.group_by = _wrapGroupBy(newAttrs.query.group_by);\n  newAttrs.query.percentile = parseFloat(newAttrs.query.percentile) || null;\n\n  _explorers[newAttrs.id] = newAttrs;\n  return newAttrs.id;\n}\n\nfunction _update(id, updates) {\n  if (updates && updates.active === true && !_explorers[id].active) {\n    throw new Error('You must use setActive to set a model as active.');\n    return;\n  }\n\n  var newModel = _prepareUpdates(_explorers[id], updates);\n  newModel.query.group_by = _wrapGroupBy(newModel.query.group_by);\n  newModel.query.percentile = parseFloat(newModel.query.percentile) || null;\n\n  if (updates.id && updates.id !== id) {\n    _explorers[updates.id] = newModel;\n    delete _explorers[id];\n    return updates.id;\n  } else {\n    _explorers[id] = newModel;\n    return id;\n  }\n}\n\nfunction _markFirstInvalidStepActive(id) {\n  var explorer = _explorers[id];\n  if (explorer.query.analysis_type !== 'funnel') return;\n  explorer.query.steps.forEach(function(step, index) {\n    if (!step.isValid) _setStepActive(id, index);\n  });\n}\n\nfunction _remove(id) {\n  delete _explorers[id];\n}\n\nfunction _setActive(id) {\n  _.each(_explorers, function(explorer, key) {\n    explorer.active = false;\n    delete explorer.originalModel;\n  });\n  _explorers[id].active = true;\n  _explorers[id].originalModel = _.cloneDeep(_explorers[id]);\n}\n\nfunction _revertActiveChanges() {\n  var active = _.find(_explorers, { active: true });\n  var original = _explorers[active.id].originalModel;\n  _explorers[active.id] = _.assign({}, original, { originalModel: original, response: active.response });\n  return active.id;\n}\n\nfunction _addFilter(id, attrs) {\n  attrs = attrs || {};\n  _explorers[id].query.filters.push(_.assign(_defaultFilter(), attrs));\n}\n\nfunction _removeFilter(id, index) {\n  _explorers[id].query.filters.splice(index, 1);\n}\n\nfunction _updateFilter(id, index, updates) {\n  var filter = _explorers[id].query.filters[index];\n  var updates = _prepareFilterUpdates(_explorers[id], filter, updates);\n\n  _explorers[id].query.filters[index] = _.assign({}, filter, updates);\n\n  // Hack around the fact that _.assign doesn't assign null values. But we\n  // actually WANT a null value if the coercion_type is null.\n  if (_explorers[id].query.filters[index].coercion_type === 'Null') {\n    _explorers[id].query.filters[index].property_value = null;\n  }\n}\n\nfunction _addStep(id, attrs) {\n  var explorer = _explorers[id];\n  if (explorer.query.analysis_type !== 'funnel') {\n    throw new Error('Error: Attempting to add a step to a non-funnel query. Explorer id: '+explorer.id);\n  }\n  var step = _.assign(_defaultStep(), attrs || {});\n  step.active = true;\n\n  // This is likely always true, but I like being defensive\n  if(explorer.query.steps.length > 0) {\n    var lastStep = explorer.query.steps[explorer.query.steps.length - 1];\n\n    step.time = lastStep.time;\n    step.timezone = lastStep.timezone;\n  }\n\n  explorer.query.steps.push(step);\n  _setStepActive(id, explorer.query.steps.length - 1);\n}\n\nfunction _removeStep(id, index) {\n  _explorers[id].query.steps.splice(index, 1);\n\n  if(index > _explorers[id].query.steps.length - 1) {\n    _setStepActive(id, _explorers[id].query.steps.length - 1);\n  } else {\n    _setStepActive(id, index);\n  }\n}\n\nfunction _updateStep(id, index, updates) {\n  var step = _explorers[id].query.steps[index];\n  _explorers[id].query.steps[index] = _.assign({}, step, updates);\n}\n\nfunction _setStepActive(id, index) {\n  _explorers[id].query.steps.forEach(function(step) {\n    step.active = false\n  })\n  _explorers[id].query.steps[index].active = true;\n}\n\nfunction _moveStep(id, index, direction) {\n  var steps = _.cloneDeep(_explorers[id].query.steps);\n\n  if (direction === 'up') {\n    if (index === 0) return;\n\n    var stepToDisplace = steps[index-1];\n    var step = steps[index];\n    steps[index-1] = step;\n    steps[index] = stepToDisplace;\n  }\n  if (direction === 'down') {\n    if (index === steps.length-1) return;\n\n    var stepToDisplace = steps[index+1];\n    var step = steps[index];\n    steps[index+1] = step;\n    steps[index] = stepToDisplace;\n  }\n\n  _explorers[id].query.steps = steps;\n}\n\nfunction _addStepFilter(id, stepIndex, attrs) {\n  attrs = attrs || {};\n  _explorers[id].query.steps[stepIndex].filters.push(_.assign(_defaultFilter(), attrs));\n}\n\nfunction _removeStepFilter(id, stepIndex, filterIndex) {\n  _explorers[id].query.steps[stepIndex].filters.splice(filterIndex, 1);\n}\n\nfunction _updateStepFilter(id, stepIndex, filterIndex, updates) {\n  var filter = _explorers[id].query.steps[stepIndex].filters[filterIndex];\n  var updates = _prepareFilterUpdates(_explorers[id], filter, updates);\n  _explorers[id].query.steps[stepIndex].filters[filterIndex] = _.assign({}, filter, updates);\n\n  // Hack around the fact that _.assign doesn't assign null values. But we\n  // actually WANT a null value if the coercion_type is null.\n  if (_explorers[id].query.steps[stepIndex].filters[filterIndex].coercion_type === 'Null') {\n    _explorers[id].query.steps[stepIndex].filters[filterIndex].property_value = null;\n  }\n}\n\nfunction _clear(id) {\n  var model = _explorers[id];\n  _explorers[id] = _.assign({}, _defaultAttrs(), _.pick(model, ['id', 'query_name', 'active', 'metadata', 'originalModel']));\n}\n\nvar ExplorerStore = _.assign({}, EventEmitter.prototype, {\n\n  unregisterWithDispatcher: function() {\n    AppDispatcher.unregister(this.dispatchToken);\n  },\n\n  clearAll: function() {\n    _explorers = {};\n  },\n\n  set: function(explorer) {\n    _explorers[explorer.id] = explorer;\n  },\n\n  get: function(id) {\n    return _explorers[id];\n  },\n\n  getActive: function() {\n    return _.find(_explorers, { active: true });\n  },\n\n  getAll: function() {\n    return _explorers;\n  },\n\n  getLast: function() {\n    var keys = _.keys(_explorers);\n    return _explorers[keys[keys.length-1]];\n  },\n\n  getAllPersisted: function() {\n    return _.filter(_explorers, function(explorer){\n      return ExplorerUtils.isPersisted(explorer);\n    });\n  },\n\n  emitChange: function() {\n    this.emit(CHANGE_EVENT);\n  },\n\n  addChangeListener: function(callback) {\n    this.on(CHANGE_EVENT, callback);\n  },\n\n  removeChangeListener: function(callback) {\n    this.removeListener(CHANGE_EVENT, callback);\n  }\n\n});\n\n// Register callback to handle all updates\nExplorerStore.dispatchToken = AppDispatcher.register(function(action) {\n\n  function finishAction(id) {\n    // Validate the model\n    if (id) _validate(id);\n\n    // Emit change\n    ExplorerStore.emitChange();\n  }\n\n  switch(action.actionType) {\n    case ExplorerConstants.EXPLORER_CREATE:\n      _create(action.attrs);\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_CREATE_BATCH:\n      action.models.forEach(function(model) {\n        _explorers[model.id] ? _update(model.id, model) : _create(model);\n      });\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_CLONE:\n      var source = ExplorerStore.get(action.id);\n      _create({ query: _.cloneDeep(source.query),\n                metadata: {\n                  display_name: null,\n                  visualization: {\n                    chart_type: _.cloneDeep(source.metadata.visualization.chart_type)\n                  }\n                }\n              });\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_UPDATE:\n      var id = _update(action.id, action.updates);\n      finishAction(id);\n      break;\n\n    case ExplorerConstants.EXPLORER_REMOVE:\n      var wasActive = (_explorers[action.id].active === true);\n      _remove(action.id);\n      // Create a new active explorer to replace the previously active one.\n      if (wasActive) {\n        var id = _create();\n        _setActive(id);\n      }\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_SET_ACTIVE:\n      _setActive(action.id);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_REVERT_ACTIVE_CHANGES:\n      var id = _revertActiveChanges();\n      finishAction(id);\n      break;\n\n    case ExplorerConstants.EXPLORER_CLEAR:\n      _clear(action.id);\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVING:\n      _update(action.id, { saving: true });\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVE_SUCCESS:\n      _update(action.id, { saving: false });\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVE_FAIL:\n      _update(action.id, { saving: false });\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_ADD_FILTER:\n      _addFilter(action.id, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_REMOVE_FILTER:\n      _removeFilter(action.id, action.index);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_UPDATE_FILTER:\n      _updateFilter(action.id, action.index, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_ADD_STEP:\n      _addStep(action.id, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_REMOVE_STEP:\n      _removeStep(action.id, action.index);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_UPDATE_STEP:\n      _updateStep(action.id, action.index, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_SET_STEP_ACTIVE:\n      _setStepActive(action.id, action.index);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_MOVE_STEP:\n      _moveStep(action.id, action.index, action.direction);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_ADD_STEP_FILTER:\n      _addStepFilter(action.id, action.stepIndex, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_REMOVE_STEP_FILTER:\n      _removeStepFilter(action.id, action.stepIndex, action.filterIndex);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_UPDATE_STEP_FILTER:\n      _updateStepFilter(action.id, action.stepIndex, action.filterIndex, action.attrs);\n      finishAction(action.id);\n      break;\n\n    case ExplorerConstants.EXPLORER_VALIDATE:\n      _validate(action.id);\n      finishAction();\n      break;\n\n    case ExplorerConstants.EXPLORER_FOUND_INVALID:\n      // Find any invalid steps and mark the first one active to display the notice.\n      _markFirstInvalidStepActive(action.id);\n      finishAction();\n      break;\n\n    default:\n      // no op\n  }\n\n  return true;\n});\n\nmodule.exports = ExplorerStore;\n","import React from 'react';\nimport _ from 'lodash';\n\nconst InputComponent = React.createClass({\n\n  _onChange: function(event) {\n    this.setState({ value: event.target.value });\n    this.props.onChange(event);\n  },\n\n  getDefaultProps: function() {\n    return {\n      classes: 'form-group',\n      inputClasses: '',\n      type: 'text',\n      placeholder: '',\n      readonly: false,\n      onChange: function(){}\n    };\n  },\n\n  getInitialState: function() {\n    return {\n      value: this.props.value || ''\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    this.setState({ value: nextProps.value });\n  },\n\n  render: function() {\n    var required = this.props.required ? <small>(required)</small> : null;\n    var label = this.props.label ? <label htmlFor={this.props.name}>{this.props.label} {required}</label> : null;\n    var inputClasses = \"form-control\";\n    if (this.props.inputClasses) inputClasses = inputClasses + \" \" + this.props.inputClasses;\n\n    return (\n      <div className={this.props.classes}>\n        {label}\n        <input ref=\"input\"\n               type={this.props.type}\n               name={this.props.name}\n               className={inputClasses}\n               placeholder={this.props.placeholder}\n               onChange={this._onChange}\n               onBlur={this.props.onBlur}\n               value={this.state.value}\n               readOnly={this.props.readonly}\n               autoComplete=\"off\" />\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = InputComponent;\n","import React from 'react';\nimport classNames from 'classnames';\nimport _ from 'lodash';\n\nconst FieldsToggle = React.createClass({\n\n  handleFieldsToggle: function(toggledState) {\n    var attrNames = this.props.attrsToStore;\n    var updates = {};\n\n    if (!_.isArray(attrNames)) {\n      attrNames = [attrNames];\n    }\n    _.each(attrNames, function(attrName){\n      if (toggledState) {\n        if (this._storedAttrs[attrName]) {\n          updates[attrName] = this._storedAttrs[attrName];\n        }\n      } else {\n        this._storedAttrs[attrName] = this.props.getFn(attrName);\n        var resetVal = this.props.resetValues[attrName] || null;\n        updates[attrName] = resetVal;\n      }\n    }.bind(this));\n\n    this.props.updateFn(updates);\n  },\n\n  toggleButtonClick: function(event) {\n    event.preventDefault();\n    this.toggle();\n  },\n\n  toggle: function() {\n    var openState;\n    if (this.props.fieldsCount === null) {\n      openState = !this.state.open;\n      this.setState({ open: openState });\n      this.handleFieldsToggle(openState);\n    }\n    this.props.toggleCallback(openState || null);\n  },\n\n  // React Methods\n\n  componentWillMount: function() {\n    this._storedAttrs = {};\n  },\n\n  getDefaultProps: function() {\n    return {\n      toggleCallback: function(){},\n      initialOpenState: false,\n      fieldsCount: null,\n      resetValues: {}\n    };\n  },\n\n  getInitialState: function(){\n    return {\n      open: this.props.initialOpenState ? true : false\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    if (!this.props.initialOpenState && nextProps.initialOpenState) {\n      this.setState({ open: true });\n    }\n  },\n\n  render: function() {\n    var fieldsCount = this.props.fieldsCount ? this.props.fieldsCount : null;\n\n    var classes = classNames({\n      'has-fields-count': fieldsCount,\n      'open': this.state.open && fieldsCount === null,\n      'fields-toggle': true\n    });\n\n    var bodyContent;\n    if (this.props.children) {\n      bodyContent = (\n        <div className=\"toggle-body\">\n          {this.props.children}\n        </div>\n      );\n    }\n\n    return (\n      <div className={classes}>\n        <a href=\"#\" className=\"toggle-label\" onClick={this.toggleButtonClick} ref=\"toggle-label\">\n          <h5 ref=\"name\">{this.props.name}</h5>\n          <button type=\"button\" className=\"toggle-button\">\n            <span className=\"icon\" ref=\"icon\">{fieldsCount}</span>\n          </button>\n        </a>\n        {bodyContent}\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = FieldsToggle;\n","import React from 'react';\nimport _ from 'lodash';\n\nconst SelectComponent = React.createClass({\n\n  buildOptions: function() {\n    if (this.state.options.length) {\n\n      return this.state.options.map(function(option) {\n        return (\n          <option value={option.value} key={option.value} disabled={option.disabled || false}>\n            {option.name}\n          </option>\n        );\n      });\n    } else {\n      return null;\n    }\n  },\n\n  wrapValuesInObjects: function(options) {\n    if (!_.isObject(options[0])) {\n      return _.map(options, function(option) {\n        return { name: option, value: option };\n      });\n    }\n    return options;\n  },\n\n  sortOptions: function(options) {\n    return options.sort(function(a, b){\n      var A = a.name.toLowerCase();\n      var B = b.name.toLowerCase();\n\n       if (A < B){\n        return -1;\n       } else if (A > B) {\n        return  1;\n       } else {\n         return 0;\n       }\n    });\n  },\n\n  buildEmptyOption: function() {\n    var emptyOption = this.props.emptyOption;\n\n    if (emptyOption === true) {\n      return (<option value=\"\"></option>);\n    } else if (emptyOption) {\n      return (<option value=\"\">{emptyOption}</option>);\n    } else {\n      return null;\n    }\n  },\n\n  setupOptions: function(options) {\n    var newOptions = this.wrapValuesInObjects(options);\n    if (this.props.sort) newOptions = this.sortOptions(newOptions);\n    return newOptions;\n  },\n\n  // React Methods\n\n  getDefaultProps: function() {\n    return {\n      classes: 'form-group',\n      sort: true,\n      emptyOption: true,\n      reference: 'select',\n      handleSelection: function(){},\n      handleBlur: function(){},\n      options: []\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    this.setState({ options: this.setupOptions(nextProps.options) });\n  },\n\n  getInitialState: function() {\n    return {\n      options: this.setupOptions(this.props.options)\n    };\n  },\n\n  render: function() {\n    var optionNodes = this.buildOptions();\n    var label = this.props.label ? <label htmlFor={this.props.name}>{this.props.label}</label> : null;\n    var emptyOption = this.buildEmptyOption();\n    var emptyVal = this.props.multiple ? [] : ''\n    var selectedValue = this.props.selectedOption ? this.props.selectedOption : emptyVal;\n\n    return (\n      <div className={this.props.classes}>\n        {label}\n        <div className=\"select-element\">\n          <select ref={this.props.reference}\n                  name={this.props.name}\n                  value={selectedValue}\n                  className=\"form-control\"\n                  multiple={this.props.multiple}\n                  onChange={this.props.handleSelection}\n                  onBlur={this.props.handleBlur}\n                  disabled={this.props.disabled}>\n            {emptyOption}\n            {optionNodes}\n          </select>\n        </div>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = SelectComponent;\n","/* ExplorerStore */\n\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport { EventEmitter } from 'events';\nimport _ from 'lodash';\nimport ProjectConstants from '../constants/ProjectConstants';\nimport ProjectUtils from '../utils/ProjectUtils';\nimport FormatUtils from '../utils/FormatUtils';\n\nconst CHANGE_EVENT = 'change';\n\nlet _projects = {};\n\nfunction defaultAttrs() {\n  return {\n    id: null,\n    loading: true,\n    eventCollections: [],\n    sortedEventCollections: {},\n    schema: {}\n  };\n}\n\nfunction _create(attrs) {\n  var id = FormatUtils.generateTempId();\n  _projects[id] = _.assign(defaultAttrs(), { id: id }, attrs);\n}\n\nfunction _update(id, updates) {\n  _projects[id] = _.assign({}, _projects[id], updates);\n}\n\nfunction _updateEventCollection(id, collectionName, updates) {\n  var newCollection = _.assign(\n    {},\n    _projects[id].schema[collectionName],\n    updates\n  );\n  _projects[id].schema[collectionName] = newCollection;\n}\n\nvar ProjectStore = _.assign({}, EventEmitter.prototype, {\n  unregisterWithDispatcher: function() {\n    AppDispatcher.unregister(_dispatcherToken);\n  },\n\n  clearAll: function() {\n    _projects = {};\n  },\n\n  getProject: function() {\n    var keys = Object.keys(_projects);\n    if (keys.length) {\n      return _projects[keys[0]];\n    }\n  },\n\n  getAll: function() {\n    return _projects;\n  },\n\n  emitChange: function() {\n    this.emit(CHANGE_EVENT);\n  },\n\n  addChangeListener: function(callback) {\n    this.on(CHANGE_EVENT, callback);\n  },\n\n  removeChangeListener: function(callback) {\n    this.removeListener(CHANGE_EVENT, callback);\n  }\n});\n\n// Register callback to handle all updates\nvar _dispatcherToken = AppDispatcher.register(function(action) {\n  var attrs;\n\n  switch(action.actionType) {\n    case ProjectConstants.PROJECT_CREATE:\n      _create(action.attrs);\n      ProjectStore.emitChange();\n      break;\n\n    case ProjectConstants.PROJECT_UPDATE:\n      _update(action.id, action.updates);\n      ProjectStore.emitChange();\n      break;\n\n    case ProjectConstants.PROJECT_UPDATE_EVENT_COLLECTION:\n      _updateEventCollection(action.id, action.collectionName, action.updates);\n      ProjectStore.emitChange();\n      break;\n\n    default:\n      // no op\n  }\n\n  return true;\n});\n\nmodule.exports = ProjectStore;\n","import _ from 'lodash';\nimport ProjectUtils from './ProjectUtils';\nimport FormatUtils from './FormatUtils';\n\nmodule.exports = {\n\n  /**\n   * Takes a time object and returns a string representing the timeframe type (absolute or relative)\n   * @param  {Object} time The time object\n   * @return {String} The type of timeframe, 'absolute' or 'relative'\n   */\n   timeframeType: function(time) {\n      if (_.isUndefined(time)) {\n        return null;\n      } else if (!_.isPlainObject(time)) {\n        throw new Error('Invalid timeframe type: not a plain object.');\n      } else if (_.has(time, 'start') || _.has(time, 'end')) {\n        return 'absolute';\n      } else if (_.has(time, 'relativity') && _.has(time, 'amount') && _.has(time, 'sub_timeframe')) {\n        return 'relative';\n      } else {\n        throw new Error('Invalid timeframe type: invalid time value.');\n      }\n   },\n\n  getTimezoneOffset: function(timezone) {\n    var zone = _.find(ProjectUtils.getConstant('TIMEZONES'), { value: timezone });\n    return zone ? zone.offset : '+00:00';\n  },\n\n  timeframeBuilders: {\n\n    absolute: function(time) {\n      if (time && time.start && time.end) {\n        return {\n          start: FormatUtils.formatISOTimeNoTimezone(time.start),\n          end: FormatUtils.formatISOTimeNoTimezone(time.end)\n        };\n      }\n    },\n\n    relative: function(time) {\n      if (time && time.relativity && time.amount && time.sub_timeframe) {\n        return [time.relativity, time.amount, time.sub_timeframe].join('_');\n      }\n    }\n\n  },\n\n  getTimeframe: function(time) {\n    var timeframeBuilder = module.exports.timeframeBuilders[module.exports.timeframeType(time)];\n    if (typeof(timeframeBuilder) === 'undefined') return \"\";\n    return timeframeBuilder(time);\n  },\n\n  getTimeParameters: function(timeframe, timezone) {\n    return {\n      timeframe: timeframe ? module.exports.getTimeframe(timeframe) : null,\n      timezone: timezone || ProjectUtils.getConstant('DEFAULT_TIMEZONE')\n    };\n  },\n\n  /**\n   * Takes a URL encoded timerame string or object and returns a time object that looks how the Explorer store wants\n   * it to\n   * @param  {String} timeframe\n   * @return {Object}\n   * Return structure:\n   * {\n   *  time: {an Object, either containing a deconstructed absolute or relative timeframe}\n   * }\n   */\n  unpackTimeframeParam: function(timeframe, timezone) {\n    if (typeof timeframe === 'object') {\n      return module.exports.unpackAbsoluteTimeframe(timeframe, timezone);\n    } else if (typeof timeframe === 'string') {\n      return module.exports.unpackRelativeTimeframe(timeframe, timezone);\n    }\n  },\n\n  unpackAbsoluteTimeframe: function (timeframe, timezone) {\n    var formattedValue = {\n      time: {},\n      timezone: null\n    };\n\n    if (!timezone || !ProjectUtils.getConstant('TIMEZONES').filter(z => z.name === timezone).length) {\n      formattedValue.timezone = 'UTC';\n    } else {\n      formattedValue.timezone = timezone;\n    }\n\n    var startVal = timeframe.start ? timeframe.start.substring(0, 19) : \"\";\n    formattedValue.time.start = FormatUtils.formatISOTimeNoTimezone(startVal);\n\n    var endVal = timeframe.end ? timeframe.end.substring(0, 19) : \"\";\n    formattedValue.time.end = FormatUtils.formatISOTimeNoTimezone(endVal);\n\n    return formattedValue;\n  },\n\n  unpackRelativeTimeframe: function (timeframe, timezone) {\n    var split = timeframe.split('_');\n    return {\n      time: {\n        relativity: split[0],\n        amount: split[1],\n        sub_timeframe: split[2]\n      },\n      timezone: timezone\n    };\n  }\n\n}\n","import AppDispatcher from '../dispatcher/AppDispatcher';\nimport NoticeConstants from '../constants/NoticeConstants';\n\nconst NoticeActions = {\n\n  create: function(attrs) {\n    AppDispatcher.dispatch({\n      actionType: NoticeConstants.NOTICE_CREATE,\n      attrs: attrs\n    });\n  },\n\n  clearAll: function() {\n    AppDispatcher.dispatch({\n      actionType: NoticeConstants.NOTICE_CLEAR_ALL\n    });\n  }\n\n};\n\nmodule.exports = NoticeActions;\n","import keyMirror from 'keymirror';\n\nmodule.exports = keyMirror({\n  EXPLORER_CREATE: null,\n  EXPLORER_CREATE_BATCH: null,\n  EXPLORER_CLONE: null,\n  EXPLORER_UPDATE: null,\n  EXPLORER_REMOVE: null,\n  EXPLORER_SET_ACTIVE: null,\n  EXPLORER_REVERT_ACTIVE_CHANGES: null,\n  EXPLORER_CLEAR: null,\n  EXPLORER_VALIDATE: null,\n  EXPLORER_FOUND_INVALID: null,\n  EXPLORER_QUERY_SUCCESS: null,\n  EXPLORER_QUERY_ERROR: null,\n\n  // Filter Actions\n  EXPLORER_ADD_FILTER: null,\n  EXPLORER_REMOVE_FILTER: null,\n  EXPLORER_UPDATE_FILTER: null,\n  EXPLORER_ADD_STEP: null,\n  EXPLORER_REMOVE_STEP: null,\n  EXPLORER_UPDATE_STEP: null,\n  EXPLORER_SET_STEP_ACTIVE: null,\n  EXPLORER_MOVE_STEP: null,\n  EXPLORER_ADD_STEP_FILTER: null,\n  EXPLORER_REMOVE_STEP_FILTER: null,\n  EXPLORER_UPDATE_STEP_FILTER: null,\n\n  // Saved Query Actions\n  EXPLORER_SAVE: null,\n  EXPLORER_SAVE_NEW: null,\n  EXPLORER_DESTROY: null,\n  EXPLORER_SAVING: null,\n  EXPLORER_SAVE_SUCCESS: null,\n  EXPLORER_SAVE_FAIL: null,\n  EXPLORER_DESTROYING: null,\n  EXPLORER_DESTROY_SUCCESS: null,\n  EXPLORER_DESTROY_FAIL: null\n});\n","module.exports = __WEBPACK_EXTERNAL_MODULE__20__;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__22__;","/*!\n * pickadate.js v3.5.4, 2014/09/11\n * By Amsul, http://amsul.ca\n * Hosted on http://amsul.github.io/pickadate.js\n * Licensed under MIT\n */\n\n(function ( factory ) {\n\n    // AMD.\n    if ( typeof define == 'function' && define.amd )\n        define( 'picker', ['jquery'], factory )\n\n    // Node.js/browserify.\n    else if ( typeof exports == 'object' )\n        module.exports = factory( require('jquery') )\n\n    // Browser globals.\n    else this.Picker = factory( jQuery )\n\n}(function( $ ) {\n\nvar $window = $( window )\nvar $document = $( document )\nvar $html = $( document.documentElement )\n\n\n/**\n * The picker constructor that creates a blank picker.\n */\nfunction PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {\n\n    // If theres no element, return the picker constructor.\n    if ( !ELEMENT ) return PickerConstructor\n\n\n    var\n        IS_DEFAULT_THEME = false,\n\n\n        // The state of the picker.\n        STATE = {\n            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )\n        },\n\n\n        // Merge the defaults and options passed.\n        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},\n\n\n        // Merge the default classes with the settings classes.\n        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),\n\n\n        // The element node wrapper into a jQuery object.\n        $ELEMENT = $( ELEMENT ),\n\n\n        // Pseudo picker constructor.\n        PickerInstance = function() {\n            return this.start()\n        },\n\n\n        // The picker prototype.\n        P = PickerInstance.prototype = {\n\n            constructor: PickerInstance,\n\n            $node: $ELEMENT,\n\n\n            /**\n             * Initialize everything\n             */\n            start: function() {\n\n                // If its already started, do nothing.\n                if ( STATE && STATE.start ) return P\n\n\n                // Update the picker states.\n                STATE.methods = {}\n                STATE.start = true\n                STATE.open = false\n                STATE.type = ELEMENT.type\n\n\n                // Confirm focus state, convert into text input to remove UA stylings,\n                // and set as readonly to prevent keyboard popup.\n                ELEMENT.autofocus = ELEMENT == document.activeElement\n                ELEMENT.readOnly = !SETTINGS.editable\n                ELEMENT.id = ELEMENT.id || STATE.id\n                if ( ELEMENT.type != 'text' ) {\n                    ELEMENT.type = 'text'\n                }\n\n\n                // Create a new picker component with the settings.\n                P.component = new COMPONENT(P, SETTINGS)\n\n\n                // Create the picker root with a holder and then prepare it.\n                P.$root = $( PickerConstructor._.node('div', createWrappedComponent(), CLASSES.picker, 'id=\"' + ELEMENT.id + '_root\"') )\n                prepareElementRoot()\n\n\n                // If theres a format for the hidden input element, create the element.\n                if ( SETTINGS.formatSubmit ) {\n                    prepareElementHidden()\n                }\n\n\n                // Prepare the input element.\n                prepareElement()\n\n\n                // Insert the root as specified in the settings.\n                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )\n                else $ELEMENT.after( P.$root )\n\n\n                // Bind the default component and settings events.\n                P.on({\n                    start: P.component.onStart,\n                    render: P.component.onRender,\n                    stop: P.component.onStop,\n                    open: P.component.onOpen,\n                    close: P.component.onClose,\n                    set: P.component.onSet\n                }).on({\n                    start: SETTINGS.onStart,\n                    render: SETTINGS.onRender,\n                    stop: SETTINGS.onStop,\n                    open: SETTINGS.onOpen,\n                    close: SETTINGS.onClose,\n                    set: SETTINGS.onSet\n                })\n\n\n                // Once were all set, check the theme in use.\n                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$root.children()[ 0 ] )\n\n\n                // If the element has autofocus, open the picker.\n                if ( ELEMENT.autofocus ) {\n                    P.open()\n                }\n\n\n                // Trigger queued the start and render events.\n                return P.trigger( 'start' ).trigger( 'render' )\n            }, //start\n\n\n            /**\n             * Render a new picker\n             */\n            render: function( entireComponent ) {\n\n                // Insert a new component holder in the root or box.\n                if ( entireComponent ) P.$root.html( createWrappedComponent() )\n                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )\n\n                // Trigger the queued render events.\n                return P.trigger( 'render' )\n            }, //render\n\n\n            /**\n             * Destroy everything\n             */\n            stop: function() {\n\n                // If its already stopped, do nothing.\n                if ( !STATE.start ) return P\n\n                // Then close the picker.\n                P.close()\n\n                // Remove the hidden field.\n                if ( P._hidden ) {\n                    P._hidden.parentNode.removeChild( P._hidden )\n                }\n\n                // Remove the root.\n                P.$root.remove()\n\n                // Remove the input class, remove the stored data, and unbind\n                // the events (after a tick for IE - see `P.close`).\n                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )\n                setTimeout( function() {\n                    $ELEMENT.off( '.' + STATE.id )\n                }, 0)\n\n                // Restore the element state\n                ELEMENT.type = STATE.type\n                ELEMENT.readOnly = false\n\n                // Trigger the queued stop events.\n                P.trigger( 'stop' )\n\n                // Reset the picker states.\n                STATE.methods = {}\n                STATE.start = false\n\n                return P\n            }, //stop\n\n\n            /**\n             * Open up the picker\n             */\n            open: function( dontGiveFocus ) {\n\n                // If its already open, do nothing.\n                if ( STATE.open ) return P\n\n                // Add the active class.\n                $ELEMENT.addClass( CLASSES.active )\n                aria( ELEMENT, 'expanded', true )\n\n                // * A Firefox bug, when `html` has `overflow:hidden`, results in\n                //   killing transitions :(. So add the opened state on the next tick.\n                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289\n                setTimeout( function() {\n\n                    // Add the opened class to the picker root.\n                    P.$root.addClass( CLASSES.opened )\n                    aria( P.$root[0], 'hidden', false )\n\n                }, 0 )\n\n                // If we have to give focus, bind the element and doc events.\n                if ( dontGiveFocus !== false ) {\n\n                    // Set it as open.\n                    STATE.open = true\n\n                    // Prevent the page from scrolling.\n                    if ( IS_DEFAULT_THEME ) {\n                        $html.\n                            css( 'overflow', 'hidden' ).\n                            css( 'padding-right', '+=' + getScrollbarWidth() )\n                    }\n\n                    // Pass focus to the elements jQuery object.\n                    $ELEMENT.trigger( 'focus' )\n\n                    // Bind the document events.\n                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {\n\n                        var target = event.target\n\n                        // If the target of the event is not the element, close the picker picker.\n                        // * Dont worry about clicks or focusins on the root because those dont bubble up.\n                        //   Also, for Firefox, a click on an `option` element bubbles up directly\n                        //   to the doc. So make sure the target wasn't the doc.\n                        // * In Firefox stopPropagation() doesnt prevent right-click events from bubbling,\n                        //   which causes the picker to unexpectedly close when right-clicking it. So make\n                        //   sure the event wasnt a right-click.\n                        if ( target != ELEMENT && target != document && event.which != 3 ) {\n\n                            // If the target was the holder that covers the screen,\n                            // keep the element focused to maintain tabindex.\n                            P.close( target === P.$root.children()[0] )\n                        }\n\n                    }).on( 'keydown.' + STATE.id, function( event ) {\n\n                        var\n                            // Get the keycode.\n                            keycode = event.keyCode,\n\n                            // Translate that to a selection change.\n                            keycodeToMove = P.component.key[ keycode ],\n\n                            // Grab the target.\n                            target = event.target\n\n\n                        // On escape, close the picker and give focus.\n                        if ( keycode == 27 ) {\n                            P.close( true )\n                        }\n\n\n                        // Check if there is a key movement or enter keypress on the element.\n                        else if ( target == ELEMENT && ( keycodeToMove || keycode == 13 ) ) {\n\n                            // Prevent the default action to stop page movement.\n                            event.preventDefault()\n\n                            // Trigger the key movement action.\n                            if ( keycodeToMove ) {\n                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )\n                            }\n\n                            // On enter, if the highlighted item isnt disabled, set the value and close.\n                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {\n                                P.set( 'select', P.component.item.highlight ).close()\n                            }\n                        }\n\n\n                        // If the target is within the root and enter is pressed,\n                        // prevent the default action and trigger a click on the target instead.\n                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {\n                            event.preventDefault()\n                            target.click()\n                        }\n                    })\n                }\n\n                // Trigger the queued open events.\n                return P.trigger( 'open' )\n            }, //open\n\n\n            /**\n             * Close the picker\n             */\n            close: function( giveFocus ) {\n\n                // If we need to give focus, do it before changing states.\n                if ( giveFocus ) {\n                    // ....ah yes! It wouldve been incomplete without a crazy workaround for IE :|\n                    // The focus is triggered *after* the close has completed - causing it\n                    // to open again. So unbind and rebind the event at the next tick.\n                    $ELEMENT.off( 'focus.' + STATE.id ).trigger( 'focus' )\n                    setTimeout( function() {\n                        $ELEMENT.on( 'focus.' + STATE.id, focusToOpen )\n                    }, 0 )\n                }\n\n                // Remove the active class.\n                $ELEMENT.removeClass( CLASSES.active )\n                aria( ELEMENT, 'expanded', false )\n\n                // * A Firefox bug, when `html` has `overflow:hidden`, results in\n                //   killing transitions :(. So remove the opened state on the next tick.\n                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289\n                setTimeout( function() {\n\n                    // Remove the opened and focused class from the picker root.\n                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )\n                    aria( P.$root[0], 'hidden', true )\n\n                }, 0 )\n\n                // If its already closed, do nothing more.\n                if ( !STATE.open ) return P\n\n                // Set it as closed.\n                STATE.open = false\n\n                // Allow the page to scroll.\n                if ( IS_DEFAULT_THEME ) {\n                    $html.\n                        css( 'overflow', '' ).\n                        css( 'padding-right', '-=' + getScrollbarWidth() )\n                }\n\n                // Unbind the document events.\n                $document.off( '.' + STATE.id )\n\n                // Trigger the queued close events.\n                return P.trigger( 'close' )\n            }, //close\n\n\n            /**\n             * Clear the values\n             */\n            clear: function( options ) {\n                return P.set( 'clear', null, options )\n            }, //clear\n\n\n            /**\n             * Set something\n             */\n            set: function( thing, value, options ) {\n\n                var thingItem, thingValue,\n                    thingIsObject = $.isPlainObject( thing ),\n                    thingObject = thingIsObject ? thing : {}\n\n                // Make sure we have usable options.\n                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}\n\n                if ( thing ) {\n\n                    // If the thing isnt an object, make it one.\n                    if ( !thingIsObject ) {\n                        thingObject[ thing ] = value\n                    }\n\n                    // Go through the things of items to set.\n                    for ( thingItem in thingObject ) {\n\n                        // Grab the value of the thing.\n                        thingValue = thingObject[ thingItem ]\n\n                        // First, if the item exists and theres a value, set it.\n                        if ( thingItem in P.component.item ) {\n                            if ( thingValue === undefined ) thingValue = null\n                            P.component.set( thingItem, thingValue, options )\n                        }\n\n                        // Then, check to update the element value and broadcast a change.\n                        if ( thingItem == 'select' || thingItem == 'clear' ) {\n                            $ELEMENT.\n                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).\n                                trigger( 'change' )\n                        }\n                    }\n\n                    // Render a new picker.\n                    P.render()\n                }\n\n                // When the method isnt muted, trigger queued set events and pass the `thingObject`.\n                return options.muted ? P : P.trigger( 'set', thingObject )\n            }, //set\n\n\n            /**\n             * Get something\n             */\n            get: function( thing, format ) {\n\n                // Make sure theres something to get.\n                thing = thing || 'value'\n\n                // If a picker state exists, return that.\n                if ( STATE[ thing ] != null ) {\n                    return STATE[ thing ]\n                }\n\n                // Return the value, if that.\n                if ( thing == 'value' ) {\n                    return ELEMENT.value\n                }\n\n                // Check if a component item exists, return that.\n                if ( thing in P.component.item ) {\n                    if ( typeof format == 'string' ) {\n                        var thingValue = P.component.get( thing )\n                        return thingValue ?\n                            PickerConstructor._.trigger(\n                                P.component.formats.toString,\n                                P.component,\n                                [ format, thingValue ]\n                            ) : ''\n                    }\n                    return P.component.get( thing )\n                }\n            }, //get\n\n\n\n            /**\n             * Bind events on the things.\n             */\n            on: function( thing, method, internal ) {\n\n                var thingName, thingMethod,\n                    thingIsObject = $.isPlainObject( thing ),\n                    thingObject = thingIsObject ? thing : {}\n\n                if ( thing ) {\n\n                    // If the thing isnt an object, make it one.\n                    if ( !thingIsObject ) {\n                        thingObject[ thing ] = method\n                    }\n\n                    // Go through the things to bind to.\n                    for ( thingName in thingObject ) {\n\n                        // Grab the method of the thing.\n                        thingMethod = thingObject[ thingName ]\n\n                        // If it was an internal binding, prefix it.\n                        if ( internal ) {\n                            thingName = '_' + thingName\n                        }\n\n                        // Make sure the thing methods collection exists.\n                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []\n\n                        // Add the method to the relative method collection.\n                        STATE.methods[ thingName ].push( thingMethod )\n                    }\n                }\n\n                return P\n            }, //on\n\n\n\n            /**\n             * Unbind events on the things.\n             */\n            off: function() {\n                var i, thingName,\n                    names = arguments;\n                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {\n                    thingName = names[i]\n                    if ( thingName in STATE.methods ) {\n                        delete STATE.methods[thingName]\n                    }\n                }\n                return P\n            },\n\n\n            /**\n             * Fire off method events.\n             */\n            trigger: function( name, data ) {\n                var _trigger = function( name ) {\n                    var methodList = STATE.methods[ name ]\n                    if ( methodList ) {\n                        methodList.map( function( method ) {\n                            PickerConstructor._.trigger( method, P, [ data ] )\n                        })\n                    }\n                }\n                _trigger( '_' + name )\n                _trigger( name )\n                return P\n            } //trigger\n        } //PickerInstance.prototype\n\n\n    /**\n     * Wrap the picker holder components together.\n     */\n    function createWrappedComponent() {\n\n        // Create a picker wrapper holder\n        return PickerConstructor._.node( 'div',\n\n            // Create a picker wrapper node\n            PickerConstructor._.node( 'div',\n\n                // Create a picker frame\n                PickerConstructor._.node( 'div',\n\n                    // Create a picker box node\n                    PickerConstructor._.node( 'div',\n\n                        // Create the components nodes.\n                        P.component.nodes( STATE.open ),\n\n                        // The picker box class\n                        CLASSES.box\n                    ),\n\n                    // Picker wrap class\n                    CLASSES.wrap\n                ),\n\n                // Picker frame class\n                CLASSES.frame\n            ),\n\n            // Picker holder class\n            CLASSES.holder\n        ) //endreturn\n    } //createWrappedComponent\n\n\n\n    /**\n     * Prepare the input element with all bindings.\n     */\n    function prepareElement() {\n\n        $ELEMENT.\n\n            // Store the picker data by component name.\n            data(NAME, P).\n\n            // Add the input class name.\n            addClass(CLASSES.input).\n\n            // If theres a `data-value`, update the value of the element.\n            val( $ELEMENT.data('value') ?\n                P.get('select', SETTINGS.format) :\n                ELEMENT.value\n            ).\n\n            // On focus/click, open the picker and adjust the root focused state.\n            on('focus.' + STATE.id + ' click.' + STATE.id, focusToOpen)\n\n\n        // Only bind keydown events if the element isnt editable.\n        if ( !SETTINGS.editable ) {\n\n            // Handle keyboard event based on the picker being opened or not.\n            $ELEMENT.on('keydown.' + STATE.id, function(event) {\n\n                var keycode = event.keyCode,\n\n                    // Check if one of the delete keys was pressed.\n                    isKeycodeDelete = /^(8|46)$/.test(keycode)\n\n                // For some reason IE clears the input value on escape.\n                if ( keycode == 27 ) {\n                    P.close()\n                    return false\n                }\n\n                // Check if `space` or `delete` was pressed or the picker is closed with a key movement.\n                if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {\n\n                    // Prevent it from moving the page and bubbling to doc.\n                    event.preventDefault()\n                    event.stopPropagation()\n\n                    // If `delete` was pressed, clear the values and close the picker.\n                    // Otherwise open the picker.\n                    if ( isKeycodeDelete ) { P.clear().close() }\n                    else { P.open() }\n                }\n            })\n        }\n\n\n        // Update the aria attributes.\n        aria(ELEMENT, {\n            haspopup: true,\n            expanded: false,\n            readonly: false,\n            owns: ELEMENT.id + '_root' + (P._hidden ? ' ' + P._hidden.id : '')\n        })\n    }\n\n\n    /**\n     * Prepare the root picker element with all bindings.\n     */\n    function prepareElementRoot() {\n\n        P.$root.\n\n            on({\n\n                // When something within the root is focused, stop from bubbling\n                // to the doc and remove the focused state from the root.\n                focusin: function( event ) {\n                    P.$root.removeClass( CLASSES.focused )\n                    event.stopPropagation()\n                },\n\n                // When something within the root holder is clicked, stop it\n                // from bubbling to the doc.\n                'mousedown click': function( event ) {\n\n                    var target = event.target\n\n                    // Make sure the target isnt the root holder so it can bubble up.\n                    if ( target != P.$root.children()[ 0 ] ) {\n\n                        event.stopPropagation()\n\n                        // * For mousedown events, cancel the default action in order to\n                        //   prevent cases where focus is shifted onto external elements\n                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).\n                        //   Also, for Firefox, dont prevent action on the `option` element.\n                        if ( event.type == 'mousedown' && !$( target ).is( ':input' ) && target.nodeName != 'OPTION' ) {\n\n                            event.preventDefault()\n\n                            // Re-focus onto the element so that users can click away\n                            // from elements focused within the picker.\n                            ELEMENT.focus()\n                        }\n                    }\n                }\n            }).\n\n            // If theres a click on an actionable element, carry out the actions.\n            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {\n\n                var $target = $( this ),\n                    targetData = $target.data(),\n                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),\n\n                    // * For IE, non-focusable elements can be active elements as well\n                    //   (http://stackoverflow.com/a/2684561).\n                    activeElement = document.activeElement\n                    activeElement = activeElement && ( activeElement.type || activeElement.href ) && activeElement\n\n                // If its disabled or nothing inside is actively focused, re-focus the element.\n                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {\n                    ELEMENT.focus()\n                }\n\n                // If something is superficially changed, update the `highlight` based on the `nav`.\n                if ( !targetDisabled && targetData.nav ) {\n                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )\n                }\n\n                // If something is picked, set `select` then close with focus.\n                else if ( !targetDisabled && 'pick' in targetData ) {\n                    P.set( 'select', targetData.pick ).close( true )\n                }\n\n                // If a clear button is pressed, empty the values and close with focus.\n                else if ( targetData.clear ) {\n                    P.clear().close( true )\n                }\n\n                else if ( targetData.close ) {\n                    P.close( true )\n                }\n\n            }) //P.$root\n\n        aria( P.$root[0], 'hidden', true )\n    }\n\n\n     /**\n      * Prepare the hidden input element along with all bindings.\n      */\n    function prepareElementHidden() {\n\n        var name\n\n        if ( SETTINGS.hiddenName === true ) {\n            name = ELEMENT.name\n            ELEMENT.name = ''\n        }\n        else {\n            name = [\n                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',\n                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'\n            ]\n            name = name[0] + ELEMENT.name + name[1]\n        }\n\n        P._hidden = $(\n            '<input ' +\n            'type=hidden ' +\n\n            // Create the name using the original inputs with a prefix and suffix.\n            'name=\"' + name + '\"' +\n\n            // If the element has a value, set the hidden value as well.\n            (\n                $ELEMENT.data('value') || ELEMENT.value ?\n                    ' value=\"' + P.get('select', SETTINGS.formatSubmit) + '\"' :\n                    ''\n            ) +\n            '>'\n        )[0]\n\n        $ELEMENT.\n\n            // If the value changes, update the hidden input with the correct format.\n            on('change.' + STATE.id, function() {\n                P._hidden.value = ELEMENT.value ?\n                    P.get('select', SETTINGS.formatSubmit) :\n                    ''\n            }).\n\n            // Insert the hidden input after the element.\n            after(P._hidden)\n    }\n\n\n    // Separated for IE\n    function focusToOpen( event ) {\n\n        // Stop the event from propagating to the doc.\n        event.stopPropagation()\n\n        // If its a focus event, add the focused class to the root.\n        if ( event.type == 'focus' ) {\n            P.$root.addClass( CLASSES.focused )\n        }\n\n        // And then finally open the picker.\n        P.open()\n    }\n\n\n    // Return a new picker instance.\n    return new PickerInstance()\n} //PickerConstructor\n\n\n\n/**\n * The default classes and prefix to use for the HTML classes.\n */\nPickerConstructor.klasses = function( prefix ) {\n    prefix = prefix || 'picker'\n    return {\n\n        picker: prefix,\n        opened: prefix + '--opened',\n        focused: prefix + '--focused',\n\n        input: prefix + '__input',\n        active: prefix + '__input--active',\n\n        holder: prefix + '__holder',\n\n        frame: prefix + '__frame',\n        wrap: prefix + '__wrap',\n\n        box: prefix + '__box'\n    }\n} //PickerConstructor.klasses\n\n\n\n/**\n * Check if the default theme is being used.\n */\nfunction isUsingDefaultTheme( element ) {\n\n    var theme,\n        prop = 'position'\n\n    // For IE.\n    if ( element.currentStyle ) {\n        theme = element.currentStyle[prop]\n    }\n\n    // For normal browsers.\n    else if ( window.getComputedStyle ) {\n        theme = getComputedStyle( element )[prop]\n    }\n\n    return theme == 'fixed'\n}\n\n\n\n/**\n * Get the width of the browsers scrollbar.\n * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js\n */\nfunction getScrollbarWidth() {\n\n    if ( $html.height() <= $window.height() ) {\n        return 0\n    }\n\n    var $outer = $( '<div style=\"visibility:hidden;width:100px\" />' ).\n        appendTo( 'body' )\n\n    // Get the width without scrollbars.\n    var widthWithoutScroll = $outer[0].offsetWidth\n\n    // Force adding scrollbars.\n    $outer.css( 'overflow', 'scroll' )\n\n    // Add the inner div.\n    var $inner = $( '<div style=\"width:100%\" />' ).appendTo( $outer )\n\n    // Get the width with scrollbars.\n    var widthWithScroll = $inner[0].offsetWidth\n\n    // Remove the divs.\n    $outer.remove()\n\n    // Return the difference between the widths.\n    return widthWithoutScroll - widthWithScroll\n}\n\n\n\n/**\n * PickerConstructor helper methods.\n */\nPickerConstructor._ = {\n\n    /**\n     * Create a group of nodes. Expects:\n     * `\n        {\n            min:    {Integer},\n            max:    {Integer},\n            i:      {Integer},\n            node:   {String},\n            item:   {Function}\n        }\n     * `\n     */\n    group: function( groupObject ) {\n\n        var\n            // Scope for the looped object\n            loopObjectScope,\n\n            // Create the nodes list\n            nodesList = '',\n\n            // The counter starts from the `min`\n            counter = PickerConstructor._.trigger( groupObject.min, groupObject )\n\n\n        // Loop from the `min` to `max`, incrementing by `i`\n        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {\n\n            // Trigger the `item` function within scope of the object\n            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )\n\n            // Splice the subgroup and create nodes out of the sub nodes\n            nodesList += PickerConstructor._.node(\n                groupObject.node,\n                loopObjectScope[ 0 ],   // the node\n                loopObjectScope[ 1 ],   // the classes\n                loopObjectScope[ 2 ]    // the attributes\n            )\n        }\n\n        // Return the list of nodes\n        return nodesList\n    }, //group\n\n\n    /**\n     * Create a dom node string\n     */\n    node: function( wrapper, item, klass, attribute ) {\n\n        // If the item is false-y, just return an empty string\n        if ( !item ) return ''\n\n        // If the item is an array, do a join\n        item = $.isArray( item ) ? item.join( '' ) : item\n\n        // Check for the class\n        klass = klass ? ' class=\"' + klass + '\"' : ''\n\n        // Check for any attributes\n        attribute = attribute ? ' ' + attribute : ''\n\n        // Return the wrapped item\n        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'\n    }, //node\n\n\n    /**\n     * Lead numbers below 10 with a zero.\n     */\n    lead: function( number ) {\n        return ( number < 10 ? '0': '' ) + number\n    },\n\n\n    /**\n     * Trigger a function otherwise return the value.\n     */\n    trigger: function( callback, scope, args ) {\n        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback\n    },\n\n\n    /**\n     * If the second character is a digit, length is 2 otherwise 1.\n     */\n    digits: function( string ) {\n        return ( /\\d/ ).test( string[ 1 ] ) ? 2 : 1\n    },\n\n\n    /**\n     * Tell if something is a date object.\n     */\n    isDate: function( value ) {\n        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getUTCDate() )\n    },\n\n\n    /**\n     * Tell if something is an integer.\n     */\n    isInteger: function( value ) {\n        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0\n    },\n\n\n    /**\n     * Create ARIA attribute strings.\n     */\n    ariaAttr: ariaAttr\n} //PickerConstructor._\n\n\n\n/**\n * Extend the picker with a component and defaults.\n */\nPickerConstructor.extend = function( name, Component ) {\n\n    // Extend jQuery.\n    $.fn[ name ] = function( options, action ) {\n\n        // Grab the component data.\n        var componentData = this.data( name )\n\n        // If the picker is requested, return the data object.\n        if ( options == 'picker' ) {\n            return componentData\n        }\n\n        // If the component data exists and `options` is a string, carry out the action.\n        if ( componentData && typeof options == 'string' ) {\n            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )\n        }\n\n        // Otherwise go through each matched element and if the component\n        // doesnt exist, create a new picker using `this` element\n        // and merging the defaults and options with a deep copy.\n        return this.each( function() {\n            var $this = $( this )\n            if ( !$this.data( name ) ) {\n                new PickerConstructor( this, name, Component, options )\n            }\n        })\n    }\n\n    // Set the defaults.\n    $.fn[ name ].defaults = Component.defaults\n} //PickerConstructor.extend\n\n\n\nfunction aria(element, attribute, value) {\n    if ( $.isPlainObject(attribute) ) {\n        for ( var key in attribute ) {\n            ariaSet(element, key, attribute[key])\n        }\n    }\n    else {\n        ariaSet(element, attribute, value)\n    }\n}\nfunction ariaSet(element, attribute, value) {\n    element.setAttribute(\n        (attribute == 'role' ? '' : 'aria-') + attribute,\n        value\n    )\n}\nfunction ariaAttr(attribute, data) {\n    if ( !$.isPlainObject(attribute) ) {\n        attribute = { attribute: data }\n    }\n    data = ''\n    for ( var key in attribute ) {\n        var attr = (key == 'role' ? '' : 'aria-') + key,\n            attrVal = attribute[key]\n        data += attrVal == null ? '' : attr + '=\"' + attribute[key] + '\"'\n    }\n    return data\n}\n\n\n\n// Expose the picker constructor.\nreturn PickerConstructor\n\n\n}));\n","import AppDispatcher from '../dispatcher/AppDispatcher';\nimport AppStateConstants from '../constants/AppStateConstants';\n\nconst AppStateActions = {\n\n  update: function(updates) {\n    AppDispatcher.dispatch({\n      actionType: AppStateConstants.APP_STATE_UPDATE,\n      updates: updates\n    });\n  },\n\n  reset: function() {\n    AppDispatcher.dispatch({\n      actionType: AppStateConstants.APP_STATE_RESET,\n    });\n  }\n\n};\n\nmodule.exports = AppStateActions;\n","import _ from 'lodash';\nimport ExplorerUtils from '../utils/ExplorerUtils';\nimport SharedValidators from './SharedValidators';\nimport StepValidations from './StepValidations';\nimport { run as RunValidations } from '../utils/RunValidations';\n\nfunction isNotFunnel(model) {\n  return model.query.analysis_type !== 'funnel';\n}\n\nmodule.exports = {\n\n  analysis_type: {\n\n    msg: 'Choose an Analysis Type.',\n\n    validate: function(model) {\n      return (typeof model.query.analysis_type ==='string' && model.query.analysis_type.length > 0);\n    }\n\n  },\n\n  event_collection: {\n\n    msg: 'Choose an Event Collection.',\n\n    shouldRun: isNotFunnel,\n\n    validate: function(model) {\n      return (typeof model.query.event_collection ==='string' && model.query.event_collection.length > 0);\n    }\n\n  },\n\n  target_property: {\n\n    msg: 'Choose a Target Property.',\n\n    shouldRun: function(model) {\n      return ExplorerUtils.shouldHaveTarget(model);\n    },\n\n    validate: function(model) {\n      return (typeof model.query.target_property ==='string' && model.query.target_property.length > 0);\n    }\n\n  },\n\n  percentile_value: {\n\n    msg: 'Choose a Percentile Value.',\n\n    shouldRun: function(model) {\n      return model.query.analysis_type === 'percentile';\n    },\n\n    validate: function(model) {\n      return model.query.percentile !== null && model.query.percentile !== '' && typeof model.query.percentile === 'number';\n    }\n\n  },\n\n  filters: {\n\n    shouldRun: isNotFunnel,\n\n    msg: 'One of your filters is invalid.',\n\n    validate: function(model) {\n      return SharedValidators.filters(model.query.filters);\n    }\n\n  },\n\n  steps: {\n\n    msg: 'One of your funnel steps is invalid.',\n\n    shouldRun: function(model) {\n      return model.query.analysis_type === 'funnel';\n    },\n\n    validate: function(model) {\n      if (!model.query.steps) return false;\n      var isValid = true;\n      for (var i=0; i<model.query.steps.length; i++) {\n        RunValidations(StepValidations, model.query.steps[i]);\n        if (!model.query.steps[i].isValid) isValid = false;\n      }\n      return isValid;\n    },\n\n  },\n\n  time: {\n\n    shouldRun: isNotFunnel,\n\n    validate: function(model) {\n      return SharedValidators.time(model.query.time);\n    }\n\n  },\n\n  query_name: {\n\n    msg: 'You must give your saved query a name.',\n\n    shouldRun: function(model) {\n      return model.saving;\n    },\n\n    validate: function(model) {\n      var name = model.query_name;\n      return (name !== null && name !== undefined && typeof name === \"string\" && name.length > 0);\n    }\n\n  },\n\n  refresh_rate: {\n\n    msg: 'Refresh rate must be between 4 and 24 hours.',\n\n    validate: function(model) {\n      var rate = model.refresh_rate;\n      return (typeof rate !== 'number' || (rate >= 1440 && rate <= 86400) || rate == 0);\n    }\n\n  },\n\n  email: {\n\n    msg: 'A valid email address is required.',\n\n    shouldRun: ExplorerUtils.isEmailExtraction,\n\n    validate: function(model) {\n      return new RegExp(/.+@.+\\..+/i).test(model.query.email);\n    }\n\n  },\n\n  latest: {\n\n    msg: 'Latest must be a number.',\n\n    shouldRun: ExplorerUtils.isEmailExtraction,\n\n    validate: function(model) {\n      var value = model.query.latest;\n      if (!value) return true;\n      var n = ~~Number(value);\n      return String(n) === value && n >= 0;\n    }\n\n  }\n\n};\n","import _ from 'lodash';\n\nmodule.exports = {\n  getQueryDataType: function(query){\n    var isInterval = typeof query.interval === \"string\";\n    var isGroupBy = typeof query.group_by === \"string\" || (query.group_by instanceof Array && query.group_by.length === 1);\n    var is2xGroupBy = query.group_by instanceof Array && query.group_by.length === 2;\n    var dataType;\n\n    if (query.analysis_type === \"funnel\") {\n      dataType = 'cat-ordinal';\n    }\n    else if (query.analysis_type === \"extraction\") {\n      dataType = 'extraction';\n    }\n    else if (query.analysis_type === \"select_unique\") {\n      dataType = 'nominal';\n    }\n\n    // metric\n    else if (!isGroupBy && !isInterval && !is2xGroupBy) {\n      dataType = 'singular';\n    }\n\n    // group_by, no interval\n    else if (isGroupBy && !isInterval) {\n      dataType = 'categorical';\n    }\n\n    // interval, no group_by\n    else if (isInterval && (!isGroupBy && !is2xGroupBy)) {\n      dataType = 'chronological';\n    }\n\n    // interval, group_by\n    else if (isInterval && (isGroupBy || is2xGroupBy)) {\n      dataType = 'cat-chronological';\n    }\n\n    // 2x group_by\n    // TODO: research possible dataType options\n    else if (!isInterval && is2xGroupBy) {\n      dataType = 'categorical';\n    }\n\n    return dataType;\n  },\n\n  getChartTypeOptions: function(query) {\n    var dataTypes = {\n      'singular':           ['metric'],\n      'categorical':        ['piechart', 'barchart', 'columnchart', 'table'],\n      'cat-interval':       ['columnchart', 'barchart', 'table'],\n      'cat-ordinal':        ['barchart', 'columnchart', 'areachart', 'linechart', 'table'],\n      'chronological':      ['areachart', 'linechart', 'table'],\n      'cat-chronological':  ['linechart', 'columnchart', 'barchart', 'areachart', 'table'],\n      'nominal':            ['table'],\n      'extraction':         ['table']\n    };\n    var queryDataType = module.exports.getQueryDataType(query);\n    return dataTypes[queryDataType].concat(['JSON']);\n  },\n\n  responseSupportsChartType: function(query, chartType) {\n    return _.includes(module.exports.getChartTypeOptions(query), chartType);\n  },\n\n  isTableChartType: function(chartType) {\n    return chartType == 'table';\n  }\n}\n","import React from 'react';\nimport _ from 'lodash';\n\nfunction noticeExists(notice) {\n  return notice && !_.isEmpty(notice);\n}\n\nconst NoticeComponent = React.createClass({\n\n  close: function(event) {\n    event.preventDefault();\n    this.setState({ open: false });\n    this.props.closeCallback();\n  },\n\n  getDefaultProps: function() {\n    return {\n      notice: {},\n      closeCallback: function(){},\n      closable: true\n    };\n  },\n\n  getInitialState: function() {\n    return {\n      open: noticeExists(this.props.notice)\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    this.setState({ open: noticeExists(nextProps.notice) });\n  },\n\n  render: function() {\n    var classes = 'notice-component alert';\n    if (!this.state.open) {\n      classes += ' hide';\n    }\n    if (this.props.notice.type) {\n      var type = this.props.notice.type;\n      if (type === 'error') type = 'danger';\n      classes += ' alert-' + type;\n    } else {\n      classes += ' alert-info';\n    }\n\n    var icon;\n    if (this.props.notice.icon) {\n      icon = <span className={\"icon glyphicon glyphicon-\" + this.props.notice.icon}></span>\n    }\n\n    var closeBtn;\n    if (this.props.closable) {\n      closeBtn = <button className=\"close\" onClick={this.close}>&times;</button>;\n    }\n\n    return (\n      <div className={classes} key=\"notice\" ref=\"notice\">\n        {closeBtn}\n        <p>{icon} <strong>{this.props.notice.text || ''}</strong></p>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = NoticeComponent;\n","import _ from 'lodash';\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport ProjectConstants from '../constants/ProjectConstants';\nimport ProjectStore from '../stores/ProjectStore';\nimport ProjectUtils from '../utils/ProjectUtils';\nimport ExplorerUtils from '../utils/ExplorerUtils';\nimport FormatUtils from '../utils/FormatUtils';\n\nconst ProjectActions = {\n\n  create: function(attrs) {\n    AppDispatcher.dispatch({\n      actionType: ProjectConstants.PROJECT_CREATE,\n      attrs: attrs\n    });\n  },\n\n  update: function(id, updates) {\n    var project = ProjectStore.getProject();\n\n    AppDispatcher.dispatch({\n      actionType: ProjectConstants.PROJECT_UPDATE,\n      id: project.id,\n      updates: updates\n    });\n  },\n\n  fetchProjectCollections: function(client) {\n    var project = ProjectStore.getProject();\n    if (!project) console.error(\"Cannot fetchProjectCollections: No project model has been created yet.\");\n\n    return client\n      .get(client.url('projectId'))\n      .auth(client.masterKey())\n      .send()\n      .then(function(res){\n        var schema = _.assign({}, project.schema);\n        _.each(res.events, function(collection) {\n          schema[collection.name] = _.assign(collection, {\n            properties: {},\n            sortedProperties: [],\n            loading: false,\n            recentEvents: null\n          });\n        });\n        ProjectActions.update(project.id, {\n          schema: schema,\n          eventCollections: FormatUtils.sortItems(_.keys(schema)),\n          loading: false\n        });\n      })\n      .catch(function(err){\n        console.error('Error fetching project collections: ', err.stack);\n      });\n  },\n\n  fetchCollectionSchema: function(client, collectionName) {\n    var project = ProjectStore.getProject();\n    if (project.eventCollections.indexOf(collectionName) < 0) {\n      return false;\n    }\n    ProjectActions.updateEventCollection(collectionName, {\n      loading: true\n    });\n    return client\n      .get(client.url('events', encodeURIComponent(collectionName)))\n      .auth(client.masterKey())\n      .send()\n      .then(function(res) {\n        ProjectActions.updateEventCollection(collectionName, {\n          properties: res.properties,\n          sortedProperties: FormatUtils.sortItems(_.keys(res.properties)),\n          loading: false\n        });\n      })\n      .catch(function(err){\n        console.error('Error fetching project collections: ', err.stack);\n      });\n  },\n\n  updateEventCollection: function(collectionName, updates) {\n    var project = ProjectStore.getProject();\n    AppDispatcher.dispatch({\n      actionType: ProjectConstants.PROJECT_UPDATE_EVENT_COLLECTION,\n      id: project.id,\n      collectionName: collectionName,\n      updates: updates\n    });\n  },\n\n  fetchRecentEventsForCollection: function(client, eventCollection) {\n    var project = ProjectStore.getProject();\n    ProjectActions.updateEventCollection(eventCollection, {\n      loading: true\n    });\n    ExplorerUtils.runQuery({\n      client: client,\n      query: {\n        event_collection: eventCollection,\n        analysis_type: 'extraction',\n        latest: 10\n      },\n      success: function(res) {\n        ProjectActions.updateEventCollection(eventCollection, {\n          recentEvents: res.result\n        });\n      },\n      error: function(err) {\n        console.error(\"Error requesting latest events for event collection: \" + eventCollection, err.stack);\n      },\n      complete: function() {\n        ProjectActions.updateEventCollection(eventCollection, {\n          loading: false\n        });\n      }\n    });\n  }\n\n};\n\nmodule.exports = ProjectActions;\n","import React from 'react';\nimport _ from 'lodash';\n\nconst LoaderComponent = React.createClass({\n\n  toggle: function(visible) {\n    this.props.visible = visible;\n    this.forceUpdate();\n  },\n\n  // React Methods\n\n  getDefaultProps: function() {\n    return {\n      visible: false,\n      additionalClasses: false\n    };\n  },\n\n  render: function() {\n    var classes = \"explorer-loader\";\n    if (!this.props.visible) classes += \" hide\";\n    if (this.props.additionalClasses) classes += \" \" + this.props.additionalClasses;\n\n    return (\n      <div className={classes}>\n        <div className=\"msg\">\n          <div className=\"explorer-spinner\">\n            <div className=\"rect1\"></div>\n            <div className=\"rect2\"></div>\n            <div className=\"rect3\"></div>\n            <div className=\"rect4\"></div>\n            <div className=\"rect5\"></div>\n          </div>\n          Loading...\n        </div>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = LoaderComponent;\n","import _ from 'lodash';\nimport { run as RunValidations } from '../utils/RunValidations';\nimport FormatUtils from '../utils/FormatUtils';\n\nfunction isGeoCoercionType(model) {\n  return model.coercion_type === 'Geo';\n}\n\nmodule.exports = {\n\n  property_name: {\n\n    msg: 'Choose a property name',\n\n    validate: function(model) {\n      return (typeof model.property_name === 'string' && model.property_name.length > 0);\n    }\n\n  },\n\n  operator: {\n\n    msg: 'Choose an operator',\n\n    validate: function(model) {\n      return (typeof model.operator === 'string' && model.operator.length > 0);\n    }\n\n  },\n\n  property_value: {\n\n    msg: 'Choose a property value.',\n\n    shouldRun: function(model) {\n      return !isGeoCoercionType(model);\n    },\n\n    validate: function(model) {\n      var value = model.property_value;\n      var coercionType = model.coercion_type;\n\n      if (coercionType == 'List') {\n        return FormatUtils.parseList(value) ? true : false;\n      } else if (coercionType === 'Null' || coercionType === 'Boolean') {\n        return true;\n      } else if (coercionType === 'Number') {\n        return _.isNumber(value);\n      } else if (coercionType === 'String') {\n        return true;\n      } else {\n        return value ? true : false;\n      }\n    }\n\n  },\n\n  coercion_type: {\n\n    msg: 'Choose a coercion type',\n\n    validate: function(model) {\n      return (typeof model.coercion_type ==='string' && model.coercion_type.length > 0);\n    }\n\n  },\n\n  coordinates: {\n\n    msg: 'Provide all coordinates.',\n\n    shouldRun: isGeoCoercionType,\n\n    validate: function(model) {\n      var value = model.property_value.coordinates;\n      var valid = _.isArray(value) && value.length === 2;\n      if (!valid) return valid;\n\n      for(var i=0; i<value.length; i++) {\n        if (!valid) break;\n        valid = _.isNumber(value[i]);\n      }\n      return valid;\n    }\n\n  },\n\n  max_distance_miles: {\n\n    msg: 'Provide a max distance in miles.',\n\n    shouldRun: isGeoCoercionType,\n\n    validate: function(model) {\n      var value = model.property_value.max_distance_miles;\n      return value && _.isNumber(value);\n    }\n\n  }\n\n};\n","import Qs from 'qs';\nimport _ from 'lodash';\n\nmodule.exports = {\n\n  getSearchString: function() {\n    return window.location.search;\n  },\n\n  updateSearchString: function(queryStringData) {\n    var urlPath;\n    if (_.keys(queryStringData).length) {\n      urlPath = '?' + Qs.stringify(queryStringData);\n    } else {\n      urlPath = window.location.origin + window.location.pathname\n    }\n    window.history.pushState({ model: queryStringData }, \"\", urlPath);\n  },\n\n  getQueryAttributes: function() {\n    return Qs.parse(this.getSearchString().replace('?', ''), { depth: 7 });\n  }\n\n};\n","import _ from 'lodash';\nimport React from 'react';\nimport Filter from './filter.js';\nimport Modal from './modal.js';\nimport ProjectUtils from '../../utils/ProjectUtils';\nimport FilterUtils from '../../utils/FilterUtils';\n\nconst FilterManager = React.createClass({\n\n  propTypes: {\n    eventCollection:  React.PropTypes.string,\n    propertyNames:    React.PropTypes.array,\n    filters:          React.PropTypes.array,\n    addFilter:        React.PropTypes.func.isRequired,\n    removeFilter:     React.PropTypes.func.isRequired,\n    handleChange:     React.PropTypes.func.isRequired,\n    getPropertyType:  React.PropTypes.func.isRequired\n  },\n\n  open: function() {\n    this.refs.modal.open();\n  },\n\n  addFilter: function(e) {\n    e.preventDefault();\n    this.props.addFilter();\n  },\n\n  removeFilter: function(index) {\n    this.props.removeFilter(index);\n  },\n\n  handleChange: function(index, name, value) {\n    var updates = _.cloneDeep(this.props.filters[index]);\n\n    if (!_.isNull(name.match('coordinates'))) {\n      var coordinateIndex = parseInt(name.split('.')[1]);\n      updates.property_value.coordinates[coordinateIndex] = FilterUtils.coerceGeoValue(value);\n    } else if (name === 'max_distance_miles' && updates.coercion_type === 'Geo') {\n      updates.property_value[name] = FilterUtils.coerceGeoValue(value);\n    } else {\n      updates[name] = value;\n    }\n\n    this.props.handleChange(index, updates);\n  },\n\n  buildFilterNodes: function() {\n    var filterNodes = this.props.filters.map(function(filter, index) {\n      return(\n        <Filter key={index}\n                index={index}\n                filter={filter}\n                propertyType={this.props.getPropertyType(this.props.eventCollection, filter.property_name)}\n                eventCollection={this.props.eventCollection}\n                propertyNames={this.props.propertyNames}\n                handleChange={this.handleChange}\n                removeFilter={this.removeFilter}\n                filterOperators={ProjectUtils.getConstant('FILTER_OPERATORS')} />\n      );\n    }.bind(this));\n\n    return (\n      <div>\n        {filterNodes}\n        <div className=\"filter-buttons\">\n          <a href=\"#\" className=\"add-filter btn btn-primary\" onClick={this.addFilter}>\n            <i className=\"icon glyphicon glyphicon-plus margin-right-tiny\"></i>\n            Add another filter\n          </a>\n        </div>\n      </div>\n    )\n  },\n\n  noFiltersMarkup: function() {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-10 col-md-offset-1\">\n          <div className=\"no-filters-msg callout\">\n            <p className=\"lead\">\n              <i className=\"icon glyphicon glyphicon-info-sign margin-right-tiny\"></i>\n              Please select an Event Collection before making a filter.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  },\n\n  render: function() {\n    var filterContent = this.props.eventCollection ? this.buildFilterNodes() : this.noFiltersMarkup();\n\n    return (\n      <Modal ref=\"modal\"\n             title=\"Filters\"\n             size=\"large\"\n             onClose={this.modalClosed}\n             modalClasses=\"filters-modal\"\n             footerBtns={[\n              {\n                text: 'Done',\n                classes: 'btn-success',\n                iconName: 'ok-circle'\n              }\n            ]}>\n        <div className=\"filters\">\n          {filterContent}\n        </div>\n      </Modal>\n    );\n  }\n});\n\nmodule.exports = FilterManager;\n","import _ from 'lodash';\nimport React from 'react';\nimport ReactSelect from './react_select.js';\n\nconst premadeTimes = [\n  '12:00 AM',\n  '12:15 AM',\n  '12:30 AM',\n  '12:45 AM',\n  '01:00 AM',\n  '01:15 AM',\n  '01:30 AM',\n  '01:45 AM',\n  '02:00 AM',\n  '02:15 AM',\n  '02:30 AM',\n  '02:45 AM',\n  '03:00 AM',\n  '03:15 AM',\n  '03:30 AM',\n  '03:45 AM',\n  '04:00 AM',\n  '04:15 AM',\n  '04:30 AM',\n  '04:45 AM',\n  '05:00 AM',\n  '05:15 AM',\n  '05:30 AM',\n  '05:45 AM',\n  '06:00 AM',\n  '06:15 AM',\n  '06:30 AM',\n  '06:45 AM',\n  '07:00 AM',\n  '07:15 AM',\n  '07:30 AM',\n  '07:45 AM',\n  '08:00 AM',\n  '08:15 AM',\n  '08:30 AM',\n  '08:45 AM',\n  '09:00 AM',\n  '09:15 AM',\n  '09:30 AM',\n  '09:45 AM',\n  '10:00 AM',\n  '10:15 AM',\n  '10:30 AM',\n  '10:45 AM',\n  '11:00 AM',\n  '11:15 AM',\n  '11:30 AM',\n  '11:45 AM',\n  '12:00 PM',\n  '12:15 PM',\n  '12:30 PM',\n  '12:45 PM',\n  '01:00 PM',\n  '01:15 PM',\n  '01:30 PM',\n  '01:45 PM',\n  '02:00 PM',\n  '02:15 PM',\n  '02:30 PM',\n  '02:45 PM',\n  '03:00 PM',\n  '03:15 PM',\n  '03:30 PM',\n  '03:45 PM',\n  '04:00 PM',\n  '04:15 PM',\n  '04:30 PM',\n  '04:45 PM',\n  '05:00 PM',\n  '05:15 PM',\n  '05:30 PM',\n  '05:45 PM',\n  '06:00 PM',\n  '06:15 PM',\n  '06:30 PM',\n  '06:45 PM',\n  '07:00 PM',\n  '07:15 PM',\n  '07:30 PM',\n  '07:45 PM',\n  '08:00 PM',\n  '08:15 PM',\n  '08:30 PM',\n  '08:45 PM',\n  '09:00 PM',\n  '09:15 PM',\n  '09:30 PM',\n  '09:45 PM',\n  '10:00 PM',\n  '10:15 PM',\n  '10:30 PM',\n  '10:45 PM',\n  '11:00 PM',\n  '11:15 PM',\n  '11:30 PM',\n  '11:45 PM',\n];\n\nfunction parseTime(timeStr, dt) {\n  if (!dt) {\n    dt = new Date();\n  }\n\n  var time = timeStr.match(/(\\d+)(?::(\\d\\d))?\\s*(p?)/i);\n  if (!time) {\n    return NaN;\n  }\n  var hours = parseInt(time[1], 10);\n  if (hours == 12 && !time[3]) {\n    hours = 0;\n  }\n  else {\n    hours += (hours < 12 && time[3]) ? 12 : 0;\n  }\n\n  dt.setHours(hours);\n  dt.setMinutes(parseInt(time[2], 10) || 0);\n  dt.setSeconds(0, 0);\n  return dt;\n}\n\nvar Timepicker = React.createClass({\n\n  validateTime: function(value) {\n    var parsed = parseTime(value);\n    if (parsed instanceof Date) {\n      this.setState({ errorMsg: false });\n      return true;\n    } else {\n      this.setState({ errorMsg: 'Invalid time' });\n      return false;\n    }\n  },\n\n  handleBlur: function(event) {\n    if (this.validateTime(event.target.value)) {\n      this.props.handleBlur(event.target.name, parseTime(event.target.value).getTime());\n    }\n  },\n\n  handleSelection: function(name, selection) {\n    if (this.validateTime(selection)) {\n      this.props.handleSelection(name, parseTime(selection).getTime());\n    }\n  },\n\n  handleChange: function(name, value) {\n    this.setState({ value: value });\n    this.props.handleChange(name, value);\n  },\n\n  // React methods\n\n  getInitialState: function() {\n    return {\n      errorMsg: false,\n      value: this.props.value\n    };\n  },\n\n  getDefaultProps: function () {\n    return {\n      refValue: 'timepicker',\n      label: false,\n      handleBlur: function(){},\n      handleChange: function(){},\n      handleSelection: function(){},\n      placeholder: '',\n      classes: 'timepicker-wrapper form-group'\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    if (nextProps.value != this.state.value) {\n      this.setState({ value: nextProps.value });\n    }\n  },\n\n  render: function() {\n    var label = this.props.label ? <label htmlFor={this.props.name}>{this.props.label}</label> : null;\n    var errorMsg = this.state.errorMsg ? <p>{this.state.errorMsg}</p> : null;\n\n    return (\n      <div className={this.props.classes}>\n        {label}\n        <ReactSelect ref={this.props.refValue}\n                     name={this.props.name}\n                     inputClasses=\"form-control\"\n                     items={premadeTimes}\n                     handleBlur={this.handleBlur}\n                     handleChange={this.handleChange}\n                     handleSelection={this.handleSelection}\n                     value={this.state.value}\n                     title={this.props.name}\n                     sort={true} />\n        {errorMsg}\n      </div>\n    );\n  }\n});\n\nmodule.exports = Timepicker;\n","import _ from 'lodash';\nimport React from 'react';\nimport moment from 'moment';\n\nimport pickadate from '../../../vendor/picker.js';\nimport '../../../vendor/picker.date.js';\nimport '../../../vendor/picker.time.js';\n\nconst Datepicker = React.createClass({\n\n  handleOnBlur: function(event) {\n    this.destroyPicker();\n    var value = event.target.value;\n    var isValid = moment(new Date(value)).isValid();\n\n    if (isValid) {\n      this.props.onBlur(event);\n      this.setState({ errorMsg: false });\n    } else if (value && !isValid) {\n      this.setState({ errorMsg: 'Invalid' });\n    }\n  },\n\n  onFocus: function() {\n    var minimum = this.props.minimum;\n    $(this.refs[this.props.refValue]).pickadate({\n      format: 'mmm d, yyyy',\n      editable: true,\n      min: minimum,\n      onSet: _.bind(function(args) {\n        this.props.onSet(this.props.name, new Date(this.refs.datepicker.value));\n      }, this)\n    });\n  },\n\n  destroyPicker: function() {\n    var picker = $(this.refs[this.props.refValue]).pickadate('picker');\n    if (picker) picker.stop();\n  },\n\n  // React methods\n\n  getInitialState: function() {\n    return {\n      errorMsg: false\n    };\n  },\n\n  getDefaultProps: function () {\n    return {\n      refValue: 'datepicker',\n      label: false,\n      onChange: function(){},\n      placeholder: '',\n      classes: 'datepicker-wrapper form-group',\n      onSet: function(){}\n    };\n  },\n\n  render: function() {\n    var label = this.props.label ? <label htmlFor={this.props.name}>{this.props.label}</label> : null;\n    var errorMsg = this.state.errorMsg ? <p>{this.state.errorMsg}</p> : '';\n\n    return (\n      <div className={this.props.classes}>\n        {label}\n        <input type=\"text\"\n               ref={this.props.refValue}\n               name={this.props.name}\n               className=\"form-control\"\n               value={this.props.value}\n               onChange={this.props.onChange}\n               onBlur={this.handleOnBlur}\n               onFocus={this.onFocus}\n               placeholder={this.props.placeholder}\n               autoComplete=\"off\" />\n        {errorMsg}\n      </div>\n    );\n  }\n});\n\nmodule.exports = Datepicker;\n","import _ from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport AbsolutePicker from './absolute_picker.js';\nimport RelativePicker from './relative_picker.js';\nimport FieldsToggle from './fields_toggle.js';\nimport ReactSelect from './react_select.js';\nimport Timezone from './timezone.js';\nimport ExplorerActions from '../../actions/ExplorerActions';\nimport TimeframeUtils from '../../utils/TimeframeUtils';\nimport ProjectUtils from '../../utils/ProjectUtils';\n\nfunction relativeDefaults() {\n  return {\n    relativity: 'this',\n    amount: '14',\n    sub_timeframe: 'days'\n  };\n}\n\nfunction absoluteDefaults() {\n  return {\n    start: new Date(moment().subtract(1, 'days').startOf('day').format()),\n    end: new Date(moment().startOf('day').format())\n  };\n}\n\nvar Timeframe = React.createClass({\n\n  toggleTimeframeType: function(event) {\n    event.preventDefault();\n    var type = event.currentTarget.dataset.type;\n\n    this.props.handleChange('time', (type === 'absolute') ? absoluteDefaults() : relativeDefaults());\n  },\n\n  isAbsolute: function() {\n    return TimeframeUtils.timeframeType(this.props.time) === 'absolute';\n  },\n\n  isRelative: function() {\n    return TimeframeUtils.timeframeType(this.props.time) === 'relative';\n  },\n\n  // React Methods\n\n  render: function() {\n    var timezone = this.props.timezone || ProjectUtils.getConstant('DEFAULT_TIMEZONE');\n\n    if (this.isAbsolute()) {\n      var timeframePicker = <AbsolutePicker time={this.props.time}\n                            handleChange={this.props.handleChange} />;\n    } else {\n      var timeframePicker = <RelativePicker relativeIntervalTypes={ProjectUtils.getConstant('RELATIVE_INTERVAL_TYPES')}\n                                            time={this.props.time}\n                                            handleChange={this.props.handleChange} />;\n    }\n\n    return (\n      <div className=\"timeframe\">\n        <div className=\"field-component\">\n          <label>Timeframe</label>\n          <ul className=\"nav nav-pills\" role=\"tablist\">\n            <li className={this.isRelative() ? 'active' : ''}>\n              <a href=\"#\" className=\"relative-tab\" data-type=\"relative\" onClick={this.toggleTimeframeType}>Relative</a>\n            </li>\n            <li className={this.isAbsolute() ? 'active' : ''}>\n              <a href=\"#\" className=\"absolute-tab\" data-type=\"absolute\" onClick={this.toggleTimeframeType}>Absolute</a>\n            </li>\n          </ul>\n          {timeframePicker}\n          <Timezone timezone={this.props.timezone}\n                    timeframe_type={TimeframeUtils.timeframeType(this.props.time)}\n                    handleChange={this.props.handleChange} />\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = Timeframe;\n","import React from 'react';\nimport _ from 'lodash';\n\n// Components\nimport ReactSelect from '../../common/react_select.js';\n\nconst SelectField = React.createClass({\n\n  getDefaultProps: function() {\n    return {\n      sort: false,\n      inputClasses: []\n    }\n  },\n\n  buildBrowseEventsLink: function() {\n    if (this.props.onBrowseEvents) {\n      return (\n        <button className=\"btn btn-link field-secondary-control\" title=\"Browse event collections\" type=\"button\" onClick={this.props.onBrowseEvents} id=\"browse-event-collections\">\n          <span className=\"icon glyphicon glyphicon-search\"></span> Preview collections\n        </button>\n      );\n    }\n  },\n\n  // React methods\n\n  render: function() {\n    var requiredNote = (this.props.requiredLabel) ? <small>(required)</small> : null;\n\n    return (\n      <div className=\"field-component\">\n        <label htmlFor={this.props.name}>{this.props.label} {requiredNote}</label>\n        <ReactSelect ref=\"select\"\n                     name={this.props.name}\n                     inputClasses={this.props.inputClasses.join(' ') + ' form-control'}\n                     items={this.props.options}\n                     handleChange={this.props.handleChange}\n                     value={this.props.value}\n                     sort={this.props.sort} />\n        {this.buildBrowseEventsLink()}\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = SelectField;\n","import keyMirror from 'keymirror';\n\nmodule.exports = keyMirror({\n  NOTICE_CREATE: null,\n  NOTICE_CLEAR_ALL: null\n});\n","import _ from 'lodash';\nimport FormatUtils from '../utils/FormatUtils';\nimport SharedValidators from './SharedValidators';\n\nmodule.exports = {\n\n  event_collection: {\n\n    msg: 'Choose an Event Collection.',\n\n    validate: function(model) {\n      return (typeof model.event_collection ==='string' && model.event_collection.length > 0);\n    }\n\n  },\n\n  actor_property: {\n\n    msg: 'You must select an actor property',\n\n    validate: function(model) {\n      return (typeof model.actor_property ==='string' && model.actor_property.length > 0);\n    },\n\n  },\n\n  time: {\n\n    validate: function(model) {\n      return SharedValidators.time(model.time);\n    }\n\n  },\n\n  filters: {\n\n    msg: 'One of your filters is invalid.',\n\n    validate: function(model) {\n      return SharedValidators.filters(model.filters);\n    }\n\n  },\n\n\n  optional: {\n\n    msg: 'You must select whether this step is optional.',\n\n    validate: function(model) {\n      if (FormatUtils.isNullOrUndefined(model.optional)) return false;\n      return typeof model.optional === 'boolean';\n    }\n\n  },\n\n  inverted: {\n\n    msg: 'You must select whether this step is inverted.',\n\n    validate: function(model) {\n      if (FormatUtils.isNullOrUndefined(model.inverted)) return false;\n      return typeof model.inverted === 'boolean';\n    }\n\n  },\n\n  with_actors: {\n\n    msg: '\"with_actors\" must be set to either true or false',\n\n    validate: function(model) {\n      if (FormatUtils.isNullOrUndefined(model.with_actors)) return false;\n      return typeof model.with_actors === 'boolean';\n    }\n\n  },\n\n};\n","import _ from 'lodash';\nimport { run as RunValidations } from '../utils/RunValidations';\nimport FilterValidations from '../validations/FilterValidations';\nimport TimeframeUtils from '../utils/TimeframeUtils';\nimport FilterUtils from '../utils/FilterUtils';\n\nmodule.exports = {\n\n  filters: function(filters) {\n    if (!filters || (_.isArray(filters) && !filters.length)) return true;\n    var isValid = true\n    for (var i=0; i<filters.length; i++) {\n      if (!FilterUtils.isComplete(filters[i])) continue;\n      RunValidations(FilterValidations, filters[i]);\n      if (!filters[i].isValid) isValid = false\n    }\n    return isValid;\n  },\n\n  time: function(time) {\n    var defaultError = \"You must provide a timeframe.\";\n\n    if (!time) return defaultError;\n    if (TimeframeUtils.timeframeType(time) === 'relative') {\n      if (time.relativity && time.amount && time.sub_timeframe) return true;\n      return \"You must choose all 3 options for relative timeframes.\";\n    }\n    if (TimeframeUtils.timeframeType(time) === 'absolute') {\n      if (time.start && time.end) return true;\n      return \"You must provide a start and end time for absolute timeframes.\";\n    }\n\n    return defaultError;\n  }\n\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport classNames from 'classnames';\n\nconst Modal = React.createClass({\n\n  closeClick: function(event) {\n    event.preventDefault();\n    this.close();\n  },\n\n  backdropClick: function(event) {\n    if (!$(event.target).closest('.modal-dialog').length) {\n      this.close();\n    }\n  },\n\n  close: function(){\n    if (this.state.open) {\n      this.removeBackdrop();\n      this.setState({ open: false });\n      this.props.onClose();\n    }\n  },\n\n  open: function() {\n    if (!this.state.open) {\n      this.addBackdrop();\n      this.setState({ open: true });\n      this.props.onOpen();\n    }\n  },\n\n  setLoading: function(value) {\n    if (typeof value === \"boolean\") {\n      this.setState({ loading: value });\n    }\n  },\n\n  addBackdrop: function() {\n    $('body').addClass('modal-open');\n\n    var backdropEl = document.createElement('div');\n    backdropEl.id = 'modal-backdrop';\n    backdropEl.className = 'modal-backdrop in';\n    document.body.appendChild(backdropEl);\n  },\n\n  removeBackdrop: function(){\n    $('body').removeClass('modal-open');\n    $('.modal-backdrop').remove();\n  },\n\n  buildFooter: function() {\n    if (this.props.footerBtns.length) {\n      var footerBtns = _.map(this.props.footerBtns, _.bind(function(btnConfig, index){\n        var text = btnConfig.text;\n\n        var classes = 'btn';\n        if (btnConfig.classes) {\n          classes = classes + ' ' + btnConfig.classes;\n        } else {\n          classes = classes + ' btn-default';\n        }\n\n        var icon;\n        if (btnConfig.iconName) {\n          var iconClass = 'icon glyphicon glyphicon-' + btnConfig.iconName;\n          var icon = (<span className={iconClass}></span>);\n        }\n\n        return (\n          <button type=\"button\" ref={btnConfig.ref || ''} className={classes} onClick={btnConfig.onClick || this.close} key={index}>\n            {icon}\n            {text}\n          </button>\n        );\n      }, this));\n\n      return (\n        <div className=\"modal-footer\">\n          {footerBtns}\n        </div>\n      );\n    }\n  },\n\n  // Lifecycle hooks\n\n  getInitialState: function() {\n    return {\n      open: false,\n      loading: false\n    };\n  },\n\n  getDefaultProps: function() {\n    return {\n      size: 'small',\n      modalClasses: '',\n      footerBtns: [],\n      onOpen: function(){},\n      onClose: function(){}\n    };\n  },\n\n  componentDidMount: function() {\n    $(document).on('click', '.modal.block', _.bind(this.backdropClick, this));\n    $(document).on('keyup', _.bind(function(e) {\n      // Escapism?\n      if (e.keyCode === 27 && e.target.className.indexOf('react-select-input') < 0) {\n        this.close();\n      }\n    }, this));\n  },\n\n  componentWillUnmount: function() {\n    $(document).off('click', '.modal-backdrop');\n  },\n\n  render: function() {\n    var modalClasses = this.props.modalClasses + ' modal';\n    if (this.state.open) {\n      modalClasses += ' block';\n    }\n    var modalDialogClasses = classNames({\n      'modal-dialog': true,\n      'modal-lg': this.props.size === 'large'\n    });\n\n    var titleIcon;\n    if (this.props.titleIcon) {\n      var titleIconClasses = \"icon glyphicon glyphicon-\" + this.props.titleIcon;\n      if (!this.props.title) titleIconClasses += \" big no-margin\";\n      if (this.props.iconClasses) titleIconClasses = titleIconClasses + \" \" + this.props.iconClasses;\n      titleIcon = <span className={titleIconClasses}></span>\n    }\n\n    return (\n      <div className={modalClasses}>\n        <div className={modalDialogClasses}>\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <button type=\"button\" className=\"close\" onClick={this.closeClick}>\n                <span aria-hidden=\"true\">&times;</span>\n                <span className=\"sr-only\">Close</span>\n              </button>\n              <h3 className=\"modal-title\">\n                {titleIcon}\n                {this.props.title}\n              </h3>\n            </div>\n            <div className=\"modal-body\">\n              {this.props.children}\n            </div>\n            {this.buildFooter()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = Modal;\n","import keyMirror from 'keymirror';\n\nmodule.exports = keyMirror({\n  APP_STATE_UPDATE: null,\n  APP_STATE_RESET: null\n});\n","import _ from 'lodash';\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport { EventEmitter } from 'events';\nimport AppStateConstants from '../constants/AppStateConstants';\n\nconst CHANGE_EVENT = 'change';\n\nfunction defaultState() {\n  return {\n    fetchingPersistedExplorers: false,\n    codeSampleHidden: true,\n    ready: false\n  };\n}\n\nvar _appState = defaultState();\n\nfunction _update(updates) {\n  _appState = _.assign({}, _appState, updates);\n}\n\nfunction _reset() {\n  _appState = defaultState();\n}\n\nvar AppStateStore = _.assign({}, EventEmitter.prototype, {\n  unregisterWithDispatcher: function() {\n    AppDispatcher.unregister(this.dispatchToken);\n  },\n\n  getState: function() {\n    return _appState;\n  },\n\n  reset: function() {\n    _reset();\n  },\n\n  emitChange: function() {\n    this.emit(CHANGE_EVENT);\n  },\n\n  addChangeListener: function(callback) {\n    this.on(CHANGE_EVENT, callback);\n  },\n\n  removeChangeListener: function(callback) {\n    this.removeListener(CHANGE_EVENT, callback);\n  }\n});\n\n// Register callback to handle all updates\nAppStateStore.dispatchToken = AppDispatcher.register(function(action) {\n  switch(action.actionType) {\n    case AppStateConstants.APP_STATE_UPDATE:\n      _update(action.updates);\n      AppStateStore.emitChange();\n      break;\n\n    case AppStateConstants.APP_STATE_RESET:\n      _reset();\n      AppStateStore.emitChange();\n      break;\n\n    default:\n      // no op\n  }\n\n  return true;\n});\n\nmodule.exports = AppStateStore;\n","import keyMirror from 'keymirror';\n\nmodule.exports = keyMirror({\n  PROJECT_CREATE: null,\n  PROJECT_UPDATE: null,\n  PROJECT_UPDATE_EVENT_COLLECTION: null\n});\n","module.exports = __WEBPACK_EXTERNAL_MODULE__44__;","module.exports = __WEBPACK_EXTERNAL_MODULE__45__;","import _ from 'lodash';\nimport AppDispatcher from '../dispatcher/AppDispatcher';\nimport { EventEmitter } from 'events';\nimport NoticeConstants from '../constants/NoticeConstants';\nimport ExplorerConstants from '../constants/ExplorerConstants';\nimport ExplorerStore from '../stores/ExplorerStore';\n\nconst CHANGE_EVENT = 'change';\n\nlet _notices = {};\n\nfunction defaultAttrs() {\n  return {\n    location: 'global',\n    text: null,\n    type: null\n  };\n}\n\nfunction _removeGlobalNotices() {\n  _.each(_notices, function(val, key) {\n    if (val.location === 'global') delete _notices[key];\n  });\n}\n\nfunction _removeStepNotices() {\n  _.each(_notices, function(val, key) {\n    if (val.location === 'step') delete _notices[key];\n  });\n}\n\nfunction _create(attrs) {\n  if (!attrs.location || attrs.location === 'global') {\n    _removeGlobalNotices();\n  }\n  var tempId = \"TEMP-\" + (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n  _notices[tempId] = _.assign(defaultAttrs(), attrs);\n}\n\nfunction _clearAll() {\n  _notices = {};\n}\n\nvar NoticeStore = _.assign({}, EventEmitter.prototype, {\n  unregisterWithDispatcher: function() {\n    AppDispatcher.unregister(this.dispatchToken);\n  },\n\n  getGlobalNotice: function() {\n    return _.find(_notices, { location: 'global' });\n  },\n\n  getStepNotices: function() {\n    return _.filter(_notices, function(notice) {\n      if (notice.location === 'step') return notice;\n    });\n  },\n\n  clearAll: function() {\n    _clearAll();\n  },\n\n  emitChange: function() {\n    this.emit(CHANGE_EVENT);\n  },\n\n  addChangeListener: function(callback) {\n    this.on(CHANGE_EVENT, callback);\n  },\n\n  removeChangeListener: function(callback) {\n    this.removeListener(CHANGE_EVENT, callback);\n  }\n});\n\n// Register callback to handle all updates\nNoticeStore.dispatchToken = AppDispatcher.register(function(action) {\n  AppDispatcher.waitFor([ExplorerStore.dispatchToken]);\n\n  switch(action.actionType) {\n    case NoticeConstants.NOTICE_CREATE:\n      _create(action.attrs);\n      NoticeStore.emitChange();\n      break;\n\n    case NoticeConstants.NOTICE_CLEAR_ALL:\n      _clearAll();\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVING:\n      var text = action.saveType === 'save' ? 'Saving query...' : 'Updating query...';\n      _create({\n        type: 'info',\n        text: text,\n        icon: 'info-sign'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVE_SUCCESS:\n      var text = action.saveType === 'save' ? 'Query saved' : 'Query updated';\n      _create({\n        type: 'success',\n        text: text + '.',\n        icon: 'ok'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_SAVE_FAIL:\n      var msg;\n      var text = action.saveType === 'save' ? 'saving' : 'updating';\n      if (action.errorMsg) {\n        msg = 'Problem ' + text + ': ' + action.errorMsg;\n      } else if (action.errorResp && JSON.parse(action.errorResp.text).error_code === \"OverCachedQueryLimitError\") {\n        msg = 'Oops! Looks like youve reached your caching limit. Need more cached queries? Contact us at team@keen.io';\n      } else if (action.errorResp) {\n        msg = 'Problem ' + text + ': ' + JSON.parse(action.errorResp.text).message;\n      }\n      _create({\n        type: 'error',\n        text: msg,\n        icon: 'remove-sign'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_DESTROYING:\n      _create({\n        type: 'info',\n        text: 'Deleting query...',\n        icon: 'info-sign'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_DESTROY_SUCCESS:\n      _create({\n        type: 'success',\n        text: 'Query deleted.',\n        icon: 'ok'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_DESTROY_FAIL:\n      _create({\n        type: 'error',\n        text: 'There was a problem deleting your query: ' + action.errorMsg,\n        icon: 'remove-sign'\n      });\n      NoticeStore.emitChange();\n      break;\n\n    case ExplorerConstants.EXPLORER_FOUND_INVALID:\n      var explorer = ExplorerStore.get(action.id);\n      _create({\n        text: 'There was a problem: ' + explorer.errors[0].msg,\n        type: 'error',\n        icon: 'remove-sign'\n      });\n      if (explorer.query.analysis_type === 'funnel') {\n        _removeStepNotices();\n        explorer.query.steps.forEach(function(step, index) {\n          if (!step.isValid) {\n            _create({\n              id: explorer.id,\n              location: 'step',\n              stepIndex: index,\n              text: step.errors[0].msg,\n              type: 'error',\n              icon: 'remove-sign',\n            });\n          }\n        });\n      }\n      NoticeStore.emitChange();\n      break;\n\n    default:\n      // no op\n  }\n\n  return true;\n});\n\nmodule.exports = NoticeStore;\n","import React from 'react';\nimport classNames from 'classnames';\nimport _ from 'lodash';\nimport ExplorerUtils from '../../utils/ExplorerUtils';\n\nconst QueryActions = React.createClass({\n\n  runBtnStates: {\n    default: {\n      inactive: 'Run Query',\n      active: 'Running...'\n    },\n    immediateExtraction: {\n      inactive: 'Run Extraction',\n      active: 'Running...'\n    },\n    emailExtraction: {\n      inactive: 'Send Email Extraction',\n      active: 'Sending...'\n    }\n  },\n\n  runButtonText: function() {\n    var btnStates = this.runBtnStates.default;\n\n    if (ExplorerUtils.isEmailExtraction(this.props.model)) {\n      btnStates = this.runBtnStates.emailExtraction;\n    } else if (ExplorerUtils.isImmediateExtraction(this.props.model)) {\n      btnStates = this.runBtnStates.immediateExtraction;\n    }\n\n    return this.props.model.loading ? btnStates.active : btnStates.inactive;\n  },\n\n  render: function() {\n    var saveMsg,\n        saveBtn,\n        cloneBtn,\n        deleteBtn,\n        actionsSupported = true,\n        runButtonClasses = classNames({\n          'disabled': this.props.model.loading,\n          'btn btn-primary run-query': true\n        }),\n        codeSampleBtnClasses = classNames({\n          'btn btn-default code-sample-toggle pull-right': true,\n          'open': !this.props.codeSampleHidden\n        });\n\n    var isEmailExtraction = ExplorerUtils.isEmailExtraction(this.props.model);\n    var isPersisted = ExplorerUtils.isPersisted(this.props.model);\n    var isFunnel = this.props.model.query.analysis_type === 'funnel';\n\n    if (this.props.persistence) {\n      if (isEmailExtraction) {\n        actionsSupported = false;\n        saveMsg = (\n          <p className=\"no-margin margin-top-tiny\">\n            <small>The Keen IO API currently does not support saving email extraction.</small>\n          </p>\n        );\n      }\n      saveBtn = (\n        <button type=\"button\" className=\"btn btn-success save-query\" onClick={actionsSupported ? this.props.saveQueryClick : function(){}} role=\"save-query\" disabled={this.props.model.loading || !actionsSupported}>\n          {isPersisted ? 'Update' : 'Save'}\n        </button>\n      );\n      deleteBtn = (\n        <button type=\"button\" role=\"delete-query\" className=\"btn btn-link\" onClick={actionsSupported ? this.props.removeClick : function(){}} disabled={!actionsSupported}>\n          Delete\n        </button>\n      );\n      if (isPersisted) {\n        cloneBtn = (\n          <button type=\"button\" className=\"btn btn-default\" onClick={actionsSupported ? this.props.cloneQueryClick : function(){}} role=\"clone-query\" disabled={this.props.model.loading || !actionsSupported}>\n            Clone\n          </button>\n        );\n      }\n    }\n\n    return (\n      <div className=\"query-actions clearfix\">\n        <div className=\"row\">\n          <div className=\"col-md-10 clearfix\">\n            <div className=\"run-group pull-left\">\n              <button type=\"submit\" role=\"run-query\" className={runButtonClasses} id=\"run-query\" onClick={this.props.handleQuerySubmit}>\n                {this.runButtonText()}\n              </button>\n            </div>\n            <div className=\"manage-group pull-left\">\n              {saveBtn}\n              {cloneBtn}\n              {deleteBtn}\n            </div>\n          </div>\n          <div className=\"col-md-2\">\n            <button className={codeSampleBtnClasses} role=\"toggle-code-sample\" onClick={this.props.toggleCodeSample}>\n              <span>&lt;/&gt; Embed</span>\n            </button>\n          </div>\n        </div>\n        {saveMsg}\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = QueryActions;\n","import React from 'react';\nimport _ from 'lodash';\nimport classNames from 'classnames';\nimport moment from 'moment';\n\nimport ExplorerActions from '../../actions/ExplorerActions';\nconst refreshRateMultiplier = 60 * 60;\n\nconst CacheToggle = React.createClass({\n\n  setCached: function(event) {\n    var updates = _.clone(this.props.model);\n    if (this._isCached()) {\n      updates.refresh_rate = 0;\n    }\n    else {\n      updates.refresh_rate = 14400;\n    }\n\n    ExplorerActions.update(this.props.model.id, updates);\n    this.setState({\n      settingsOpen: updates.refresh_rate == 0 ? false : this.state.settingsOpen\n    });\n  },\n\n  setSettingsOpen: function(event) {\n    event.preventDefault();\n    this.setState({ settingsOpen: !this.state.settingsOpen });\n  },\n\n  setRefreshRate: function(event) {\n    this.setState({ refresh_rate: event.target.value });\n  },\n\n  setRefreshRateBlur: function(event) {\n    var refresh_rate = Math.round(event.target.value*refreshRateMultiplier);\n    var updates = _.clone(this.props.model);\n    updates.refresh_rate = refresh_rate;\n\n    ExplorerActions.update(this.props.model.id, updates);\n    this.forceUpdate();\n  },\n\n  getInitialState: function() {\n    return {\n      refresh_rate: this._refreshRateInHours(this.props.model),\n      cached: false,\n      settingsOpen: false\n    };\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    this.setState({ refresh_rate: this._refreshRateInHours(nextProps.model) });\n  },\n\n  render: function() {\n    var isCached = this._isCached();\n    var parentClasses = classNames({\n      'cache-toggle': true,\n      'inactive': !isCached\n    });\n    var cacheDetailsClasses = classNames({\n      \"cache-details\": true,\n      \"hide\": !isCached\n    });\n    var cacheSettingsClasses = classNames({\n      \"cache-settings\": true,\n      \"hide\": !this.state.settingsOpen\n    });\n\n    var cacheToggleLabel = isCached? 'Caching enabled' : 'Enable caching';\n\n    return (\n      <div className={parentClasses}>\n\n        <label htmlFor=\"cache\">\n          <input type=\"checkbox\" name=\"cache\" id=\"cache\"\n            onChange={this.setCached} checked={isCached} />\n          {cacheToggleLabel}\n          <a href=\"https://keen.io/docs/api/#saved-queries\" target=\"_blank\">\n            <i className=\"icon glyphicon glyphicon-question-sign\"></i>\n          </a>\n        </label>\n\n        <span className={cacheDetailsClasses}>\n          {this._minutesAgo()}\n          <a href=\"#\" onClick={this.setSettingsOpen} className=\"margin-left-tiny\">\n            <span className=\"icon icon-cog glyphicon-cog glyphicon\"></span>\n          </a>\n        </span>\n\n        <span className={cacheSettingsClasses}>\n          Refresh every <input type=\"text\"\n                               name=\"refresh_rate\"\n                               value={this.state.refresh_rate}\n                               className=\"form-control\"\n                               onChange={this.setRefreshRate}\n                               onBlur={this.setRefreshRateBlur} /> hours ({\"min 4 / max 24\"})\n        </span>\n      </div>\n    );\n  },\n\n  _isCached: function() {\n    return this.props.model.refresh_rate != 0;\n  },\n\n  _minutesAgo: function() {\n    var runInformation = this.props.model.run_information;\n\n    if (runInformation != null && runInformation.last_run_status == 200) {\n      var lastRun = moment(runInformation.last_run_date).utcOffset(0);\n      var duration = moment.duration(lastRun.diff(moment())).humanize();\n      return 'Last updated ' + duration +\n          ' ago.';\n    }\n  },\n\n  _refreshRateInHours: function(model) {\n    return (model.refresh_rate/refreshRateMultiplier) * 100 / 100;\n  }\n\n});\n\nmodule.exports = CacheToggle;\n","import React from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nfunction dateForItem(item) {\n  if (item.created_date) {\n    var datetime = moment(new Date(item.created_date.replace(' ', 'T')));\n    return datetime.isValid() ? datetime.format('ll h:mm A') : null;\n  }\n}\n\nconst BrowseQueries = React.createClass({\n\n  clickCallback: function(event) {\n    this.props.clickCallback(event);\n  },\n\n  buildList: function() {\n    var listElements = this.props.listItems.map(_.bind(function(listItem, index) {\n      var isSelected = (this.props.selectedIndex === index) ? true : false;\n      var classes;\n      if (isSelected) classes = 'active';\n      var createdAt;\n      var datetime = dateForItem(listItem);\n      if (datetime) {\n        createdAt = (\n          <p className=\"date pull-right\">\n            <span className=\"icon glyphicon glyphicon-time\"></span>\n            {datetime}\n          </p>\n        );\n      }\n      var isCachedText = listItem.refresh_rate > 0 ? 'Cached' : '';\n\n      var displayName = null;\n      if (listItem.metadata && listItem.metadata.display_name) {\n        displayName = listItem.metadata.display_name;\n      } else if (listItem.query_name) {\n        displayName = listItem.query_name;\n      } else {\n        displayName = 'Query not named';\n      }\n\n      return (\n        <li className={classes} key={index} data-id={listItem.id} onClick={this.clickCallback}>\n          <h5 className=\"name\">{displayName}</h5>\n          <div className=\"metadata clearfix\">\n            <p className=\"date pull-left\">{isCachedText}</p>\n            {createdAt}\n          </div>\n        </li>\n      );\n    }, this));\n    return (\n      <ul ref=\"list\" className=\"interactive-list\">\n        {listElements}\n      </ul>\n    );\n  },\n\n  fieldChanged: function(event) {\n    var newState = {};\n    newState[event.target.name] = event.target.value;\n    this.setState(newState);\n  },\n\n  getDefaultProps: function() {\n    return {\n      listItems: [],\n      clickCallback: null,\n      selectedIndex: null,\n      notice: null,\n      emptyContent: null\n    };\n  },\n\n  render: function() {\n    var emptyContent = this.props.listItems.length ? null: this.props.emptyContent;\n    var listItems = this.buildList();\n\n    return (\n      <section className=\"query-pane-section browse-queries\">\n        {this.props.notice}\n        {listItems}\n        {emptyContent}\n      </section>\n    );\n  }\n\n});\n\nmodule.exports = BrowseQueries;\n","import React from 'react';\n\nconst ApiUrl = React.createClass({\n\n  getInitialState: function(){\n    return {\n      active: false\n    }\n  },\n\n  handleClick: function(){\n    var self = this;\n    self.setState({ active: !self.state.active });\n    if (!self.state.active) {\n      setTimeout(function(){\n        self.refs['input'].focus();\n      }, 50);\n    }\n  },\n\n  handleInputSelect: function(e){\n    e.target.setSelectionRange(0, 9999);\n  },\n\n  handleInputChange: function(e){\n    e.preventDefault();\n  },\n\n  render: function(){\n    return (\n      <div className=\"explorer-api-url\">\n        <button className=\"btn btn-link field-secondary-control\" title=\"API URL\" type=\"button\" onClick={this.handleClick}>\n          <span className={\"icon glyphicon glyphicon-chevron-\" + (this.state.active ? \"down\" : \"right\") + \" icon-chevron-\" + (this.state.active ? \"down\" : \"right\")}></span> API Query URL\n        </button>\n        <div className={this.state.active ? \"show\" : \"hide\"}>\n          <input\n            ref=\"input\"\n            name=\"api-query\"\n            className=\"form-control input-sm\"\n            placeholder=\"API Query URL will appear here...\"\n            value={this.props.isValid ? this.props.url : \"\"}\n            onClick={this.handleInputSelect}\n            onFocus={this.handleInputSelect}\n            onChange={this.handleInputChange} />\n        </div>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = ApiUrl;\n","import _ from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport Select from './select.js';\nimport FieldsToggle from './fields_toggle.js';\nimport ExplorerActions from '../../actions/ExplorerActions';\nimport ExplorerUtils from '../../utils/ExplorerUtils';\nimport ProjectUtils from '../../utils/ProjectUtils';\n\nconst Interval = React.createClass({\n\n  setInterval: function(event) {\n    this.props.handleChange('interval', event.target.value);\n  },\n\n  intervalFieldsToggled: function(toggleState){\n    if (toggleState && !this.props.interval) {\n      this.props.handleChange('interval', 'daily')\n    }\n  },\n\n  intervalUpdateFn: function(updates) {\n    this.props.handleChange('interval', updates['interval'])\n  },\n\n  intervalGetFn: function(attr) {\n    if (attr === 'interval') {\n      return this.props.interval;\n    } else {\n      throw new Error(\"Interval component is only aware of interval attributes\")\n    }\n  },\n\n  // React Methods\n\n  render: function() {\n    return (\n      <div className=\"field-component\">\n        <FieldsToggle ref=\"interval-toggle\"\n                      name=\"Interval\"\n                      initialOpenState={this.props.interval}\n                      attrsToStore={'interval'}\n                      getFn={this.intervalGetFn}\n                      updateFn={this.intervalUpdateFn}\n                      toggleCallback={this.intervalFieldsToggled}>\n          <Select label={false}\n                  name=\"interval\"\n                  classes=\"interval-type\"\n                  options={ProjectUtils.getConstant('ABSOLUTE_INTERVAL_TYPES')}\n                  emptyOption={false}\n                  handleSelection={this.setInterval}\n                  selectedOption={this.props.interval}\n                  sort={false} />\n        </FieldsToggle>\n      </div>\n    );\n  }\n});\n\nmodule.exports = Interval;\n","import _ from 'lodash';\nimport React from 'react';\n\nconst Geo = React.createClass({\n\n  // Note: Keen API standard is Longitude followed by Latitude.\n  render: function() {\n    return (\n      <div>\n        <div className=\"col-md-12\">\n          <label htmlFor=\"amount\">Longitude</label>\n          <input type=\"text\"\n                 name=\"coordinates.0\"\n                 className=\"form-control\"\n                 value={this.props.filter.property_value.coordinates[0] || \"\"}\n                 onChange={this.props.handleChange}\n                 autoComplete=\"off\" />\n        </div>\n        <div className=\"col-md-12\">\n          <label htmlFor=\"amount\">Latitude</label>\n          <input type=\"text\"\n                 name=\"coordinates.1\"\n                 className=\"form-control\"\n                 value={this.props.filter.property_value.coordinates[1] || \"\"}\n                 onChange={this.props.handleChange}\n                 autoComplete=\"off\" />\n        </div>\n        <div className=\"col-md-12\">\n          <label htmlFor=\"amount\">Radius in Miles</label>\n          <input type=\"text\"\n                 name=\"max_distance_miles\"\n                 className=\"form-control\"\n                 value={this.props.filter.property_value.max_distance_miles || \"\"}\n                 onChange={this.props.handleChange}\n                 autoComplete=\"off\" />\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = Geo;\n","import _ from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport Select from './select.js';\nimport Datepicker from './datepicker.js';\nimport Timepicker from './timepicker.js';\nimport Geo from './geo.js';\nimport FormatUtils from '../../utils/FormatUtils';\nimport FilterUtils from '../../utils/FilterUtils';\n\nconst dateFormat = 'll';\nconst timeFormat = 'h:mm A';\n\nfunction pasrseIntoDate(dateString, timeString) {\n  var date = moment(new Date(dateString)).format(dateFormat);\n  var time = moment(new Date(timeString)).format(timeFormat);\n  return new Date(date + \" \" + time).toString();\n}\n\nconst FilterValueFields = React.createClass({\n\n  handleChangeWithEvent: function(event) {\n    this.props.handleChange(event.target.name, event.target.value);\n  },\n\n  setValueState: function(event) {\n    var updates = {};\n    updates[event.target.name] = event.target.value;\n    this.setState(updates);\n  },\n\n  setDate: function(name, value) {\n    this.props.handleChange(name, pasrseIntoDate(value, this.props.filter.property_value));\n  },\n\n  setTime: function(name, value) {\n    this.props.handleChange(name, pasrseIntoDate(this.props.filter.property_value, value));\n  },\n\n  handleDateBlur: function (event) {\n    this.setDate(event.target.name, event.target.value);\n  },\n\n  handleChange: function(event) {\n    this.props.handleChange(event.target.name, event.target.value);\n  },\n\n  getCoercionOptions: function() {\n    var operator = this.props.filter.operator;\n    return operator ? _.find(this.props.filterOperators, { value: operator }).canBeCoeredTo : [];\n  },\n\n  getInputPlaceholder: function() {\n    var type = this.props.filter.coercion_type;\n    return type === 'List' ? 'Comma sep list' : type;\n  },\n\n  // React methods\n\n  getInitialState: function() {\n    return {\n      property_value: this.props.filter.property_value\n    };\n  },\n\n  componentWillReceiveProps: function(newProps) {\n    this.setState({ property_value: newProps.filter.property_value });\n  },\n\n  render: function() {\n    var valueInput;\n    if (this.propertyType === 'geo' || this.props.filter.operator === 'within') {\n      valueInput = (\n        <Geo handleChange={this.handleChangeWithEvent}\n             filter={this.props.filter}/>\n      );\n    } else if (this.props.filter.operator === 'exists' || this.props.filter.coercion_type === 'Boolean') {\n      valueInput = (\n        <Select name=\"property_value\"\n                classes=\"property-value\"\n                ref=\"boolean-value-set\"\n                options={['true', 'false']}\n                handleBlur={this.handleChangeWithEvent}\n                handleSelection={this.setValueState}\n                selectedOption={FormatUtils.booleanMap(this.state.property_value) || 'true'}\n                emptyOption={false} />\n      );\n    } else if (this.props.filter.coercion_type === 'Datetime') {\n      valueInput = (\n        <div className=\"row property-value\">\n          <div className=\"col-md-6 form-collapse-right\">\n            <Datepicker ref=\"date-value-input\"\n                        value={moment(new Date(this.state.property_value)).format(dateFormat)}\n                        label={false}\n                        name=\"property_value\"\n                        placeholder=\"Date\"\n                        classes=\"datepicker-wrapper\"\n                        onSet={this.setDate}\n                        onBlur={this.handleDateBlur} />\n          </div>\n          <div className=\"col-md-6 form-collapse-left\">\n            <Timepicker ref=\"time-value-input\"\n                        value={moment(new Date(this.state.property_value)).format(timeFormat)}\n                        label={false}\n                        name=\"property_value\"\n                        placeholder=\"Time\"\n                        classes=\"timepicker-wrapper\"\n                        handleSelection={this.setTime}\n                        handleBlur={this.setTime} />\n          </div>\n        </div>\n      );\n    } else {\n      valueInput = (\n        <input type=\"text\"\n               ref=\"value-input\"\n               name=\"property_value\"\n               className=\"form-control property-value\"\n               value={this.state.property_value}\n               onChange={this.setValueState}\n               onBlur={this.handleChangeWithEvent}\n               placeholder={this.getInputPlaceholder()}\n               readOnly={this.props.filter.coercion_type === 'Null'}\n               autoComplete=\"off\" />\n      );\n    }\n\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-3 form-collapse-right\">\n          <Select label={false}\n                  ref=\"type-set\"\n                  name=\"coercion_type\"\n                  classes=\"coercion-type\"\n                  sort={false}\n                  options={this.getCoercionOptions()}\n                  handleSelection={this.handleChangeWithEvent}\n                  selectedOption={this.props.filter.coercion_type}\n                  emptyOption={false} />\n        </div>\n        <div className=\"col-md-9 form-collapse-left\">\n          {valueInput}\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = FilterValueFields;\n","import _ from 'lodash';\nimport React from 'react';\nimport Select from './select.js';\nimport classNames from 'classnames';\nimport ReactSelect from './react_select.js';\nimport FilterValueFields from './filter_value_fields.js';\nimport FilterUtils from '../../utils/FilterUtils';\n\nconst Filter = React.createClass({\n\n  removeFilter: function(e) {\n    e.preventDefault();\n    this.props.removeFilter(this.props.index);\n  },\n\n  handleChange: function(name, value) {\n    this.props.handleChange(this.props.index, name, value);\n  },\n\n  handleChangeWithEvent: function(e) {\n    this.props.handleChange(this.props.index, e.target.name, e.target.value);\n  },\n\n  buildValueFormGroup: function() {\n    return (\n      <FilterValueFields filter={this.props.filter}\n                         filterOperators={this.props.filterOperators}\n                         handleChange={this.handleChange} />\n    );\n  },\n\n  buildOperatorSelect: function() {\n    return (\n      <Select label={false}\n              name=\"operator\"\n              classes=\"operator\"\n              options={this.props.filterOperators}\n              emptyOption={false}\n              sort={false}\n              handleSelection={this.handleChangeWithEvent}\n              selectedOption={this.props.filter.operator} />\n    );\n  },\n\n  buildPropertyNameSelect: function() {\n    return (\n      <ReactSelect name=\"property_name\"\n                   inputClasses=\"property-name form-control\"\n                   items={this.props.propertyNames}\n                   handleChange={this.handleChange}\n                   placeholder=\"Select a property name\"\n                   value={this.props.filter.property_name}\n                   sort={true} />\n    )\n  },\n\n  getListSyntaxInfo: function() {\n    if (this.props.filter.coercion_type === 'List') {\n      return (\n        <p className=\"filter-instructions help-block\">\n          Wrap strings in <b>double</b> quotes &amp; numbers in <b>single</b> quotes.\n        </p>\n      );\n    }\n  },\n\n  buildValidationError: function() {\n    if (this.filterCompleteAndInvalid()) {\n      return (\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <p className=\"invalid\">Invalid: {this.props.filter.errors[0].msg}</p>\n          </div>\n        </div>\n      );\n    }\n  },\n\n  filterCompleteAndInvalid: function() {\n    var complete = FilterUtils.isComplete(this.props.filter);\n    var valid = this.props.filter.isValid;\n    return complete && !valid;\n  },\n\n  // React functions\n\n  render: function() {\n    var filterClasses = classNames({\n      'filter-row': true,\n      'filter-complete': !FilterUtils.isComplete(this.props.filter) || this.props.filter.isValid,\n      'filter-incomplete': this.filterCompleteAndInvalid()\n    });\n\n    return (\n      <div className={filterClasses}>\n        <div className=\"row\">\n          <div className=\"col-md-4 filter-property-col\">\n            {this.buildPropertyNameSelect()}\n          </div>\n          <div className=\"col-md-2 filter-operator-col\">\n            {this.buildOperatorSelect()}\n          </div>\n          <div className=\"col-md-5 filter-value-col\">\n            {this.buildValueFormGroup()}\n            {this.getListSyntaxInfo()}\n          </div>\n          <div className=\"col-md-1 filter-close-col\">\n            <a href=\"#\" className=\"remove-filter\" onClick={this.removeFilter} data-index={this.props.index}>\n              <span className=\"icon no-margin\">&times;</span>\n            </a>\n          </div>\n        </div>\n        {this.buildValidationError()}\n      </div>\n    );\n  }\n});\n\nmodule.exports = Filter;\n","import _ from 'lodash';\nimport React from 'react';\nimport ReactSelect from './react_select.js';\nimport ProjectUtils from '../../utils/ProjectUtils';\nimport ExplorerActions from '../../actions/ExplorerActions';\n\nconst Timezone = React.createClass({\n\n  handleTimezoneBlur: function() {\n    this.setState({ active: false });\n    this.refs['timezone-display'].focus();\n  },\n\n  handleTimezoneActivated: function(){\n    var self = this;\n    this.setState({ active: true });\n    setTimeout(function(){\n      self.refs['timezone'].refs['input'].focus();\n      self.refs['timezone'].setState({ visible: true });\n    }, 100);\n  },\n\n  handleTimezoneChange: function(name, value) {\n    var timezones = ProjectUtils.getConstant('TIMEZONES');\n    var timezone = timezones.filter(z => z.name === value)[0];\n    this.props.handleChange('timezone', timezone ? timezone.name : value);\n  },\n\n  // React methods\n\n  getInitialState: function(){\n    return { active: false };\n  },\n\n  componentDidMount: function() {\n    if (!this.props.timezone) {\n      this.props.handleChange('timezone', ProjectUtils.getConstant('DEFAULT_TIMEZONE'));\n    }\n    this.refs['timezone'].setState({ visible: false });\n  },\n\n  render: function(){\n    return (\n      <div className={\"timezone-toggle\" + (this.state.active ? \" active\" : \"\")}>\n        <div className=\"toggle-display\">\n          <button ref=\"timezone-display\"\n                  className=\"btn btn-link field-secondary-control\"\n                  title={\"Selectd timezone: \" + this.props.timezone}\n                  type=\"button\"\n                  onClick={this.handleTimezoneActivated}>\n            <span className=\"icon glyphicon glyphicon-globe\"></span> Timezone: {this.props.timezone}\n          </button>\n        </div>\n        <div className=\"toggle-options\">\n          <ReactSelect ref=\"timezone\"\n                       name=\"timezone\"\n                       classes=\"timezone form-control\"\n                       value={this.props.timezone}\n                       items={ProjectUtils.getConstant('TIMEZONES').map((z) => z.name)}\n                       handleChange={this.handleTimezoneChange}\n                       handleBlur={this.handleTimezoneBlur} />\n        </div>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = Timezone;\n","import React from 'react';\nimport _ from 'lodash';\nimport Input from './input.js';\nimport Select from './select.js';\n\nconst RELATIVE_TIMEFRAMES = ['this', 'previous'];\n\nimport ExplorerUtils from '../../utils/ExplorerUtils';\nimport ExplorerActions from '../../actions/ExplorerActions';\nimport FormatUtils from '../../utils/FormatUtils';\n\nfunction hasRelativeTimeframe(time) {\n  time = time || {};\n  return time.relativity && time.amount && time.sub_timeframe;\n}\n\nconst RelativePicker = React.createClass({\n\n  setRelativeTime: function(event) {\n    var name = event.target.name;\n    var value = event.target.value;\n\n    var updates = _.cloneDeep(this.props.time);\n    updates[name] = value\n    this.props.handleChange('time', updates)\n  },\n\n  buildDescriptionCopy: function() {\n    var time = this.props.time;\n\n    if (hasRelativeTimeframe(this.props.time)) {\n      var subIntervalCopy = FormatUtils.singularize(time.sub_timeframe, time.amount);\n      var timeAmountPluralSuffix = time.amount > 1 ? 's' : '';\n      var relativityCopy = time.relativity == 'this' ? 'including' : 'excluding';\n      var singularCurrentInterval = FormatUtils.singularize(subIntervalCopy);\n\n      return (<p className=\"help-block\">The last {time.amount} {subIntervalCopy}{timeAmountPluralSuffix} <b>{relativityCopy}</b> the current {singularCurrentInterval}.</p>);\n    }\n  },\n\n  // React Methods\n\n  render: function() {\n    var descriptionCopy = this.buildDescriptionCopy();\n\n    return (\n      <div className=\"relative-timeframe-picker\">\n        <div className=\"row\">\n          <div className=\"col-xs-4 form-collapse-right\" id=\"relative-type\">\n            <div className=\"btn-group\">\n              <Select label={false}\n                      name=\"relativity\"\n                      classes=\"relativity\"\n                      options={RELATIVE_TIMEFRAMES}\n                      emptyOption={false}\n                      handleSelection={this.setRelativeTime}\n                      selectedOption={this.props.time.relativity} />\n            </div>\n          </div>\n          <div className=\"col-xs-3 form-collapse-left form-collapse-right\" id=\"interval-amount\">\n            <Input label={false}\n                   name=\"amount\"\n                   classes=\"amount\"\n                   onChange={this.setRelativeTime}\n                   placeholder=\"e.g. 1\"\n                   value={this.props.time.amount || \"\"}\n                   autoComplete=\"off\" />\n          </div>\n          <div className=\"col-xs-5 form-collapse-left\" id=\"sub-interval-type\">\n            <Select label={false}\n                    name=\"sub_timeframe\"\n                    classes=\"sub-timeframe\"\n                    options={this.props.relativeIntervalTypes}\n                    emptyOption={false}\n                    handleSelection={this.setRelativeTime}\n                    selectedOption={this.props.time.sub_timeframe}\n                    sort={false} />\n          </div>\n        </div>\n        {descriptionCopy}\n      </div>\n    );\n  }\n});\n\nmodule.exports = RelativePicker;\n","\n/*!\n * Time picker for pickadate.js v3.5.4\n * http://amsul.github.io/pickadate.js/time.htm\n */\n\n(function ( factory ) {\n\n    // AMD.\n    if ( typeof define == 'function' && define.amd )\n        define( ['picker','jquery'], factory )\n\n    // Node.js/browserify.\n    else if ( typeof exports == 'object' )\n        module.exports = factory( require('./picker.js'), require('jquery') )\n\n    // Browser globals.\n    else factory( Picker, jQuery )\n\n}(function( Picker, $ ) {\n\n\n/**\n * Globals and constants\n */\nvar HOURS_IN_DAY = 24,\n    MINUTES_IN_HOUR = 60,\n    HOURS_TO_NOON = 12,\n    MINUTES_IN_DAY = HOURS_IN_DAY * MINUTES_IN_HOUR,\n    _ = Picker._\n\n\n\n/**\n * The time picker constructor\n */\nfunction TimePicker( picker, settings ) {\n\n    var clock = this,\n        elementValue = picker.$node[ 0 ].value,\n        elementDataValue = picker.$node.data( 'value' ),\n        valueString = elementDataValue || elementValue,\n        formatString = elementDataValue ? settings.formatSubmit : settings.format\n\n    clock.settings = settings\n    clock.$node = picker.$node\n\n    // The queue of methods that will be used to build item objects.\n    clock.queue = {\n        interval: 'i',\n        min: 'measure create',\n        max: 'measure create',\n        now: 'now create',\n        select: 'parse create validate',\n        highlight: 'parse create validate',\n        view: 'parse create validate',\n        disable: 'deactivate',\n        enable: 'activate'\n    }\n\n    // The component's item object.\n    clock.item = {}\n\n    clock.item.clear = null\n    clock.item.interval = settings.interval || 30\n    clock.item.disable = ( settings.disable || [] ).slice( 0 )\n    clock.item.enable = -(function( collectionDisabled ) {\n        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1\n    })( clock.item.disable )\n\n    clock.\n        set( 'min', settings.min ).\n        set( 'max', settings.max ).\n        set( 'now' )\n\n    // When theres a value, set the `select`, which in turn\n    // also sets the `highlight` and `view`.\n    if ( valueString ) {\n        clock.set( 'select', valueString, {\n            format: formatString,\n            fromValue: !!elementValue\n        })\n    }\n\n    // If theres no value, default to highlighting today.\n    else {\n        clock.\n            set( 'select', null ).\n            set( 'highlight', clock.item.now )\n    }\n\n    // The keycode to movement mapping.\n    clock.key = {\n        40: 1, // Down\n        38: -1, // Up\n        39: 1, // Right\n        37: -1, // Left\n        go: function( timeChange ) {\n            clock.set(\n                'highlight',\n                clock.item.highlight.pick + timeChange * clock.item.interval,\n                { interval: timeChange * clock.item.interval }\n            )\n            this.render()\n        }\n    }\n\n\n    // Bind some picker events.\n    picker.\n        on( 'render', function() {\n            var $pickerHolder = picker.$root.children(),\n                $viewset = $pickerHolder.find( '.' + settings.klass.viewset ),\n                vendors = function( prop ) {\n                    return ['webkit', 'moz', 'ms', 'o', ''].map(function( vendor ) {\n                        return ( vendor ? '-' + vendor + '-' : '' ) + prop\n                    })\n                },\n                animations = function( $el, state ) {\n                    vendors( 'transform' ).map(function( prop ) {\n                        $el.css( prop, state )\n                    })\n                    vendors( 'transition' ).map(function( prop ) {\n                        $el.css( prop, state )\n                    })\n                }\n            if ( $viewset.length ) {\n                animations( $pickerHolder, 'none' )\n                $pickerHolder[ 0 ].scrollTop = ~~$viewset.position().top - ( $viewset[ 0 ].clientHeight * 2 )\n                animations( $pickerHolder, '' )\n            }\n        }, 1 ).\n        on( 'open', function() {\n            picker.$root.find( 'button' ).attr( 'disabled', false )\n        }, 1 ).\n        on( 'close', function() {\n            picker.$root.find( 'button' ).attr( 'disabled', true )\n        }, 1 )\n\n} //TimePicker\n\n\n/**\n * Set a timepicker item object.\n */\nTimePicker.prototype.set = function( type, value, options ) {\n\n    var clock = this,\n        clockItem = clock.item\n\n    // If the value is `null` just set it immediately.\n    if ( value === null ) {\n        if ( type == 'clear' ) type = 'select'\n        clockItem[ type ] = value\n        return clock\n    }\n\n    // Otherwise go through the queue of methods, and invoke the functions.\n    // Update this as the time unit, and set the final value as this item.\n    // * In the case of `enable`, keep the queue but set `disable` instead.\n    //   And in the case of `flip`, keep the queue but set `enable` instead.\n    clockItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = clock.queue[ type ].split( ' ' ).map( function( method ) {\n        value = clock[ method ]( type, value, options )\n        return value\n    }).pop()\n\n    // Check if we need to cascade through more updates.\n    if ( type == 'select' ) {\n        clock.set( 'highlight', clockItem.select, options )\n    }\n    else if ( type == 'highlight' ) {\n        clock.set( 'view', clockItem.highlight, options )\n    }\n    else if ( type == 'interval' ) {\n        clock.\n            set( 'min', clockItem.min, options ).\n            set( 'max', clockItem.max, options )\n    }\n    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {\n        if ( type == 'min' ) {\n            clock.set( 'max', clockItem.max, options )\n        }\n        if ( clockItem.select && clock.disabled( clockItem.select ) ) {\n            clock.set( 'select', clockItem.select, options )\n        }\n        if ( clockItem.highlight && clock.disabled( clockItem.highlight ) ) {\n            clock.set( 'highlight', clockItem.highlight, options )\n        }\n    }\n\n    return clock\n} //TimePicker.prototype.set\n\n\n/**\n * Get a timepicker item object.\n */\nTimePicker.prototype.get = function( type ) {\n    return this.item[ type ]\n} //TimePicker.prototype.get\n\n\n/**\n * Create a picker time object.\n */\nTimePicker.prototype.create = function( type, value, options ) {\n\n    var clock = this\n\n    // If theres no value, use the type as the value.\n    value = value === undefined ? type : value\n\n    // If its a date object, convert it into an array.\n    if ( _.isDate( value ) ) {\n        value = [ value.getHours(), value.getMinutes() ]\n    }\n\n    // If its an object, use the pick value.\n    if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\n        value = value.pick\n    }\n\n    // If its an array, convert it into minutes.\n    else if ( $.isArray( value ) ) {\n        value = +value[ 0 ] * MINUTES_IN_HOUR + (+value[ 1 ])\n    }\n\n    // If no valid value is passed, set it to now.\n    else if ( !_.isInteger( value ) ) {\n        value = clock.now( type, value, options )\n    }\n\n    // If were setting the max, make sure its greater than the min.\n    if ( type == 'max' && value < clock.item.min.pick ) {\n        value += MINUTES_IN_DAY\n    }\n\n    // If the value doesnt fall directly on the interval,\n    // add one interval to indicate it as passed.\n    if ( type != 'min' && type != 'max' && (value - clock.item.min.pick) % clock.item.interval !== 0 ) {\n        value += clock.item.interval\n    }\n\n    // Normalize it into a reachable interval.\n    value = clock.normalize( type, value, options )\n\n    // Return the compiled object.\n    return {\n\n        // Divide to get hours from minutes.\n        hour: ~~( HOURS_IN_DAY + value / MINUTES_IN_HOUR ) % HOURS_IN_DAY,\n\n        // The remainder is the minutes.\n        mins: ( MINUTES_IN_HOUR + value % MINUTES_IN_HOUR ) % MINUTES_IN_HOUR,\n\n        // The time in total minutes.\n        time: ( MINUTES_IN_DAY + value ) % MINUTES_IN_DAY,\n\n        // Reference to the relative value to pick.\n        pick: value\n    }\n} //TimePicker.prototype.create\n\n\n/**\n * Create a range limit object using an array, date object,\n * literal true, or integer relative to another time.\n */\nTimePicker.prototype.createRange = function( from, to ) {\n\n    var clock = this,\n        createTime = function( time ) {\n            if ( time === true || $.isArray( time ) || _.isDate( time ) ) {\n                return clock.create( time )\n            }\n            return time\n        }\n\n    // Create objects if possible.\n    if ( !_.isInteger( from ) ) {\n        from = createTime( from )\n    }\n    if ( !_.isInteger( to ) ) {\n        to = createTime( to )\n    }\n\n    // Create relative times.\n    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {\n        from = [ to.hour, to.mins + ( from * clock.settings.interval ) ];\n    }\n    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {\n        to = [ from.hour, from.mins + ( to * clock.settings.interval ) ];\n    }\n\n    return {\n        from: createTime( from ),\n        to: createTime( to )\n    }\n} //TimePicker.prototype.createRange\n\n\n/**\n * Check if a time unit falls within a time range object.\n */\nTimePicker.prototype.withinRange = function( range, timeUnit ) {\n    range = this.createRange(range.from, range.to)\n    return timeUnit.pick >= range.from.pick && timeUnit.pick <= range.to.pick\n}\n\n\n/**\n * Check if two time range objects overlap.\n */\nTimePicker.prototype.overlapRanges = function( one, two ) {\n\n    var clock = this\n\n    // Convert the ranges into comparable times.\n    one = clock.createRange( one.from, one.to )\n    two = clock.createRange( two.from, two.to )\n\n    return clock.withinRange( one, two.from ) || clock.withinRange( one, two.to ) ||\n        clock.withinRange( two, one.from ) || clock.withinRange( two, one.to )\n}\n\n\n/**\n * Get the time relative to now.\n */\nTimePicker.prototype.now = function( type, value/*, options*/ ) {\n\n    var interval = this.item.interval,\n        date = new Date(),\n        nowMinutes = date.getHours() * MINUTES_IN_HOUR + date.getMinutes(),\n        isValueInteger = _.isInteger( value ),\n        isBelowInterval\n\n    // Make sure now falls within the interval range.\n    nowMinutes -= nowMinutes % interval\n\n    // Check if the difference is less than the interval itself.\n    isBelowInterval = value < 0 && interval * value + nowMinutes <= -interval\n\n    // Add an interval because the time has passed.\n    nowMinutes += type == 'min' && isBelowInterval ? 0 : interval\n\n    // If the value is a number, adjust by that many intervals.\n    if ( isValueInteger ) {\n        nowMinutes += interval * (\n            isBelowInterval && type != 'max' ?\n                value + 1 :\n                value\n            )\n    }\n\n    // Return the final calculation.\n    return nowMinutes\n} //TimePicker.prototype.now\n\n\n/**\n * Normalize minutes to be reachable based on the min and interval.\n */\nTimePicker.prototype.normalize = function( type, value/*, options*/ ) {\n\n    var interval = this.item.interval,\n        minTime = this.item.min && this.item.min.pick || 0\n\n    // If setting min time, dont shift anything.\n    // Otherwise get the value and min difference and then\n    // normalize the difference with the interval.\n    value -= type == 'min' ? 0 : ( value - minTime ) % interval\n\n    // Return the adjusted value.\n    return value\n} //TimePicker.prototype.normalize\n\n\n/**\n * Measure the range of minutes.\n */\nTimePicker.prototype.measure = function( type, value, options ) {\n\n    var clock = this\n\n    // If its anything false-y, set it to the default.\n    if ( !value ) {\n        value = type == 'min' ? [ 0, 0 ] : [ HOURS_IN_DAY - 1, MINUTES_IN_HOUR - 1 ]\n    }\n\n    // If its a string, parse it.\n    if ( typeof value == 'string' ) {\n        value = clock.parse( type, value )\n    }\n\n    // If its a literal true, or an integer, make it relative to now.\n    else if ( value === true || _.isInteger( value ) ) {\n        value = clock.now( type, value, options )\n    }\n\n    // If its an object already, just normalize it.\n    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\n        value = clock.normalize( type, value.pick, options )\n    }\n\n    return value\n} ///TimePicker.prototype.measure\n\n\n/**\n * Validate an object as enabled.\n */\nTimePicker.prototype.validate = function( type, timeObject, options ) {\n\n    var clock = this,\n        interval = options && options.interval ? options.interval : clock.item.interval\n\n    // Check if the object is disabled.\n    if ( clock.disabled( timeObject ) ) {\n\n        // Shift with the interval until we reach an enabled time.\n        timeObject = clock.shift( timeObject, interval )\n    }\n\n    // Scope the object into range.\n    timeObject = clock.scope( timeObject )\n\n    // Do a second check to see if we landed on a disabled min/max.\n    // In that case, shift using the opposite interval as before.\n    if ( clock.disabled( timeObject ) ) {\n        timeObject = clock.shift( timeObject, interval * -1 )\n    }\n\n    // Return the final object.\n    return timeObject\n} //TimePicker.prototype.validate\n\n\n/**\n * Check if an object is disabled.\n */\nTimePicker.prototype.disabled = function( timeToVerify ) {\n\n    var clock = this,\n\n        // Filter through the disabled times to check if this is one.\n        isDisabledMatch = clock.item.disable.filter( function( timeToDisable ) {\n\n            // If the time is a number, match the hours.\n            if ( _.isInteger( timeToDisable ) ) {\n                return timeToVerify.hour == timeToDisable\n            }\n\n            // If its an array, create the object and match the times.\n            if ( $.isArray( timeToDisable ) || _.isDate( timeToDisable ) ) {\n                return timeToVerify.pick == clock.create( timeToDisable ).pick\n            }\n\n            // If its an object, match a time within the from and to range.\n            if ( $.isPlainObject( timeToDisable ) ) {\n                return clock.withinRange( timeToDisable, timeToVerify )\n            }\n        })\n\n    // If this time matches a disabled time, confirm its not inverted.\n    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( timeToDisable ) {\n        return $.isArray( timeToDisable ) && timeToDisable[2] == 'inverted' ||\n            $.isPlainObject( timeToDisable ) && timeToDisable.inverted\n    }).length\n\n    // If the clock is \"enabled\" flag is flipped, flip the condition.\n    return clock.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||\n        timeToVerify.pick < clock.item.min.pick ||\n        timeToVerify.pick > clock.item.max.pick\n} //TimePicker.prototype.disabled\n\n\n/**\n * Shift an object by an interval until we reach an enabled object.\n */\nTimePicker.prototype.shift = function( timeObject, interval ) {\n\n    var clock = this,\n        minLimit = clock.item.min.pick,\n        maxLimit = clock.item.max.pick/*,\n        safety = 1000*/\n\n    interval = interval || clock.item.interval\n\n    // Keep looping as long as the time is disabled.\n    while ( /*safety &&*/ clock.disabled( timeObject ) ) {\n\n        /*safety -= 1\n        if ( !safety ) {\n            throw 'Fell into an infinite loop while shifting to ' + timeObject.hour + ':' + timeObject.mins + '.'\n        }*/\n\n        // Increase/decrease the time by the interval and keep looping.\n        timeObject = clock.create( timeObject.pick += interval )\n\n        // If we've looped beyond the limits, break out of the loop.\n        if ( timeObject.pick <= minLimit || timeObject.pick >= maxLimit ) {\n            break\n        }\n    }\n\n    // Return the final object.\n    return timeObject\n} //TimePicker.prototype.shift\n\n\n/**\n * Scope an object to be within range of min and max.\n */\nTimePicker.prototype.scope = function( timeObject ) {\n    var minLimit = this.item.min.pick,\n        maxLimit = this.item.max.pick\n    return this.create( timeObject.pick > maxLimit ? maxLimit : timeObject.pick < minLimit ? minLimit : timeObject )\n} //TimePicker.prototype.scope\n\n\n/**\n * Parse a string into a usable type.\n */\nTimePicker.prototype.parse = function( type, value, options ) {\n\n    var hour, minutes, isPM, item, parseValue,\n        clock = this,\n        parsingObject = {}\n\n    // If its already parsed, were good.\n    if ( !value || typeof value != 'string' ) {\n        return value\n    }\n\n    // We need a `.format` to parse the value with.\n    if ( !( options && options.format ) ) {\n        options = options || {}\n        options.format = clock.settings.format\n    }\n\n    // Convert the format into an array and then map through it.\n    clock.formats.toArray( options.format ).map( function( label ) {\n\n        var\n            substring,\n\n            // Grab the formatting label.\n            formattingLabel = clock.formats[ label ],\n\n            // The format length is from the formatting label function or the\n            // label length without the escaping exclamation (!) mark.\n            formatLength = formattingLabel ?\n                _.trigger( formattingLabel, clock, [ value, parsingObject ] ) :\n                label.replace( /^!/, '' ).length\n\n        // If there's a format label, split the value up to the format length.\n        // Then add it to the parsing object with appropriate label.\n        if ( formattingLabel ) {\n            substring = value.substr( 0, formatLength )\n            parsingObject[ label ] = substring.match(/^\\d+$/) ? +substring : substring\n        }\n\n        // Update the time value as the substring from format length to end.\n        value = value.substr( formatLength )\n    })\n\n    // Grab the hour and minutes from the parsing object.\n    for ( item in parsingObject ) {\n        parseValue = parsingObject[item]\n        if ( _.isInteger(parseValue) ) {\n            if ( item.match(/^(h|hh)$/i) ) {\n                hour = parseValue\n                if ( item == 'h' || item == 'hh' ) {\n                    hour %= 12\n                }\n            }\n            else if ( item == 'i' ) {\n                minutes = parseValue\n            }\n        }\n        else if ( item.match(/^a$/i) && parseValue.match(/^p/i) && ('h' in parsingObject || 'hh' in parsingObject) ) {\n            isPM = true\n        }\n    }\n\n    // Calculate it in minutes and return.\n    return (isPM ? hour + 12 : hour) * MINUTES_IN_HOUR + minutes\n} //TimePicker.prototype.parse\n\n\n/**\n * Various formats to display the object in.\n */\nTimePicker.prototype.formats = {\n\n    h: function( string, timeObject ) {\n\n        // If there's string, then get the digits length.\n        // Otherwise return the selected hour in \"standard\" format.\n        return string ? _.digits( string ) : timeObject.hour % HOURS_TO_NOON || HOURS_TO_NOON\n    },\n    hh: function( string, timeObject ) {\n\n        // If there's a string, then the length is always 2.\n        // Otherwise return the selected hour in \"standard\" format with a leading zero.\n        return string ? 2 : _.lead( timeObject.hour % HOURS_TO_NOON || HOURS_TO_NOON )\n    },\n    H: function( string, timeObject ) {\n\n        // If there's string, then get the digits length.\n        // Otherwise return the selected hour in \"military\" format as a string.\n        return string ? _.digits( string ) : '' + ( timeObject.hour % 24 )\n    },\n    HH: function( string, timeObject ) {\n\n        // If there's string, then get the digits length.\n        // Otherwise return the selected hour in \"military\" format with a leading zero.\n        return string ? _.digits( string ) : _.lead( timeObject.hour % 24 )\n    },\n    i: function( string, timeObject ) {\n\n        // If there's a string, then the length is always 2.\n        // Otherwise return the selected minutes.\n        return string ? 2 : _.lead( timeObject.mins )\n    },\n    a: function( string, timeObject ) {\n\n        // If there's a string, then the length is always 4.\n        // Otherwise check if it's more than \"noon\" and return either am/pm.\n        return string ? 4 : MINUTES_IN_DAY / 2 > timeObject.time % MINUTES_IN_DAY ? 'a.m.' : 'p.m.'\n    },\n    A: function( string, timeObject ) {\n\n        // If there's a string, then the length is always 2.\n        // Otherwise check if it's more than \"noon\" and return either am/pm.\n        return string ? 2 : MINUTES_IN_DAY / 2 > timeObject.time % MINUTES_IN_DAY ? 'AM' : 'PM'\n    },\n\n    // Create an array by splitting the formatting string passed.\n    toArray: function( formatString ) { return formatString.split( /(h{1,2}|H{1,2}|i|a|A|!.)/g ) },\n\n    // Format an object into a string using the formatting options.\n    toString: function ( formatString, itemObject ) {\n        var clock = this\n        return clock.formats.toArray( formatString ).map( function( label ) {\n            return _.trigger( clock.formats[ label ], clock, [ 0, itemObject ] ) || label.replace( /^!/, '' )\n        }).join( '' )\n    }\n} //TimePicker.prototype.formats\n\n\n\n\n/**\n * Check if two time units are the exact.\n */\nTimePicker.prototype.isTimeExact = function( one, two ) {\n\n    var clock = this\n\n    // When were working with minutes, do a direct comparison.\n    if (\n        ( _.isInteger( one ) && _.isInteger( two ) ) ||\n        ( typeof one == 'boolean' && typeof two == 'boolean' )\n     ) {\n        return one === two\n    }\n\n    // When were working with time representations, compare the pick value.\n    if (\n        ( _.isDate( one ) || $.isArray( one ) ) &&\n        ( _.isDate( two ) || $.isArray( two ) )\n    ) {\n        return clock.create( one ).pick === clock.create( two ).pick\n    }\n\n    // When were working with range objects, compare the from and to.\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\n        return clock.isTimeExact( one.from, two.from ) && clock.isTimeExact( one.to, two.to )\n    }\n\n    return false\n}\n\n\n/**\n * Check if two time units overlap.\n */\nTimePicker.prototype.isTimeOverlap = function( one, two ) {\n\n    var clock = this\n\n    // When were working with an integer, compare the hours.\n    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {\n        return one === clock.create( two ).hour\n    }\n    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {\n        return two === clock.create( one ).hour\n    }\n\n    // When were working with range objects, check if the ranges overlap.\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\n        return clock.overlapRanges( one, two )\n    }\n\n    return false\n}\n\n\n/**\n * Flip the enabled state.\n */\nTimePicker.prototype.flipEnable = function(val) {\n    var itemObject = this.item\n    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)\n}\n\n\n/**\n * Mark a collection of times as disabled.\n */\nTimePicker.prototype.deactivate = function( type, timesToDisable ) {\n\n    var clock = this,\n        disabledItems = clock.item.disable.slice(0)\n\n\n    // If were flipping, thats all we need to do.\n    if ( timesToDisable == 'flip' ) {\n        clock.flipEnable()\n    }\n\n    else if ( timesToDisable === false ) {\n        clock.flipEnable(1)\n        disabledItems = []\n    }\n\n    else if ( timesToDisable === true ) {\n        clock.flipEnable(-1)\n        disabledItems = []\n    }\n\n    // Otherwise go through the times to disable.\n    else {\n\n        timesToDisable.map(function( unitToDisable ) {\n\n            var matchFound\n\n            // When we have disabled items, check for matches.\n            // If something is matched, immediately break out.\n            for ( var index = 0; index < disabledItems.length; index += 1 ) {\n                if ( clock.isTimeExact( unitToDisable, disabledItems[index] ) ) {\n                    matchFound = true\n                    break\n                }\n            }\n\n            // If nothing was found, add the validated unit to the collection.\n            if ( !matchFound ) {\n                if (\n                    _.isInteger( unitToDisable ) ||\n                    _.isDate( unitToDisable ) ||\n                    $.isArray( unitToDisable ) ||\n                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )\n                ) {\n                    disabledItems.push( unitToDisable )\n                }\n            }\n        })\n    }\n\n    // Return the updated collection.\n    return disabledItems\n} //TimePicker.prototype.deactivate\n\n\n/**\n * Mark a collection of times as enabled.\n */\nTimePicker.prototype.activate = function( type, timesToEnable ) {\n\n    var clock = this,\n        disabledItems = clock.item.disable,\n        disabledItemsCount = disabledItems.length\n\n    // If were flipping, thats all we need to do.\n    if ( timesToEnable == 'flip' ) {\n        clock.flipEnable()\n    }\n\n    else if ( timesToEnable === true ) {\n        clock.flipEnable(1)\n        disabledItems = []\n    }\n\n    else if ( timesToEnable === false ) {\n        clock.flipEnable(-1)\n        disabledItems = []\n    }\n\n    // Otherwise go through the disabled times.\n    else {\n\n        timesToEnable.map(function( unitToEnable ) {\n\n            var matchFound,\n                disabledUnit,\n                index,\n                isRangeMatched\n\n            // Go through the disabled items and try to find a match.\n            for ( index = 0; index < disabledItemsCount; index += 1 ) {\n\n                disabledUnit = disabledItems[index]\n\n                // When an exact match is found, remove it from the collection.\n                if ( clock.isTimeExact( disabledUnit, unitToEnable ) ) {\n                    matchFound = disabledItems[index] = null\n                    isRangeMatched = true\n                    break\n                }\n\n                // When an overlapped match is found, add the inverted state to it.\n                else if ( clock.isTimeOverlap( disabledUnit, unitToEnable ) ) {\n                    if ( $.isPlainObject( unitToEnable ) ) {\n                        unitToEnable.inverted = true\n                        matchFound = unitToEnable\n                    }\n                    else if ( $.isArray( unitToEnable ) ) {\n                        matchFound = unitToEnable\n                        if ( !matchFound[2] ) matchFound.push( 'inverted' )\n                    }\n                    else if ( _.isDate( unitToEnable ) ) {\n                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]\n                    }\n                    break\n                }\n            }\n\n            // If a match was found, remove a previous duplicate entry.\n            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\n                if ( clock.isTimeExact( disabledItems[index], unitToEnable ) ) {\n                    disabledItems[index] = null\n                    break\n                }\n            }\n\n            // In the event that were dealing with an overlap of range times,\n            // make sure there are no inverted times because of it.\n            if ( isRangeMatched ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\n                if ( clock.isTimeOverlap( disabledItems[index], unitToEnable ) ) {\n                    disabledItems[index] = null\n                    break\n                }\n            }\n\n            // If something is still matched, add it into the collection.\n            if ( matchFound ) {\n                disabledItems.push( matchFound )\n            }\n        })\n    }\n\n    // Return the updated collection.\n    return disabledItems.filter(function( val ) { return val != null })\n} //TimePicker.prototype.activate\n\n\n/**\n * The division to use for the range intervals.\n */\nTimePicker.prototype.i = function( type, value/*, options*/ ) {\n    return _.isInteger( value ) && value > 0 ? value : this.item.interval\n}\n\n\n/**\n * Create a string for the nodes in the picker.\n */\nTimePicker.prototype.nodes = function( isOpen ) {\n\n    var\n        clock = this,\n        settings = clock.settings,\n        selectedObject = clock.item.select,\n        highlightedObject = clock.item.highlight,\n        viewsetObject = clock.item.view,\n        disabledCollection = clock.item.disable\n\n    return _.node(\n        'ul',\n        _.group({\n            min: clock.item.min.pick,\n            max: clock.item.max.pick,\n            i: clock.item.interval,\n            node: 'li',\n            item: function( loopedTime ) {\n                loopedTime = clock.create( loopedTime )\n                var timeMinutes = loopedTime.pick,\n                    isSelected = selectedObject && selectedObject.pick == timeMinutes,\n                    isHighlighted = highlightedObject && highlightedObject.pick == timeMinutes,\n                    isDisabled = disabledCollection && clock.disabled( loopedTime )\n                return [\n                    _.trigger( clock.formats.toString, clock, [ _.trigger( settings.formatLabel, clock, [ loopedTime ] ) || settings.format, loopedTime ] ),\n                    (function( klasses ) {\n\n                        if ( isSelected ) {\n                            klasses.push( settings.klass.selected )\n                        }\n\n                        if ( isHighlighted ) {\n                            klasses.push( settings.klass.highlighted )\n                        }\n\n                        if ( viewsetObject && viewsetObject.pick == timeMinutes ) {\n                            klasses.push( settings.klass.viewset )\n                        }\n\n                        if ( isDisabled ) {\n                            klasses.push( settings.klass.disabled )\n                        }\n\n                        return klasses.join( ' ' )\n                    })( [ settings.klass.listItem ] ),\n                    'data-pick=' + loopedTime.pick + ' ' + _.ariaAttr({\n                        role: 'option',\n                        selected: isSelected && clock.$node.val() === _.trigger(\n                                clock.formats.toString,\n                                clock,\n                                [ settings.format, loopedTime ]\n                            ) ? true : null,\n                        activedescendant: isHighlighted ? true : null,\n                        disabled: isDisabled ? true : null\n                    })\n                ]\n            }\n        }) +\n\n        // * For Firefox forms to submit, make sure to set the buttons `type` attribute as button.\n        _.node(\n            'li',\n            _.node(\n                'button',\n                settings.clear,\n                settings.klass.buttonClear,\n                'type=button data-clear=1' + ( isOpen ? '' : ' disabled' ) + ' ' +\n                _.ariaAttr({ controls: clock.$node[0].id })\n            ),\n            '', _.ariaAttr({ role: 'presentation' })\n        ),\n        settings.klass.list,\n        _.ariaAttr({ role: 'listbox', controls: clock.$node[0].id })\n    )\n} //TimePicker.prototype.nodes\n\n\n\n\n\n\n\n/* ==========================================================================\n   Extend the picker to add the component with the defaults.\n   ========================================================================== */\n\nTimePicker.defaults = (function( prefix ) {\n\n    return {\n\n        // Clear\n        clear: 'Clear',\n\n        // The format to show on the `input` element\n        format: 'h:i A',\n\n        // The interval between each time\n        interval: 30,\n\n        // Classes\n        klass: {\n\n            picker: prefix + ' ' + prefix + '--time',\n            holder: prefix + '__holder',\n\n            list: prefix + '__list',\n            listItem: prefix + '__list-item',\n\n            disabled: prefix + '__list-item--disabled',\n            selected: prefix + '__list-item--selected',\n            highlighted: prefix + '__list-item--highlighted',\n            viewset: prefix + '__list-item--viewset',\n            now: prefix + '__list-item--now',\n\n            buttonClear: prefix + '__button--clear'\n        }\n    }\n})( Picker.klasses().picker )\n\n\n\n\n\n/**\n * Extend the picker to add the time picker.\n */\nPicker.extend( 'pickatime', TimePicker )\n\n\n}));\n","\n/*!\n * Date picker for pickadate.js v3.5.4\n * http://amsul.github.io/pickadate.js/date.htm\n */\n\n(function ( factory ) {\n\n    // AMD.\n    if ( typeof define == 'function' && define.amd )\n        define( ['picker','jquery'], factory )\n\n    // Node.js/browserify.\n    else if ( typeof exports == 'object' )\n        module.exports = factory( require('./picker.js'), require('jquery') )\n\n    // Browser globals.\n    else factory( Picker, jQuery )\n\n}(function( Picker, $ ) {\n\n\n/**\n * Globals and constants\n */\nvar DAYS_IN_WEEK = 7,\n    WEEKS_IN_CALENDAR = 6,\n    _ = Picker._\n\n\n\n/**\n * The date picker constructor\n */\nfunction DatePicker( picker, settings ) {\n\n    var calendar = this,\n        element = picker.$node[ 0 ],\n        elementValue = element.value,\n        elementDataValue = picker.$node.data( 'value' ),\n        valueString = elementDataValue || elementValue,\n        formatString = elementDataValue ? settings.formatSubmit : settings.format,\n        isRTL = function() {\n\n            return element.currentStyle ?\n\n                // For IE.\n                element.currentStyle.direction == 'rtl' :\n\n                // For normal browsers.\n                getComputedStyle( picker.$root[0] ).direction == 'rtl'\n        }\n\n    calendar.settings = settings\n    calendar.$node = picker.$node\n\n    // The queue of methods that will be used to build item objects.\n    calendar.queue = {\n        min: 'measure create',\n        max: 'measure create',\n        now: 'now create',\n        select: 'parse create validate',\n        highlight: 'parse navigate create validate',\n        view: 'parse create validate viewset',\n        disable: 'deactivate',\n        enable: 'activate'\n    }\n\n    // The component's item object.\n    calendar.item = {}\n\n    calendar.item.clear = null\n    calendar.item.disable = ( settings.disable || [] ).slice( 0 )\n    calendar.item.enable = -(function( collectionDisabled ) {\n        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1\n    })( calendar.item.disable )\n\n    calendar.\n        set( 'min', settings.min ).\n        set( 'max', settings.max ).\n        set( 'now' )\n\n    // When theres a value, set the `select`, which in turn\n    // also sets the `highlight` and `view`.\n    if ( valueString ) {\n        calendar.set( 'select', valueString, { format: formatString })\n    }\n\n    // If theres no value, default to highlighting today.\n    else {\n        calendar.\n            set( 'select', null ).\n            set( 'highlight', calendar.item.now )\n    }\n\n\n    // The keycode to movement mapping.\n    calendar.key = {\n        40: 7, // Down\n        38: -7, // Up\n        39: function() { return isRTL() ? -1 : 1 }, // Right\n        37: function() { return isRTL() ? 1 : -1 }, // Left\n        go: function( timeChange ) {\n            var highlightedObject = calendar.item.highlight,\n                targetDate = new Date( Date.UTC(highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange) )\n            calendar.set(\n                'highlight',\n                targetDate,\n                { interval: timeChange }\n            )\n            this.render()\n        }\n    }\n\n\n    // Bind some picker events.\n    picker.\n        on( 'render', function() {\n            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {\n                var value = this.value\n                if ( value ) {\n                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )\n                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )\n                }\n            })\n            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {\n                var value = this.value\n                if ( value ) {\n                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )\n                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )\n                }\n            })\n        }, 1 ).\n        on( 'open', function() {\n            var includeToday = ''\n            if ( calendar.disabled( calendar.get('now') ) ) {\n                includeToday = ':not(.' + settings.klass.buttonToday + ')'\n            }\n            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )\n        }, 1 ).\n        on( 'close', function() {\n            picker.$root.find( 'button, select' ).attr( 'disabled', true )\n        }, 1 )\n\n} //DatePicker\n\n\n/**\n * Set a datepicker item object.\n */\nDatePicker.prototype.set = function( type, value, options ) {\n\n    var calendar = this,\n        calendarItem = calendar.item\n\n    // If the value is `null` just set it immediately.\n    if ( value === null ) {\n        if ( type == 'clear' ) type = 'select'\n        calendarItem[ type ] = value\n        return calendar\n    }\n\n    // Otherwise go through the queue of methods, and invoke the functions.\n    // Update this as the time unit, and set the final value as this item.\n    // * In the case of `enable`, keep the queue but set `disable` instead.\n    //   And in the case of `flip`, keep the queue but set `enable` instead.\n    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {\n        value = calendar[ method ]( type, value, options )\n        return value\n    }).pop()\n\n    // Check if we need to cascade through more updates.\n    if ( type == 'select' ) {\n        calendar.set( 'highlight', calendarItem.select, options )\n    }\n    else if ( type == 'highlight' ) {\n        calendar.set( 'view', calendarItem.highlight, options )\n    }\n    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {\n        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {\n            calendar.set( 'select', calendarItem.select, options )\n        }\n        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {\n            calendar.set( 'highlight', calendarItem.highlight, options )\n        }\n    }\n\n    return calendar\n} //DatePicker.prototype.set\n\n\n/**\n * Get a datepicker item object.\n */\nDatePicker.prototype.get = function( type ) {\n    return this.item[ type ]\n} //DatePicker.prototype.get\n\n\n/**\n * Create a picker date object.\n */\nDatePicker.prototype.create = function( type, value, options ) {\n\n    var isInfiniteValue,\n        calendar = this\n\n    // If theres no value, use the type as the value.\n    value = value === undefined ? type : value\n\n\n    // If its infinity, update the value.\n    if ( value == -Infinity || value == Infinity ) {\n        isInfiniteValue = value\n    }\n\n    // If its an object, use the native date object.\n    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {\n        value = value.obj\n    }\n\n    // If its an array, convert it into a date and make sure\n    // that its a valid date  otherwise default to today.\n    else if ( $.isArray( value ) ) {\n        value = new Date(Date.UTC(value[ 0 ], value[ 1 ], value[ 2 ] ))\n        value = _.isDate( value ) ? value : calendar.create().obj\n    }\n\n    // If its a number, make a normalized date.\n    else if ( _.isInteger( value ) ) {\n        value = calendar.normalize( new Date( value ), options )\n    }\n\n    // If its a date object, make a normalized date.\n    else if ( _.isDate( value ) ) {\n        value = calendar.normalize( value, options )\n    }\n\n    // If its a literal true or any other case, set it to now.\n    else /*if ( value === true )*/ {\n        value = calendar.now( type, value, options )\n    }\n\n    // Return the compiled object.\n    return {\n        year: isInfiniteValue || value.getUTCFullYear(),\n        month: isInfiniteValue || value.getUTCMonth(),\n        date: isInfiniteValue || value.getUTCDate(),\n        day: isInfiniteValue || value.getUTCDay(),\n        obj: isInfiniteValue || value,\n        pick: isInfiniteValue || value.getTime()\n    }\n} //DatePicker.prototype.create\n\n\n/**\n * Create a range limit object using an array, date object,\n * literal true, or integer relative to another time.\n */\nDatePicker.prototype.createRange = function( from, to ) {\n\n    var calendar = this,\n        createDate = function( date ) {\n            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {\n                return calendar.create( date )\n            }\n            return date\n        }\n\n    // Create objects if possible.\n    if ( !_.isInteger( from ) ) {\n        from = createDate( from )\n    }\n    if ( !_.isInteger( to ) ) {\n        to = createDate( to )\n    }\n\n    // Create relative dates.\n    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {\n        from = [ to.year, to.month, to.date + from ];\n    }\n    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {\n        to = [ from.year, from.month, from.date + to ];\n    }\n\n    return {\n        from: createDate( from ),\n        to: createDate( to )\n    }\n} //DatePicker.prototype.createRange\n\n\n/**\n * Check if a date unit falls within a date range object.\n */\nDatePicker.prototype.withinRange = function( range, dateUnit ) {\n    range = this.createRange(range.from, range.to)\n    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick\n}\n\n\n/**\n * Check if two date range objects overlap.\n */\nDatePicker.prototype.overlapRanges = function( one, two ) {\n\n    var calendar = this\n\n    // Convert the ranges into comparable dates.\n    one = calendar.createRange( one.from, one.to )\n    two = calendar.createRange( two.from, two.to )\n\n    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||\n        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )\n}\n\n\n/**\n * Get the date today.\n */\nDatePicker.prototype.now = function( type, value, options ) {\n    value = new Date()\n    if ( options && options.rel ) {\n        value.setUTCDate( value.getUTCDate() + options.rel )\n    }\n    return this.normalize( value, options )\n}\n\n\n/**\n * Navigate to next/prev month.\n */\nDatePicker.prototype.navigate = function( type, value, options ) {\n\n    var targetDateObject,\n        targetYear,\n        targetMonth,\n        targetDate,\n        isTargetArray = $.isArray( value ),\n        isTargetObject = $.isPlainObject( value ),\n        viewsetObject = this.item.view/*,\n        safety = 100*/\n\n\n    if ( isTargetArray || isTargetObject ) {\n\n        if ( isTargetObject ) {\n            targetYear = value.year\n            targetMonth = value.month\n            targetDate = value.date\n        }\n        else {\n            targetYear = +value[0]\n            targetMonth = +value[1]\n            targetDate = +value[2]\n        }\n\n        // If were navigating months but the view is in a different\n        // month, navigate to the views year and month.\n        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {\n            targetYear = viewsetObject.year\n            targetMonth = viewsetObject.month\n        }\n\n        // Figure out the expected target year and month.\n        targetDateObject = new Date( Date.UTC( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 ) )\n        targetYear = targetDateObject.getUTCFullYear()\n        targetMonth = targetDateObject.getUTCMonth()\n\n        // If the month were going to doesnt have enough days,\n        // keep decreasing the date until we reach the months last date.\n        while ( /*safety &&*/ new Date( Date.UTC( targetYear, targetMonth, targetDate ) ).getUTCMonth() !== targetMonth ) {\n            targetDate -= 1\n            /*safety -= 1\n            if ( !safety ) {\n                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'\n            }*/\n        }\n\n        value = [ targetYear, targetMonth, targetDate ]\n    }\n\n    return value\n} //DatePicker.prototype.navigate\n\n\n/**\n * Normalize a date by setting the hours to midnight.\n */\nDatePicker.prototype.normalize = function( value/*, options*/ ) {\n    value.setUTCHours( 0, 0, 0, 0 )\n    return value\n}\n\n\n/**\n * Measure the range of dates.\n */\nDatePicker.prototype.measure = function( type, value/*, options*/ ) {\n\n    var calendar = this\n\n    // If its anything false-y, remove the limits.\n    if ( !value ) {\n        value = type == 'min' ? -Infinity : Infinity\n    }\n\n    // If its a string, parse it.\n    else if ( typeof value == 'string' ) {\n        value = calendar.parse( type, value )\n    }\n\n    // If it's an integer, get a date relative to today.\n    else if ( _.isInteger( value ) ) {\n        value = calendar.now( type, value, { rel: value } )\n    }\n\n    return value\n} ///DatePicker.prototype.measure\n\n\n/**\n * Create a viewset object based on navigation.\n */\nDatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {\n    return this.create([ dateObject.year, dateObject.month, 1 ])\n}\n\n\n/**\n * Validate a date as enabled and shift if needed.\n */\nDatePicker.prototype.validate = function( type, dateObject, options ) {\n\n    var calendar = this,\n\n        // Keep a reference to the original date.\n        originalDateObject = dateObject,\n\n        // Make sure we have an interval.\n        interval = options && options.interval ? options.interval : 1,\n\n        // Check if the calendar enabled dates are inverted.\n        isFlippedBase = calendar.item.enable === -1,\n\n        // Check if we have any enabled dates after/before now.\n        hasEnabledBeforeTarget, hasEnabledAfterTarget,\n\n        // The min & max limits.\n        minLimitObject = calendar.item.min,\n        maxLimitObject = calendar.item.max,\n\n        // Check if weve reached the limit during shifting.\n        reachedMin, reachedMax,\n\n        // Check if the calendar is inverted and at least one weekday is enabled.\n        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {\n\n            // If theres a date, check where it is relative to the target.\n            if ( $.isArray( value ) ) {\n                var dateTime = calendar.create( value ).pick\n                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true\n                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true\n            }\n\n            // Return only integers for enabled weekdays.\n            return _.isInteger( value )\n        }).length/*,\n\n        safety = 100*/\n\n\n\n    // Cases to validate for:\n    // [1] Not inverted and date disabled.\n    // [2] Inverted and some dates enabled.\n    // [3] Not inverted and out of range.\n    //\n    // Cases to **not** validate for:\n    //  Navigating months.\n    //  Not inverted and date enabled.\n    //  Inverted and all dates disabled.\n    //  ..and anything else.\n    if ( !options || !options.nav ) if (\n        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||\n        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||\n        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )\n    ) {\n\n\n        // When inverted, flip the direction if there arent any enabled weekdays\n        // and there are no enabled dates in the direction of the interval.\n        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {\n            interval *= -1\n        }\n\n\n        // Keep looping until we reach an enabled date.\n        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {\n\n            /*safety -= 1\n            if ( !safety ) {\n                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'\n            }*/\n\n\n            // If weve looped into the next/prev month with a large interval, return to the original date and flatten the interval.\n            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {\n                dateObject = originalDateObject\n                interval = interval > 0 ? 1 : -1\n            }\n\n\n            // If weve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.\n            if ( dateObject.pick <= minLimitObject.pick ) {\n                reachedMin = true\n                interval = 1\n                dateObject = calendar.create([\n                    minLimitObject.year,\n                    minLimitObject.month,\n                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)\n                ])\n            }\n            else if ( dateObject.pick >= maxLimitObject.pick ) {\n                reachedMax = true\n                interval = -1\n                dateObject = calendar.create([\n                    maxLimitObject.year,\n                    maxLimitObject.month,\n                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)\n                ])\n            }\n\n\n            // If weve reached both limits, just break out of the loop.\n            if ( reachedMin && reachedMax ) {\n                break\n            }\n\n\n            // Finally, create the shifted date using the interval and keep looping.\n            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])\n        }\n\n    } //endif\n\n\n    // Return the date object settled on.\n    return dateObject\n} //DatePicker.prototype.validate\n\n\n/**\n * Check if a date is disabled.\n */\nDatePicker.prototype.disabled = function( dateToVerify ) {\n\n    var\n        calendar = this,\n\n        // Filter through the disabled dates to check if this is one.\n        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {\n\n            // If the date is a number, match the weekday with 0index and `firstDay` check.\n            if ( _.isInteger( dateToDisable ) ) {\n                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7\n            }\n\n            // If its an array or a native JS date, create and match the exact date.\n            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {\n                return dateToVerify.pick === calendar.create( dateToDisable ).pick\n            }\n\n            // If its an object, match a date within the from and to range.\n            if ( $.isPlainObject( dateToDisable ) ) {\n                return calendar.withinRange( dateToDisable, dateToVerify )\n            }\n        })\n\n    // If this date matches a disabled date, confirm its not inverted.\n    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {\n        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||\n            $.isPlainObject( dateToDisable ) && dateToDisable.inverted\n    }).length\n\n    // Check the calendar enabled flag and respectively flip the\n    // disabled state. Then also check if its beyond the min/max limits.\n    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||\n        dateToVerify.pick < calendar.item.min.pick ||\n        dateToVerify.pick > calendar.item.max.pick\n\n} //DatePicker.prototype.disabled\n\n\n/**\n * Parse a string into a usable type.\n */\nDatePicker.prototype.parse = function( type, value, options ) {\n\n    var calendar = this,\n        parsingObject = {}\n\n    // If its already parsed, were good.\n    if ( !value || typeof value != 'string' ) {\n        return value\n    }\n\n    // We need a `.format` to parse the value with.\n    if ( !( options && options.format ) ) {\n        options = options || {}\n        options.format = calendar.settings.format\n    }\n\n    // Convert the format into an array and then map through it.\n    calendar.formats.toArray( options.format ).map( function( label ) {\n\n        var\n            // Grab the formatting label.\n            formattingLabel = calendar.formats[ label ],\n\n            // The format length is from the formatting label function or the\n            // label length without the escaping exclamation (!) mark.\n            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length\n\n        // If there's a format label, split the value up to the format length.\n        // Then add it to the parsing object with appropriate label.\n        if ( formattingLabel ) {\n            parsingObject[ label ] = value.substr( 0, formatLength )\n        }\n\n        // Update the value as the substring from format length to end.\n        value = value.substr( formatLength )\n    })\n\n    // Compensate for month 0index.\n    return [\n        parsingObject.yyyy || parsingObject.yy,\n        +( parsingObject.mm || parsingObject.m ) - 1,\n        parsingObject.dd || parsingObject.d\n    ]\n} //DatePicker.prototype.parse\n\n\n/**\n * Various formats to display the object in.\n */\nDatePicker.prototype.formats = (function() {\n\n    // Return the length of the first word in a collection.\n    function getWordLengthFromCollection( string, collection, dateObject ) {\n\n        // Grab the first word from the string.\n        var word = string.match( /\\w+/ )[ 0 ]\n\n        // If there's no month index, add it to the date object\n        if ( !dateObject.mm && !dateObject.m ) {\n            dateObject.m = collection.indexOf( word ) + 1\n        }\n\n        // Return the length of the word.\n        return word.length\n    }\n\n    // Get the length of the first word in a string.\n    function getFirstWordLength( string ) {\n        return string.match( /\\w+/ )[ 0 ].length\n    }\n\n    return {\n\n        d: function( string, dateObject ) {\n\n            // If there's string, then get the digits length.\n            // Otherwise return the selected date.\n            return string ? _.digits( string ) : dateObject.date\n        },\n        dd: function( string, dateObject ) {\n\n            // If there's a string, then the length is always 2.\n            // Otherwise return the selected date with a leading zero.\n            return string ? 2 : _.lead( dateObject.date )\n        },\n        ddd: function( string, dateObject ) {\n\n            // If there's a string, then get the length of the first word.\n            // Otherwise return the short selected weekday.\n            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]\n        },\n        dddd: function( string, dateObject ) {\n\n            // If there's a string, then get the length of the first word.\n            // Otherwise return the full selected weekday.\n            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]\n        },\n        m: function( string, dateObject ) {\n\n            // If there's a string, then get the length of the digits\n            // Otherwise return the selected month with 0index compensation.\n            return string ? _.digits( string ) : dateObject.month + 1\n        },\n        mm: function( string, dateObject ) {\n\n            // If there's a string, then the length is always 2.\n            // Otherwise return the selected month with 0index and leading zero.\n            return string ? 2 : _.lead( dateObject.month + 1 )\n        },\n        mmm: function( string, dateObject ) {\n\n            var collection = this.settings.monthsShort\n\n            // If there's a string, get length of the relevant month from the short\n            // months collection. Otherwise return the selected month from that collection.\n            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]\n        },\n        mmmm: function( string, dateObject ) {\n\n            var collection = this.settings.monthsFull\n\n            // If there's a string, get length of the relevant month from the full\n            // months collection. Otherwise return the selected month from that collection.\n            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]\n        },\n        yy: function( string, dateObject ) {\n\n            // If there's a string, then the length is always 2.\n            // Otherwise return the selected year by slicing out the first 2 digits.\n            return string ? 2 : ( '' + dateObject.year ).slice( 2 )\n        },\n        yyyy: function( string, dateObject ) {\n\n            // If there's a string, then the length is always 4.\n            // Otherwise return the selected year.\n            return string ? 4 : dateObject.year\n        },\n\n        // Create an array by splitting the formatting string passed.\n        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },\n\n        // Format an object into a string using the formatting options.\n        toString: function ( formatString, itemObject ) {\n            var calendar = this\n            return calendar.formats.toArray( formatString ).map( function( label ) {\n                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )\n            }).join( '' )\n        }\n    }\n})() //DatePicker.prototype.formats\n\n\n\n\n/**\n * Check if two date units are the exact.\n */\nDatePicker.prototype.isDateExact = function( one, two ) {\n\n    var calendar = this\n\n    // When were working with weekdays, do a direct comparison.\n    if (\n        ( _.isInteger( one ) && _.isInteger( two ) ) ||\n        ( typeof one == 'boolean' && typeof two == 'boolean' )\n     ) {\n        return one === two\n    }\n\n    // When were working with date representations, compare the pick value.\n    if (\n        ( _.isDate( one ) || $.isArray( one ) ) &&\n        ( _.isDate( two ) || $.isArray( two ) )\n    ) {\n        return calendar.create( one ).pick === calendar.create( two ).pick\n    }\n\n    // When were working with range objects, compare the from and to.\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\n        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )\n    }\n\n    return false\n}\n\n\n/**\n * Check if two date units overlap.\n */\nDatePicker.prototype.isDateOverlap = function( one, two ) {\n\n    var calendar = this,\n        firstDay = calendar.settings.firstDay ? 1 : 0\n\n    // When were working with a weekday index, compare the days.\n    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {\n        one = one % 7 + firstDay\n        return one === calendar.create( two ).day + 1\n    }\n    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {\n        two = two % 7 + firstDay\n        return two === calendar.create( one ).day + 1\n    }\n\n    // When were working with range objects, check if the ranges overlap.\n    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {\n        return calendar.overlapRanges( one, two )\n    }\n\n    return false\n}\n\n\n/**\n * Flip the enabled state.\n */\nDatePicker.prototype.flipEnable = function(val) {\n    var itemObject = this.item\n    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)\n}\n\n\n/**\n * Mark a collection of dates as disabled.\n */\nDatePicker.prototype.deactivate = function( type, datesToDisable ) {\n\n    var calendar = this,\n        disabledItems = calendar.item.disable.slice(0)\n\n\n    // If were flipping, thats all we need to do.\n    if ( datesToDisable == 'flip' ) {\n        calendar.flipEnable()\n    }\n\n    else if ( datesToDisable === false ) {\n        calendar.flipEnable(1)\n        disabledItems = []\n    }\n\n    else if ( datesToDisable === true ) {\n        calendar.flipEnable(-1)\n        disabledItems = []\n    }\n\n    // Otherwise go through the dates to disable.\n    else {\n\n        datesToDisable.map(function( unitToDisable ) {\n\n            var matchFound\n\n            // When we have disabled items, check for matches.\n            // If something is matched, immediately break out.\n            for ( var index = 0; index < disabledItems.length; index += 1 ) {\n                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {\n                    matchFound = true\n                    break\n                }\n            }\n\n            // If nothing was found, add the validated unit to the collection.\n            if ( !matchFound ) {\n                if (\n                    _.isInteger( unitToDisable ) ||\n                    _.isDate( unitToDisable ) ||\n                    $.isArray( unitToDisable ) ||\n                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )\n                ) {\n                    disabledItems.push( unitToDisable )\n                }\n            }\n        })\n    }\n\n    // Return the updated collection.\n    return disabledItems\n} //DatePicker.prototype.deactivate\n\n\n/**\n * Mark a collection of dates as enabled.\n */\nDatePicker.prototype.activate = function( type, datesToEnable ) {\n\n    var calendar = this,\n        disabledItems = calendar.item.disable,\n        disabledItemsCount = disabledItems.length\n\n    // If were flipping, thats all we need to do.\n    if ( datesToEnable == 'flip' ) {\n        calendar.flipEnable()\n    }\n\n    else if ( datesToEnable === true ) {\n        calendar.flipEnable(1)\n        disabledItems = []\n    }\n\n    else if ( datesToEnable === false ) {\n        calendar.flipEnable(-1)\n        disabledItems = []\n    }\n\n    // Otherwise go through the disabled dates.\n    else {\n\n        datesToEnable.map(function( unitToEnable ) {\n\n            var matchFound,\n                disabledUnit,\n                index,\n                isExactRange\n\n            // Go through the disabled items and try to find a match.\n            for ( index = 0; index < disabledItemsCount; index += 1 ) {\n\n                disabledUnit = disabledItems[index]\n\n                // When an exact match is found, remove it from the collection.\n                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {\n                    matchFound = disabledItems[index] = null\n                    isExactRange = true\n                    break\n                }\n\n                // When an overlapped match is found, add the inverted state to it.\n                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {\n                    if ( $.isPlainObject( unitToEnable ) ) {\n                        unitToEnable.inverted = true\n                        matchFound = unitToEnable\n                    }\n                    else if ( $.isArray( unitToEnable ) ) {\n                        matchFound = unitToEnable\n                        if ( !matchFound[3] ) matchFound.push( 'inverted' )\n                    }\n                    else if ( _.isDate( unitToEnable ) ) {\n                        matchFound = [ unitToEnable.getUTCFullYear(), unitToEnable.getUTCMonth(), unitToEnable.getUTCDate(), 'inverted' ]\n                    }\n                    break\n                }\n            }\n\n            // If a match was found, remove a previous duplicate entry.\n            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\n                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {\n                    disabledItems[index] = null\n                    break\n                }\n            }\n\n            // In the event that were dealing with an exact range of dates,\n            // make sure there are no inverted dates because of it.\n            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {\n                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {\n                    disabledItems[index] = null\n                    break\n                }\n            }\n\n            // If something is still matched, add it into the collection.\n            if ( matchFound ) {\n                disabledItems.push( matchFound )\n            }\n        })\n    }\n\n    // Return the updated collection.\n    return disabledItems.filter(function( val ) { return val != null })\n} //DatePicker.prototype.activate\n\n\n/**\n * Create a string for the nodes in the picker.\n */\nDatePicker.prototype.nodes = function( isOpen ) {\n\n    var\n        calendar = this,\n        settings = calendar.settings,\n        calendarItem = calendar.item,\n        nowObject = calendarItem.now,\n        selectedObject = calendarItem.select,\n        highlightedObject = calendarItem.highlight,\n        viewsetObject = calendarItem.view,\n        disabledCollection = calendarItem.disable,\n        minLimitObject = calendarItem.min,\n        maxLimitObject = calendarItem.max,\n\n\n        // Create the calendar table head using a copy of weekday labels collection.\n        // * We do a copy so we don't mutate the original array.\n        tableHead = (function( collection, fullCollection ) {\n\n            // If the first day should be Monday, move Sunday to the end.\n            if ( settings.firstDay ) {\n                collection.push( collection.shift() )\n                fullCollection.push( fullCollection.shift() )\n            }\n\n            // Create and return the table head group.\n            return _.node(\n                'thead',\n                _.node(\n                    'tr',\n                    _.group({\n                        min: 0,\n                        max: DAYS_IN_WEEK - 1,\n                        i: 1,\n                        node: 'th',\n                        item: function( counter ) {\n                            return [\n                                collection[ counter ],\n                                settings.klass.weekdays,\n                                'scope=col title=\"' + fullCollection[ counter ] + '\"'\n                            ]\n                        }\n                    })\n                )\n            ) //endreturn\n        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysShort ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead\n\n\n        // Create the nav for next/prev month.\n        createMonthNav = function( next ) {\n\n            // Otherwise, return the created month tag.\n            return _.node(\n                'div',\n                ' ',\n                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (\n\n                    // If the focused month is outside the range, disabled the button.\n                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||\n                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?\n                    ' ' + settings.klass.navDisabled : ''\n                ),\n                'data-nav=' + ( next || -1 ) + ' ' +\n                _.ariaAttr({\n                    role: 'button',\n                    controls: calendar.$node[0].id + '_table'\n                }) + ' ' +\n                'title=\"' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '\"'\n            ) //endreturn\n        }, //createMonthNav\n\n\n        // Create the month label.\n        createMonthLabel = function() {\n\n            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull\n\n            // If there are months to select, add a dropdown menu.\n            if ( settings.selectMonths ) {\n\n                return _.node( 'select',\n                    _.group({\n                        min: 0,\n                        max: 11,\n                        i: 1,\n                        node: 'option',\n                        item: function( loopedMonth ) {\n\n                            return [\n\n                                // The looped month and no classes.\n                                monthsCollection[ loopedMonth ], 0,\n\n                                // Set the value and selected index.\n                                'value=' + loopedMonth +\n                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +\n                                (\n                                    (\n                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||\n                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )\n                                    ) ?\n                                    ' disabled' : ''\n                                )\n                            ]\n                        }\n                    }),\n                    settings.klass.selectMonth,\n                    ( isOpen ? '' : 'disabled' ) + ' ' +\n                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +\n                    'title=\"' + settings.labelMonthSelect + '\"'\n                )\n            }\n\n            // If there's a need for a month selector\n            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )\n        }, //createMonthLabel\n\n\n        // Create the year label.\n        createYearLabel = function() {\n\n            var focusedYear = viewsetObject.year,\n\n            // If years selector is set to a literal \"true\", set it to 5. Otherwise\n            // divide in half to get half before and half after focused year.\n            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )\n\n            // If there are years to select, add a dropdown menu.\n            if ( numberYears ) {\n\n                var\n                    minYear = minLimitObject.year,\n                    maxYear = maxLimitObject.year,\n                    lowestYear = focusedYear - numberYears,\n                    highestYear = focusedYear + numberYears\n\n                // If the min year is greater than the lowest year, increase the highest year\n                // by the difference and set the lowest year to the min year.\n                if ( minYear > lowestYear ) {\n                    highestYear += minYear - lowestYear\n                    lowestYear = minYear\n                }\n\n                // If the max year is less than the highest year, decrease the lowest year\n                // by the lower of the two: available and needed years. Then set the\n                // highest year to the max year.\n                if ( maxYear < highestYear ) {\n\n                    var availableYears = lowestYear - minYear,\n                        neededYears = highestYear - maxYear\n\n                    lowestYear -= availableYears > neededYears ? neededYears : availableYears\n                    highestYear = maxYear\n                }\n\n                return _.node( 'select',\n                    _.group({\n                        min: lowestYear,\n                        max: highestYear,\n                        i: 1,\n                        node: 'option',\n                        item: function( loopedYear ) {\n                            return [\n\n                                // The looped year and no classes.\n                                loopedYear, 0,\n\n                                // Set the value and selected index.\n                                'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )\n                            ]\n                        }\n                    }),\n                    settings.klass.selectYear,\n                    ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +\n                    'title=\"' + settings.labelYearSelect + '\"'\n                )\n            }\n\n            // Otherwise just return the year focused\n            return _.node( 'div', focusedYear, settings.klass.year )\n        } //createYearLabel\n\n\n    // Create and return the entire calendar.\n    return _.node(\n        'div',\n        ( settings.selectYears ? createYearLabel() + createMonthLabel() : createMonthLabel() + createYearLabel() ) +\n        createMonthNav() + createMonthNav( 1 ),\n        settings.klass.header\n    ) + _.node(\n        'table',\n        tableHead +\n        _.node(\n            'tbody',\n            _.group({\n                min: 0,\n                max: WEEKS_IN_CALENDAR - 1,\n                i: 1,\n                node: 'tr',\n                item: function( rowCounter ) {\n\n                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.\n                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0\n\n                    return [\n                        _.group({\n                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index\n                            max: function() {\n                                return this.min + DAYS_IN_WEEK - 1\n                            },\n                            i: 1,\n                            node: 'td',\n                            item: function( targetDate ) {\n\n                                // Convert the time date from a relative date to a target date.\n                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])\n\n                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,\n                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,\n                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick\n\n                                return [\n                                    _.node(\n                                        'div',\n                                        targetDate.date,\n                                        (function( klasses ) {\n\n                                            // Add the `infocus` or `outfocus` classes based on month in view.\n                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )\n\n                                            // Add the `today` class if needed.\n                                            if ( nowObject.pick == targetDate.pick ) {\n                                                klasses.push( settings.klass.now )\n                                            }\n\n                                            // Add the `selected` class if something's selected and the time matches.\n                                            if ( isSelected ) {\n                                                klasses.push( settings.klass.selected )\n                                            }\n\n                                            // Add the `highlighted` class if something's highlighted and the time matches.\n                                            if ( isHighlighted ) {\n                                                klasses.push( settings.klass.highlighted )\n                                            }\n\n                                            // Add the `disabled` class if something's disabled and the object matches.\n                                            if ( isDisabled ) {\n                                                klasses.push( settings.klass.disabled )\n                                            }\n\n                                            return klasses.join( ' ' )\n                                        })([ settings.klass.day ]),\n                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({\n                                            role: 'gridcell',\n                                            selected: isSelected && calendar.$node.val() === _.trigger(\n                                                    calendar.formats.toString,\n                                                    calendar,\n                                                    [ settings.format, targetDate ]\n                                                ) ? true : null,\n                                            activedescendant: isHighlighted ? true : null,\n                                            disabled: isDisabled ? true : null\n                                        })\n                                    ),\n                                    '',\n                                    _.ariaAttr({ role: 'presentation' })\n                                ] //endreturn\n                            }\n                        })\n                    ] //endreturn\n                }\n            })\n        ),\n        settings.klass.table,\n        'id=\"' + calendar.$node[0].id + '_table' + '\" ' + _.ariaAttr({\n            role: 'grid',\n            controls: calendar.$node[0].id,\n            readonly: true\n        })\n    ) +\n\n    // * For Firefox forms to submit, make sure to set the buttons `type` attributes as button.\n    _.node(\n        'div',\n        _.node( 'button', settings.today, settings.klass.buttonToday,\n            'type=button data-pick=' + nowObject.pick +\n            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +\n            _.ariaAttr({ controls: calendar.$node[0].id }) ) +\n        _.node( 'button', settings.clear, settings.klass.buttonClear,\n            'type=button data-clear=1' +\n            ( isOpen ? '' : ' disabled' ) + ' ' +\n            _.ariaAttr({ controls: calendar.$node[0].id }) ) +\n        _.node('button', settings.close, settings.klass.buttonClose,\n            'type=button data-close=true ' +\n            ( isOpen ? '' : ' disabled' ) + ' ' +\n            _.ariaAttr({ controls: calendar.$node[0].id }) ),\n        settings.klass.footer\n    ) //endreturn\n} //DatePicker.prototype.nodes\n\n\n\n\n/**\n * The date picker defaults.\n */\nDatePicker.defaults = (function( prefix ) {\n\n    return {\n\n        // The title label to use for the month nav buttons\n        labelMonthNext: 'Next month',\n        labelMonthPrev: 'Previous month',\n\n        // The title label to use for the dropdown selectors\n        labelMonthSelect: 'Select a month',\n        labelYearSelect: 'Select a year',\n\n        // Months and weekdays\n        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],\n        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],\n        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],\n        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],\n\n        // Today and clear\n        today: 'Today',\n        clear: 'Clear',\n        close: 'Close',\n\n        // The format to show on the `input` element\n        format: 'd mmmm, yyyy',\n\n        // Classes\n        klass: {\n\n            table: prefix + 'table',\n\n            header: prefix + 'header',\n\n            navPrev: prefix + 'nav--prev',\n            navNext: prefix + 'nav--next',\n            navDisabled: prefix + 'nav--disabled',\n\n            month: prefix + 'month',\n            year: prefix + 'year',\n\n            selectMonth: prefix + 'select--month',\n            selectYear: prefix + 'select--year',\n\n            weekdays: prefix + 'weekday',\n\n            day: prefix + 'day',\n            disabled: prefix + 'day--disabled',\n            selected: prefix + 'day--selected',\n            highlighted: prefix + 'day--highlighted',\n            now: prefix + 'day--today',\n            infocus: prefix + 'day--infocus',\n            outfocus: prefix + 'day--outfocus',\n\n            footer: prefix + 'footer',\n\n            buttonClear: prefix + 'button--clear',\n            buttonToday: prefix + 'button--today',\n            buttonClose: prefix + 'button--close'\n        }\n    }\n})( Picker.klasses().picker + '__' )\n\n\n\n\n\n/**\n * Extend the picker to add the date picker.\n */\nPicker.extend( 'pickadate', DatePicker )\n\n\n}));\n","import React from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport Datepicker from './datepicker.js';\nimport Timepicker from './timepicker.js';\n\nimport ExplorerUtils from '../../utils/ExplorerUtils';\nimport ExplorerActions from '../../actions/ExplorerActions';\n\nconst dateFormat = 'll';\nconst timeFormat = 'h:mm A';\n\nconst AbsolutePicker = React.createClass({\n\n  setDate: function(name, value) {\n    var time = this.props.time;\n    var endValue = new Date(time.end);\n\n    var updates = _.cloneDeep(time);\n    if (name === 'start_date' && value > endValue) {\n      updates.end = '';\n    }\n    updates[name] = new Date(moment(new Date(value)).format(dateFormat) + \" \" + moment(time[name]).format(timeFormat));\n    this.props.handleChange('time', updates);\n  },\n\n  handleDateBlur: function (event) {\n    var name = event.target.name;\n    var value = event.target.value;\n    this.setDate(name, value);\n  },\n\n  setTime: function(name, value) {\n    var time = this.props.time;\n    var updates = _.cloneDeep(time);\n    updates[name] = new Date(moment(time[name]).format(dateFormat) + \" \" + moment(new Date(value)).format(timeFormat));\n    this.props.handleChange('time', updates);\n  },\n\n  // React methods\n\n  render: function() {\n    var time = this.props.time;\n\n    return (\n      <div className=\"absolute-timeframe-picker\">\n        <div className=\"row\">\n          <div className=\"col-xs-2\">\n            <label>Start</label>\n          </div>\n          <div className=\"col-xs-5 form-collapse-right\">\n            <Datepicker ref=\"start-date\"\n                        value={moment(time.start).format(dateFormat)}\n                        name=\"start\"\n                        placeholder=\"Date\"\n                        onBlur={this.handleDateBlur}\n                        onSet={this.setDate} />\n          </div>\n          <div className=\"col-xs-5 form-collapse-left\">\n            <Timepicker ref=\"start-time\"\n                        value={moment(time.start).format(timeFormat)}\n                        name=\"start\"\n                        placeholder=\"Time\"\n                        handleBlur={this.setTime}\n                        handleSelection={this.setTime} />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-xs-2\">\n            <label>End</label>\n          </div>\n          <div className=\"col-xs-5 form-collapse-right\">\n            <Datepicker ref=\"end-date\"\n                        value={moment(time.end).format(dateFormat)}\n                        minimum={moment(time.start).format(dateFormat)}\n                        name=\"end\"\n                        placeholder=\"Date\"\n                        onBlur={this.handleDateBlur}\n                        onSet={this.setDate} />\n          </div>\n          <div className=\"col-xs-5 form-collapse-left\">\n            <Timepicker ref=\"end-time\"\n                        value={moment(time.end).format(timeFormat)}\n                        name=\"end\"\n                        placeholder=\"Time\"\n                        handleBlur={this.setTime}\n                        handleSelection={this.setTime} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = AbsolutePicker;\n","import React from 'react';\nimport _ from 'lodash';\nimport SelectField from '../select_field.js';\nimport Timeframe from '../../../common/timeframe.js';\nimport FieldsToggle from '../../../common/fields_toggle.js';\nimport Notice from '../../../common/notice.js';\nimport FilterManager from '../../../common/filter_manager.js';\nimport FilterUtils from '../../../../utils/FilterUtils.js';\nimport classNames from 'classnames';\n\nconst FunnelStep = React.createClass({\n\n  propTypes: {\n    index:                React.PropTypes.number.isRequired,\n    step:                 React.PropTypes.object.isRequired,\n    eventCollections:     React.PropTypes.array.isRequired,\n    propertyNames:        React.PropTypes.array.isRequired,\n    onBrowseEvents:       React.PropTypes.func.isRequired,\n    getPropertyType:      React.PropTypes.func.isRequired,\n    moveStep:             React.PropTypes.func.isRequired,\n    removeStep:           React.PropTypes.func.isRequired,\n    handleChange:         React.PropTypes.func.isRequired,\n    toggleStepActive:     React.PropTypes.func.isRequired,\n    handleFilterChange:   React.PropTypes.func.isRequired,\n    handleAddFilter:      React.PropTypes.func.isRequired,\n    handleRemoveFilter:   React.PropTypes.func.isRequired\n  },\n\n  removeStep: function(e) {\n    e.preventDefault();\n    if (this.props.canRemove && confirm(\"Are you sure you want to delete this funnel step?\")) {\n      this.props.removeStep(this.props.index);\n    }\n  },\n\n  handleChange: function(name, value) {\n    this.props.handleChange(this.props.index, name, value);\n  },\n\n  handleChangeWithEvent: function(e) {\n    e.preventDefault();\n    this.props.handleChange(this.props.index, e.target.name, e.target.value);\n  },\n\n  handleCheckboxChange: function(e) {\n    this.props.handleChange(this.props.index, e.target.name, e.target.checked);\n  },\n\n  toggleStepActive: function(e) {\n    this.props.toggleStepActive(this.props.index, !this.props.step.active);\n  },\n\n  handleFiltersToggle: function() {\n    this.refs['filter-manager'].open();\n  },\n\n  handleAddFilter: function() {\n    this.props.handleAddFilter(this.props.index);\n  },\n\n  handleRemoveFilter: function(filterIndex) {\n    this.props.handleRemoveFilter(this.props.index, filterIndex);\n  },\n\n  handleFilterChange: function(filterIndex, updates) {\n    this.props.handleFilterChange(this.props.index, filterIndex, updates);\n  },\n\n  moveStepUp: function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.moveStep(this.props.index, 'up');\n  },\n\n  moveStepDown: function(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.moveStep(this.props.index, 'down');\n  },\n\n  buildStepBody: function() {\n    var remove, notice;\n\n    if (this.props.canRemove) {\n      remove = (\n        <a href=\"#\" className=\"remove-step\" onClick={this.removeStep}>\n          <i className=\"icon glyphicon glyphicon-remove-circle margin-right-tiny\"></i>\n          Remove Step\n        </a>\n      );\n    }\n    if (this.props.notice) {\n      notice = (<Notice notice={this.props.notice} closable={false} />);\n    }\n\n    if (this.props.step.active === true) {\n      return (\n        <div className=\"step-body margin-top-small margin-bottom-small\">\n          {notice}\n          <SelectField name=\"event_collection\"\n                       label=\"Event Collection\"\n                       value={this.props.step.event_collection}\n                       options={this.props.eventCollections}\n                       requiredLabel={true}\n                       onBrowseEvents={this.props.onBrowseEvents}\n                       handleChange={this.handleChange} />\n          <SelectField name=\"actor_property\"\n                       label=\"Actor Property\"\n                       value={this.props.step.actor_property}\n                       options={this.props.propertyNames}\n                       requiredLabel={true}\n                       handleChange={this.handleChange} />\n          <Timeframe ref=\"timeframe\"\n                     time={this.props.step.time}\n                     timezone={this.props.step.timezone}\n                     handleChange={this.handleChange}/>\n          <div className=\"field-component\">\n            <FieldsToggle ref=\"filters-fields-toggle\"\n                          name=\"Filters\"\n                          toggleCallback={this.handleFiltersToggle}\n                          fieldsCount={FilterUtils.validFilters(this.props.step.filters).length} />\n          </div>\n          <FilterManager ref=\"filter-manager\"\n                         eventCollection={this.props.step.event_collection}\n                         filters={this.props.step.filters}\n                         handleChange={this.handleFilterChange}\n                         removeFilter={this.handleRemoveFilter}\n                         addFilter={this.handleAddFilter}\n                         getPropertyType={this.props.getPropertyType}\n                         propertyNames={this.props.propertyNames} />\n          <label className=\"block-label margin-top-small\">\n            <input name=\"optional\" type=\"checkbox\" checked={this.props.step.optional} onChange={this.handleCheckboxChange} /> Optional Step\n          </label>\n          <label className=\"block-label\">\n            <input name=\"inverted\" type=\"checkbox\" checked={this.props.step.inverted} onChange={this.handleCheckboxChange} /> Inverted Step\n          </label>\n          <label className=\"block-label\">\n            <input name=\"with_actors\" type=\"checkbox\" checked={this.props.step.with_actors} onChange={this.handleCheckboxChange} /> With Actors\n          </label>\n\n          <hr />\n          {remove}\n        </div>\n      );\n    }\n  },\n\n  render: function() {\n    var stepWrapperClasses = classNames({\n      'funnel-step': true,\n      'active': this.props.step.active\n    });\n    return (\n      <div className={stepWrapperClasses}>\n        <div className=\"step-header clearfix\" onClick={this.toggleStepActive} role=\"step-header\">\n          <div className=\"step-move-btns\">\n            <a href=\"#\" className=\"up\" onClick={this.moveStepUp} role=\"move-step\">\n              <span className=\"arrow\"></span>\n            </a>\n            <a href=\"#\" className=\"down\" onClick={this.moveStepDown} role=\"move-step\">\n              <span className=\"arrow\"></span>\n            </a>\n          </div>\n          <div className=\"step-number\">\n            {this.props.index + 1}\n          </div>\n          <div className=\"step-name\">\n            Step {this.props.index + 1}\n          </div>\n        </div>\n        {this.buildStepBody()}\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = FunnelStep;\n","import React from 'react';\nimport _ from 'lodash';\nimport FunnelStep from './funnel_step.js';\nimport ExplorerActions from '../../../../actions/ExplorerActions.js';\n\nconst FunnelsBuilder = React.createClass({\n\n  propTypes: {\n    modelId:               React.PropTypes.string.isRequired,\n    eventCollections:      React.PropTypes.array.isRequired,\n    steps:                 React.PropTypes.array.isRequired,\n    stepNotices:           React.PropTypes.array.isRequired,\n    onBrowseEvents:        React.PropTypes.func.isRequired,\n    getEventPropertyNames: React.PropTypes.func.isRequired,\n    getPropertyType:       React.PropTypes.func.isRequired\n  },\n\n  handleChange: function(index, name, value) {\n    var updates = {}\n    updates[name] = value;\n    ExplorerActions.updateStep(this.props.modelId, index, updates);\n  },\n\n  addStep: function(e) {\n    e.preventDefault();\n    ExplorerActions.addStep(this.props.modelId);\n  },\n\n  removeStep: function(index) {\n    ExplorerActions.removeStep(this.props.modelId, index);\n  },\n\n  handleAddFilter: function(index) {\n    ExplorerActions.addStepFilter(this.props.modelId, index);\n  },\n\n  handleRemoveFilter: function(stepIndex, filterIndex) {\n    ExplorerActions.removeStepFilter(this.props.modelId, stepIndex, filterIndex);\n  },\n\n  handleFilterChange: function(stepIndex, filterIndex, updates) {\n    ExplorerActions.updateStepFilter(this.props.modelId, stepIndex, filterIndex, updates);\n  },\n\n  toggleStepActive: function(index, active) {\n    if (active) {\n      ExplorerActions.setStepActive(this.props.modelId, index);\n    } else {\n      ExplorerActions.updateStep(this.props.modelId, index, { active: false });\n    }\n  },\n\n  moveStep: function(index, direction) {\n    ExplorerActions.moveStep(this.props.modelId, index, direction);\n  },\n\n  buildSteps: function() {\n    return this.props.steps.map(function(step, index) {\n      var notice = _.find(this.props.stepNotices, { stepIndex: index });\n      return (\n        <li key={index}>\n          <FunnelStep index={index}\n                      step={step}\n                      notice={notice}\n                      removeStep={this.removeStep}\n                      canRemove={this.props.steps.length > 1}\n                      eventCollections={this.props.eventCollections}\n                      propertyNames={this.props.getEventPropertyNames(step.event_collection)}\n                      onBrowseEvents={this.props.onBrowseEvents}\n                      toggleStepActive={this.toggleStepActive}\n                      handleChange={this.handleChange}\n                      handleAddFilter={this.handleAddFilter}\n                      handleRemoveFilter={this.handleRemoveFilter}\n                      handleFilterChange={this.handleFilterChange}\n                      getPropertyType={this.props.getPropertyType}\n                      handleFiltersToggle={this.handleFiltersToggle}\n                      moveStep={this.moveStep} />\n        </li>\n      );\n    }.bind(this));\n  },\n\n  render: function() {\n    return (\n      <div className=\"funnel-builder margin-top-small\">\n        <h4>Steps</h4>\n        <ul className=\"steps\">\n          {this.buildSteps()}\n        </ul>\n        <a href=\"#\" className=\"add-step\" onClick={this.addStep}>\n          <i className=\"icon glyphicon glyphicon-plus-sign margin-right-tiny\"></i>\n          Add a step\n        </a>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = FunnelsBuilder;\n","import React from 'react';\nimport Input from '../../common/input.js';\nimport ExplorerUtils from '../../../utils/ExplorerUtils';\n\nconst LatestField = React.createClass({\n\n  render: function() {\n    return (\n      <div className=\"form-group\">\n        <Input type=\"text\"\n               name=\"latest\"\n               label=\"Limit number of events to extract\"\n               value={this.props.latest}\n               placeholder=\"Eg: 1000\"\n               onChange={this.props.handleChange} />\n        <small className=\"text-muted\">\n          <span className=\"icon glyphicon glyphicon-info-sign\"></span>\n          <span>{'Results are limited to 10 million events'}</span>\n        </small>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = LatestField;\n","import React from 'react';\n\nclass ReactMultiSelect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      id: 'react-multi-select',\n      focusedIndex: 0\n    }\n  }\n\n  interceptEvent(event) {\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  // Private Event Handler Methods\n  _toggleOpenClose(event) {\n    this.interceptEvent(event);\n\n    if(this.state.open) {\n      return this.setState({ open: false });\n    }\n    else {\n      this.setState({ open: true })\n    }\n  }\n\n  _isSelected(itemVal) {\n    return this.props.items.filter((item) => {\n      if (item.value === itemVal && item.selected) return true;\n      return false;\n    }).length > 0;\n  }\n\n  _handleOptionChange(event) {\n    this.interceptEvent(event);\n    this.props.handleChange(this.props.name, event.target.text, !this._isSelected(event.target.text));\n  }\n\n  _renderOption(option, i) {\n    let className = 'react-select-box-option';\n    if (i === this.state.focusedIndex) {\n      className += ' react-select-box-option-focused'\n    }\n    if (option.selected) {\n      className += ' react-select-box-option-selected'\n    }\n\n    return (<a\n      id={`${this.state.id}-${i}`}\n      className={className}\n      href='#'\n      onClick={this._handleOptionChange.bind(this)}\n      title={option.label}\n      key={`${i}_${option.label}`}\n    >{option.label}</a>\n    )\n  }\n\n  // Private HTML Element methods\n  _renderOptionMenu() {\n    let className = 'react-select-box-options';\n    if (!this.state.open) {\n      className += ' react-select-box-hidden';\n    }\n\n    const options = this.props.items.map((item, i) => {\n      return this._renderOption({ value: item.value, selected: item.selected, label: item.value }, i);\n    });\n\n    return (<div className={className} ref='menu'>\n      {options}\n    </div>)\n  }\n\n  render() {\n    const selectedItems = this.props.items.filter(i => i.selected);\n    const label = selectedItems.length > 0 ? selectedItems.map(i => i.value).join(', ') : this.props.label;\n\n    return (<div className='react-select-box-container react-select-box-multi'>\n      <button id={this.state.id} onClick={this._toggleOpenClose.bind(this)} className='react-select-box'>\n        <div className='react-select-box-label'>{label}</div>\n      </button>\n\n      {this._renderOptionMenu()}\n    </div>);\n  }\n}\n\nmodule.exports = ReactMultiSelect;\n","import React from 'react';\nimport ExplorerUtils from '../../../utils/ExplorerUtils';\nimport Input from '../../common/input.js';\nimport ReactMultiSelect from '../../common/react_multi_select.js';\nimport LatestField from './latest_field.js';\n\nclass ExtractionOptions extends React.Component {\n\n  _getExtractionKeys() {\n    if (typeof this.props.projectSchema === \"undefined\") {\n      return false;\n    }\n\n    const schema = this.props.projectSchema[this.props.event_collection];\n    if (typeof schema === \"undefined\") {\n      return false;\n    }\n\n    if (!schema.sortedProperties || !schema.sortedProperties.length) {\n      return false;\n    }\n\n    return schema.sortedProperties.map((property) => {\n      return {\n        value: property,\n        selected: this.props.property_names.indexOf(property) > -1\n      }\n    });\n  }\n\n  _handlePropertyNamesChange(name, propertyName, shouldBeSelected) {\n    let newPropertyNames = this.props.property_names.slice(0);\n    if (shouldBeSelected) {\n      newPropertyNames.push(propertyName);\n    } else {\n      newPropertyNames = newPropertyNames.filter((name) => {\n        return name !== propertyName;\n      });\n    }\n    this.props.handleChange(name, newPropertyNames);\n  }\n\n  render(){\n    let emailField;\n    let latestField;\n    let extractionPropertiesFilter;\n\n    if (this.props.isEmail) {\n      emailField = (\n        <Input type=\"text\"\n               name=\"email\"\n               label=\"Recipient email address\"\n               placeholder=\"your@email.com\"\n               required=\"true\"\n               value={this.props.email}\n               onChange={this.props.handleChangeWithEvent} />\n      );\n      latestField = (\n        <LatestField latest={this.props.latest} handleChange={this.props.handleChangeWithEvent} />\n      );\n    }\n\n    if (this._getExtractionKeys()) {\n      extractionPropertiesFilter = <ReactMultiSelect\n            name=\"property_names\"\n            label=\"Filter extraction properties\"\n            handleChange={this._handlePropertyNamesChange.bind(this)}\n            items={this._getExtractionKeys()}\n      />\n    }\n\n    return (\n      <div className=\"field-component\">\n        <div className=\"extraction-options\">\n          <label>\n            <input type=\"radio\" name=\"extraction_type\" value=\"immediate\" onChange={this.props.setExtractionType} checked={!this.props.isEmail}/> Preview latest {ExplorerUtils.EXRACTION_EVENT_LIMIT} events now\n          </label>\n          <label>\n            <input type=\"radio\" name=\"extraction_type\" value=\"email\" onChange={this.props.setExtractionType} checked={this.props.isEmail}/> Bulk CSV extraction by email\n          </label>\n\n          {emailField}\n          {latestField}\n          {extractionPropertiesFilter}\n        </div>\n      </div>\n    );\n  }\n}\n\nmodule.exports = ExtractionOptions;\n","import React from 'react';\nimport _ from 'lodash';\nimport FieldsToggle from '../../common/fields_toggle.js';\n\n// Components\nimport ReactSelect from '../../common/react_select.js';\n\nconst GroupByField = React.createClass({\n\n  focusOnReactSelect: function(toggled) {\n    if (toggled && !this.props.value) {\n      var self = this;\n      setTimeout(function(){\n        self.refs.select.refs.input.focus();\n      }, 100);\n    }\n  },\n\n  multiGroupToggle: function() {\n    var icon = this.props.value.length > 1 ? 'remove' : 'plus';\n    var text = this.props.value.length > 1 ? 'Remove second property' : 'Group by a second property';\n    return (\n      <a className=\"double-groupby-toggle\" href=\"#\" onClick={this.toggleMultiGroupBy}>\n        <i className={\"margin-right-bump icon glyphicon glyphicon-\"+icon}></i>\n        {text}\n      </a>\n    );\n  },\n\n  secondField: function() {\n    if (this.props.value.length > 1) {\n      return (\n        <ReactSelect ref=\"select\"\n                     inputClasses=\"group-by form-control margin-bottom-tiny\"\n                     wrapClasses=\"margin-top-tiny\"\n                     name=\"group_by.1\"\n                     items={this.props.options}\n                     handleChange={this.handleChange}\n                     value={this.props.value[1] || ''}\n                     sort={true} />\n      )\n    }\n  },\n\n  getGroupBy: function() {\n    return this.props.value;\n  },\n\n  handleChange: function(name, value) {\n    var newVal = this.props.value.slice();\n    newVal[name.split('.')[1]] = value;\n    this.props.handleChange('group_by', newVal);\n  },\n\n  toggleMultiGroupBy: function(event) {\n    event.preventDefault();\n    var newVal;\n    switch (this.props.value.length) {\n      case 0:\n        newVal = ['', ''];\n        break;\n      case 1:\n        newVal = this.props.value.concat(['']);\n        break;\n      case 2:\n        newVal = this.props.value.slice(0,1);\n        break;\n    }\n    this.props.handleChange('group_by', newVal);\n  },\n\n  shouldBeOpen: function() {\n    return this.props.value && this.props.value[0]\n  },\n\n  // React methods\n\n  render: function() {\n    return (\n      <div className=\"field-component\">\n        <FieldsToggle ref=\"toggle\"\n                      name=\"Group By\"\n                      initialOpenState={this.shouldBeOpen()}\n                      updateFn={this.props.updateGroupBy}\n                      getFn={this.getGroupBy}\n                      attrsToStore=\"group_by\"\n                      resetValues={{\n                        group_by: []\n                      }}\n                      toggleCallback={this.focusOnReactSelect}>\n          <ReactSelect ref=\"select\"\n                       inputClasses=\"group-by form-control margin-bottom-tiny\"\n                       name=\"group_by.0\"\n                       items={this.props.options}\n                       handleChange={this.handleChange}\n                       value={this.props.value[0] || ''}\n                       sort={true} />\n          {this.secondField()}\n          {this.multiGroupToggle()}\n        </FieldsToggle>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = GroupByField;\n","import React from 'react';\nimport _ from 'lodash';\n\n// Components\nimport Input from '../../common/input.js';\n\nconst PercentileField = React.createClass({\n\n  // React methods\n\n  render: function() {\n    return (\n      <div className=\"field-component\">\n        <Input ref=\"input\"\n               label=\"Percentile Value\"\n               classes=\"percentile\"\n               name=\"percentile\"\n               required=\"true\"\n               placeholder=\"Ex: 50\"\n               onChange={this.props.onChange}\n               value={this.props.value || \"\"} />\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = PercentileField;\n","import _ from 'lodash';\nimport React from 'react';\n\n// Components\nimport FieldsToggle from '../../common/fields_toggle.js';\nimport SelectField from './select_field.js';\nimport PercentileField from './percentile_field.js';\nimport GroupByField from './group_by_field.js';\nimport ExtractionOptions from './extraction_options.js';\nimport FunnelBuilder from './funnels/funnel_builder.js';\nimport Timeframe from '../../common/timeframe.js';\nimport Interval from '../../common/interval.js';\nimport Input from '../../common/input.js';\nimport ApiUrl from './api_url.js';\nimport ExplorerStore from '../../../stores/ExplorerStore';\nimport ExplorerUtils from '../../../utils/ExplorerUtils';\nimport FilterUtils from '../../../utils/FilterUtils';\nimport ExplorerActions from '../../../actions/ExplorerActions';\n\nconst QueryBuilder = React.createClass({\n\n  // Event callbacks\n\n  handleSelectionWithEvent: function(event) {\n    this.handleChange(event.target.name, event.target.value);\n  },\n\n  handleChange: function(update, value) {\n    var updates = { query: {} };\n\n    if(_.isPlainObject(update)) {\n      for(key in update) {\n        updates.query[key] = update[key];\n      }\n    } else {\n      updates.query[update] = value;\n    }\n\n    ExplorerActions.update(this.props.model.id, updates);\n  },\n\n  // Convenience Methods\n\n  updateGroupBy: function(updates) {\n    ExplorerActions.update(this.props.model.id, { query: updates });\n  },\n\n  handleRevertChanges: function(event) {\n    event.preventDefault();\n    ExplorerActions.revertActiveChanges();\n  },\n\n  shouldShowRevertButton: function() {\n    return ExplorerUtils.isPersisted(this.props.model) && this.props.model.originalModel && this.props.model.originalModel.query && !_.isEqual(this.props.model.query, this.props.model.originalModel.query);\n  },\n\n  // Fields Builders\n\n  buildEventCollectionField: function() {\n    if (this.props.model.query.analysis_type !== 'funnel') {\n      return (\n        <SelectField name=\"event_collection\"\n                     label=\"Event Collection\"\n                     value={this.props.model.query.event_collection}\n                     requiredLabel={true}\n                     onBrowseEvents={this.props.onBrowseEvents}\n                     handleChange={this.handleChange}\n                     options={this.props.project.eventCollections} />\n      );\n    }\n  },\n\n  buildExtractionOptions: function() {\n    if (this.props.model.query.analysis_type === 'extraction') {\n      return (\n        <ExtractionOptions latest={this.props.model.query.latest}\n                           email={this.props.model.query.email}\n                           property_names={this.props.model.query.property_names}\n                           event_collection={this.props.model.query.event_collection}\n                           projectSchema={this.props.project.schema}\n                           isEmail={ExplorerUtils.isEmailExtraction(this.props.model)}\n                           handleChangeWithEvent={this.handleSelectionWithEvent}\n                           handleChange={this.handleChange}\n                           setExtractionType={this.props.setExtractionType} />\n      );\n    }\n  },\n\n  buildGroupByField: function() {\n    if (['extraction', 'funnel'].indexOf(this.props.model.query.analysis_type) === -1) {\n      return (\n        <GroupByField ref=\"group-by-field\"\n                      value={this.props.model.query.group_by}\n                      updateGroupBy={this.updateGroupBy}\n                      options={this.props.getEventPropertyNames(this.props.model.query.event_collection)}\n                      handleChange={this.handleChange} />\n      );\n    }\n  },\n\n  buildTargetPropertyField: function() {\n    var type = this.props.model.query.analysis_type;\n    if (type !== null && ExplorerUtils.shouldHaveTarget(this.props.model)) {\n      return (\n        <SelectField name=\"target_property\"\n                     label=\"Target Property\"\n                     inputClasses={['target-property']}\n                     requiredLabel={true}\n                     handleChange={this.handleChange}\n                     options={this.props.getEventPropertyNames(this.props.model.query.event_collection)}\n                     value={this.props.model.query.target_property}\n                     sort={true} />\n      );\n    }\n  },\n\n  buildPercentileField: function() {\n    if (this.props.model.query.analysis_type === 'percentile') {\n      return (\n        <PercentileField ref=\"percentile-field\"\n                         value={this.props.model.query.percentile}\n                         onChange={this.handleSelectionWithEvent} />\n      );\n    }\n  },\n\n  buildIntervalField: function() {\n    if (['extraction', 'funnel'].indexOf(this.props.model.query.analysis_type) === -1) {\n      return (\n        <Interval interval={this.props.model.query.interval}\n                  handleChange={this.handleChange} />\n      );\n    }\n  },\n\n  buildFilters: function() {\n    if (this.props.model.query.analysis_type !== 'funnel') {\n      return (\n        <div className=\"field-component\">\n          <FieldsToggle ref=\"filters-fields-toggle\"\n                        name=\"Filters\"\n                        toggleCallback={this.props.handleFiltersToggle}\n                        fieldsCount={FilterUtils.validFilters(this.props.model.query.filters).length} />\n        </div>\n      );\n    }\n  },\n\n  buildGlobalTimeframePicker: function() {\n    if (this.props.model.query.analysis_type !== 'funnel') {\n      return (\n        <div>\n          <Timeframe ref=\"timeframe\"\n                     time={this.props.model.query.time}\n                     timezone={this.props.model.query.timezone}\n                     handleChange={this.handleChange}/>\n          <hr className=\"fieldset-divider\" />\n        </div>\n      );\n    }\n  },\n\n  buildFunnelBuilder: function() {\n    if (this.props.model.query.analysis_type === 'funnel') {\n      return <FunnelBuilder modelId={this.props.model.id}\n                            steps={this.props.model.query.steps}\n                            stepNotices={this.props.stepNotices || []}\n                            onBrowseEvents={this.props.onBrowseEvents}\n                            eventCollections={this.props.project.eventCollections}\n                            getEventPropertyNames={this.props.getEventPropertyNames}\n                            getPropertyType={this.props.getPropertyType} />;\n    }\n  },\n\n  buildClearButton: function() {\n    if (!this.shouldShowRevertButton()) {\n      return (\n        <button type=\"reset\" role=\"clear-query\"\n          className=\"btn btn-default btn-block\"\n          id=\"clear-explorer-query\"\n          onClick={this.props.handleClearQuery}>\n            Clear\n        </button>\n      );\n    } else {\n      return (\n        <button\n          className=\"btn btn-default btn-block\"\n          onClick={this.handleRevertChanges}\n          role=\"revert-query\">\n            Revert to original\n        </button>\n      );\n    }\n  },\n\n  // React methods\n\n  render: function() {\n    var apiQueryUrl;\n    if (this.props.model.isValid) {\n      apiQueryUrl = ExplorerUtils.getApiQueryUrl(this.props.client, this.props.model);\n    }\n\n    return (\n      <section className=\"query-pane-section query-builder\">\n        <form className=\"form query-builder-form\" onSubmit={this.props.handleQuerySubmit}>\n          <SelectField name=\"analysis_type\"\n                       label=\"Analysis Type\"\n                       inputClasses={['analysis-type']}\n                       options={this.props.analysisTypes}\n                       value={this.props.model.query.analysis_type}\n                       handleChange={this.handleChange}\n                       requiredLabel={true} />\n          {this.buildEventCollectionField()}\n          {this.buildFunnelBuilder()}\n          {this.buildExtractionOptions()}\n          {this.buildTargetPropertyField()}\n          {this.buildPercentileField()}\n          {this.buildGlobalTimeframePicker()}\n          {this.buildGroupByField()}\n          {this.buildFilters()}\n          {this.buildIntervalField()}\n          <div className=\"button-set-clear-toggle\">\n            {this.buildClearButton()}\n          </div>\n          <ApiUrl url={apiQueryUrl}\n                  isValid={this.props.model.isValid} />\n        </form>\n      </section>\n    );\n  }\n});\n\nmodule.exports = QueryBuilder;\n","import React from 'react';\nimport classNames from 'classnames';\n\nconst QueryPaneTabs = React.createClass({\n\n  toggled: function(tab) {\n    this.props.toggleCallback(tab);\n  },\n\n  render: function() {\n    var btnNewQuery;\n    var queryPaneClasses = classNames({\n      'query-pane-tabs clearfix': true,\n      'query-pane-persisted': this.props.persisted,\n      'query-pane-new': !this.props.persisted\n    });\n\n    if (this.props.persisted) {\n      btnNewQuery = <li role=\"presentation\" className=\"tab-new-query\">\n        <a ref=\"new-query\" href=\"#\"\n           title=\"Create a new query\"\n           onClick={this.props.createNewQuery}>\n          <span className=\"icon glyphicon icon-plus glyphicon-plus\"></span>\n        </a>\n      </li>;\n    }\n\n    return (\n      <div className={queryPaneClasses}>\n        <ul className=\"nav nav-tabs\">\n          {btnNewQuery}\n          <li role=\"presentation\" className={this.props.activePane === 'build' ? 'tab-build-query active' : 'tab-build-query'}>\n            <a ref=\"build-tab\" href=\"#\"\n               id=\"build-query\"\n               title={this.props.persisted ? \"Edit query\" : \"Create a new query\"}\n               onClick={this.toggled.bind(this, 'build')}>\n              {this.props.persisted ? \"Edit query\" : \"Create a new query\"}\n            </a>\n          </li>\n          <li role=\"presentation\" className={this.props.activePane === 'browse' ? 'tab-browse-queries active' : 'tab-browse-queries'}>\n            <a ref=\"browse-tab\" href=\"#\"\n               id=\"browse\"\n               title=\"Browse saved queries\"\n               onClick={this.toggled.bind(this, 'browse')}>\n              <span className=\"icon glyphicon icon-th-list glyphicon-th-list\"></span>\n              Browse\n            </a>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n\n});\n\nmodule.exports = QueryPaneTabs;\n","module.exports = {\n  exportToCsv: function(data, filename) {\n    var csvContent = 'data:text/csv;charset=utf-8,';\n    var htmlElement;\n\n    data.forEach(function(row, i){\n      row.forEach(function(cell, j){\n        csvContent += String(cell).replace(/,/g, '');\n        if (row.length > j+1) {\n          csvContent += ',';\n        }\n      });\n      if (data.length > i+1) {\n        csvContent += '\\n';\n      }\n    });\n\n    htmlElement = document.createElement('a');\n    htmlElement.setAttribute('href', encodeURI(csvContent));\n    htmlElement.setAttribute('download', filename);\n    document.body.appendChild(htmlElement);\n    htmlElement.click();\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__70__;","import _ from 'lodash';\nimport React from 'react';\nimport classNames from 'classnames';\nimport Highlight from 'react-highlight';\n\nconst CodeSample = React.createClass({\n  render: function() {\n    var panelClasses = classNames({\n      'code-sample-panel': true,\n      'hide': this.props.hidden\n    });\n\n    var text;\n    if(this.props.isValid) {\n      text = this.props.codeSample;\n    } else {\n      text = \"Your query is not valid right now, so we can't show you a code sample.\";\n    }\n\n    return (\n      <div className={panelClasses}>\n        <a href=\"#\" className=\"close-btn\" onClick={this.props.onCloseClick}>\n          <span className=\"icon glyphicon glyphicon glyphicon-remove-circle no-margin\"></span>\n        </a>\n        <div className=\"sample\">\n          <Highlight className=\"html\">\n            {text}\n          </Highlight>\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = CodeSample;\n","import React from 'react';\nimport ChartTypeUtils from '../../../utils/ChartTypeUtils';\nimport FormatUtils from '../../../utils/FormatUtils';\n\nconst KeenViz = React.createClass({\n\n  lastDataTimestamp: null,\n  lastChartType: null,\n\n  // ***********************\n  // Convenience functions\n  // ***********************\n\n  showVisualization: function() {\n    this.props.dataviz.destroy();\n\n    this.props.dataviz\n      .data(this.props.model.response)\n      .el(this.refs['keen-viz'])\n      .height(300)\n      .title(null)\n      .type(this.props.model.metadata.visualization.chart_type);\n\n    if (this.props.model.query.analysis_type !== \"funnel\") {\n      this.props.dataviz.sortGroups('desc')\n    }\n\n    this.props.dataviz.render();\n\n    this.lastDataTimestamp = this.props.model.dataTimestamp;\n    this.lastChartType = this.props.model.metadata.visualization.chart_type;\n  },\n\n  // ***********************\n  // Lifecycle hooks\n  // ***********************\n\n  shouldComponentUpdate: function(nextProps, nextState) {\n    if (this.lastChartType !== nextProps.model.metadata.visualization.chart_type) {\n      return true;\n    }\n    if (!this.lastDataTimestamp || this.lastDataTimestamp !== nextProps.model.dataTimestamp) {\n      return true\n    }\n    return false;\n  },\n\n  componentDidUpdate: function() {\n    this.showVisualization();\n  },\n\n  componentDidMount: function() {\n    this.showVisualization();\n  },\n\n  render: function() {\n    var exportBtn;\n    if (ChartTypeUtils.isTableChartType(this.props.model.metadata.visualization.chart_type)) {\n      exportBtn = (\n        <button className=\"btn btn-default btn-download-csv\"\n                role=\"export-table\"\n                type=\"button\"\n                onClick={this.props.exportToCsv}>\n          Download CSV\n        </button>\n      );\n    }\n\n    return (\n      <div ref=\"keen-viz-wrapper\">\n        <div ref=\"keen-viz\"></div>\n        {exportBtn}\n      </div>\n    );\n  }\n});\n\nmodule.exports = KeenViz;\n","import _ from 'lodash';\nimport React from 'react';\nimport Loader from '../../common/loader.js';\nimport KeenViz from './keen_viz.js';\nimport ExplorerUtils from '../../../utils/ExplorerUtils';\nimport { prettyPrintJSON } from '../../../utils/FormatUtils';\n\nconst Chart = React.createClass({\n\n  // ***********************\n  // Content building\n  // ***********************\n\n  buildVizContent: function() {\n    if (!this.props.model.response) {\n      return (\n          <div ref=\"notice\" className=\"big-notice\">\n          <div className=\"alert alert-info\">\n          {'Let\\'s go exploring!'}\n          </div>\n          </div>\n          );\n    }\n\n    if (ExplorerUtils.isEmailExtraction(this.props.model)) {\n      return (\n          <div ref=\"notice\" className=\"big-notice\">\n          <div className=\"alert alert-info\">\n          {'Email extractions don\\'t have visualizations.'}\n          </div>\n          </div>\n          );\n    }\n\n    if (!ExplorerUtils.resultCanBeVisualized(this.props.model)) {\n      return (\n          <div ref=\"notice\" className=\"big-notice\">\n          <div className=\"alert alert-danger\">\n          <span className=\"icon glyphicon glyphicon-info-sign error\"></span>\n          Your query returned no results.\n          </div>\n          </div>\n          );\n    }\n\n    if (ExplorerUtils.resultCanBeVisualized(this.props.model)) {\n      return this.buildViz();\n    } else {\n      this.props.dataviz.destroy();\n    }\n  },\n\n  buildViz: function() {\n    var chartContent;\n    var msgContent;\n    var analysisType = this.props.model.query.analysis_type;\n    var wrapClasses = analysisType + '-viz';\n\n    if (ExplorerUtils.isJSONViz(this.props.model)) {\n      var content = {\n        result: this.props.model.response.result\n      };\n      if (this.props.model.response.actors) {\n        content.actors = this.props.model.response.actors;\n      }\n      chartContent = (\n        <textarea ref='jsonViz'\n                  className=\"json-view\"\n                  value={prettyPrintJSON(content)}\n                  readOnly />\n      );\n    }\n\n    else {\n      chartContent = (\n          <KeenViz model={this.props.model} dataviz={this.props.dataviz}\n          exportToCsv={this.props.exportToCsv}/>\n          );\n    }\n\n    return (\n        <div className={wrapClasses}>\n        {chartContent}\n        </div>\n        );\n  },\n\n  // ***********************\n  // Lifecycle hooks\n  // ***********************\n\n  render: function() {\n    var vizContent = this.buildVizContent();\n\n    return (\n        <div className=\"chart-area\">\n        <Loader visible={this.props.model.loading} />\n        {vizContent}\n        </div>\n        );\n    }\n});\n\nmodule.exports = Chart;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__74__;","import _ from 'lodash';\nimport React from 'react';\nimport classNames from 'classnames';\nimport KeenDataviz from 'keen-dataviz';\nimport Select from '../../common/select.js';\nimport Notice from '../../common/notice.js';\nimport Chart from './chart.js';\nimport CodeSample from './code_sample.js';\nimport AppDispatcher from '../../../dispatcher/AppDispatcher';\nimport ExplorerConstants from '../../../constants/ExplorerConstants';\nimport ExplorerActions from '../../../actions/ExplorerActions';\nimport ExplorerStore from '../../../stores/ExplorerStore';\nimport NoticeActions from '../../../actions/NoticeActions';\nimport ExplorerUtils from '../../../utils/ExplorerUtils';\nimport ChartTypeUtils from '../../../utils/ChartTypeUtils';\nimport FormatUtils from '../../../utils/FormatUtils';\nimport DataUtils from '../../../utils/DataUtils';\n\nconst Visualization = React.createClass({\n\n  getInitialState: function() {\n    return {\n      focusDisplayName: false,\n      focusQueryName: false,\n      blurTimeout: 100\n    };\n  },\n\n  handleDisplayNameFocus: function(){\n    this.setState({ focusDisplayName: true });\n  },\n\n  handleDisplayNameBlur: function(){\n    setTimeout(function(){\n      this.setState({ focusDisplayName: false });\n    }.bind(this), this.state.blurTimeout);\n  },\n\n  handleQueryNameFocus: function(){\n    this.setState({ focusQueryName: true });\n  },\n\n  handleQueryNameBlur: function(){\n    setTimeout(function(){\n      this.setState({ focusQueryName: false });\n    }.bind(this), this.state.blurTimeout);\n  },\n\n  noticeClosed: function() {\n    NoticeActions.clearAll();\n  },\n\n  changeChartType: function(event) {\n    var chartType = _.find(this.formatChartTypes(), function(type){\n      return type.value === event.target.value;\n    });\n    var updates = {\n      metadata: {\n        visualization: { chart_type: chartType.value }\n      }\n    };\n    ExplorerActions.update(this.props.model.id, updates);\n  },\n\n  formatChartTypes: function() {\n    return _.map(ChartTypeUtils.getChartTypeOptions(this.props.model.query), function(type) {\n      return {\n        name: (type !== 'JSON') ? FormatUtils.toTitleCase(type).replace('chart', '') : type,\n        value: type\n      };\n    });\n  },\n\n  chartType: function() {\n    if (this.props.model.metadata.visualization &&\n        this.props.model.metadata.visualization.chart_type) {\n      return this.props.model.metadata.visualization.chart_type;\n    }\n    else {\n      return _.first(ChartTypeUtils.getChartTypeOptions(this.props.model.query))\n    }\n  },\n\n  componentWillMount: function() {\n    this.dataviz = new KeenDataviz();\n  },\n\n  componentWillUnmount: function() {\n    AppDispatcher.unregister(this.dispatcherToken);\n  },\n\n  exportToCsv: function() {\n    var data = this.dataviz.dataset.matrix;\n    var filename = this.props.model.query_name || 'untitled-query';\n    DataUtils.exportToCsv(data, filename);\n  },\n\n  render: function() {\n    var chartTitle,\n        codeSample;\n\n    var chartDetailBarClasses = classNames({\n      'chart-detail-bar': true,\n      'chart-detail-bar-focus': (this.state.focusDisplayName || this.state.focusQueryName) && this.props.model.response !== null && !this.props.model.loading,\n      'chart-detail-active': this.props.model.response !== null && !this.props.model.loading\n    });\n\n    if (this.props.model.isValid) {\n      codeSample = ExplorerUtils.getSdkExample(this.props.model, this.props.client);\n    }\n\n    if (this.props.persistence) {\n      chartTitle = (\n        <div className=\"chart-title-component\">\n          <input className=\"chart-display-name\"\n                 type=\"text\"\n                 onChange={this.props.onDisplayNameChange}\n                 onBlur={this.handleDisplayNameBlur}\n                 onFocus={this.handleDisplayNameFocus}\n                 spellCheck=\"false\"\n                 value={this.props.model.metadata.display_name}\n                 placeholder=\"Give your query a name...\" />\n          <div className=\"chart-query-name\">\n            <label>\n              Saved Query Resource Name &nbsp;\n              <a href=\"https://keen.io/docs/api/#saved-queries\" target=\"_blank\">\n                <i className=\"icon glyphicon glyphicon-question-sign\"></i>\n              </a>\n            </label>\n            <input className=\"chart-query-name\"\n                   type=\"text\"\n                   onChange={this.props.onQueryNameChange}\n                   onBlur={this.handleQueryNameBlur}\n                   onFocus={this.handleQueryNameFocus}\n                   spellCheck=\"false\"\n                   value={this.props.model.query_name} />\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"visualization\">\n        <Notice notice={this.props.notice} closeCallback={this.noticeClosed} />\n        <div className=\"visualization-wrapper\">\n          <div className={chartDetailBarClasses}>\n            {chartTitle}\n            <div className=\"chart-type-component\">\n              <Select label={false}\n                      ref=\"chart-type\"\n                      name=\"chart_type\"\n                      classes=\"chart-type\"\n                      options={this.formatChartTypes()}\n                      handleSelection={this.changeChartType}\n                      selectedOption={this.chartType()}\n                      emptyOption={false}\n                      disabled={this.props.model.loading} />\n            </div>\n          </div>\n          <div className=\"chart-component\">\n            <Chart model={this.props.model}\n                   dataviz={this.dataviz}\n                   exportToCsv={this.exportToCsv}/>\n          </div>\n          <CodeSample ref=\"codesample\"\n                      codeSample={codeSample}\n                      hidden={this.props.appState.codeSampleHidden}\n                      onCloseClick={this.props.toggleCodeSample}\n                      isValid={this.props.model.isValid} />\n        </div>\n      </div>\n    );\n  }\n});\n\nmodule.exports = Visualization;\n","import React from 'react';\nimport _ from 'lodash';\nimport classNames from 'classnames';\nimport Loader from '../common/loader.js';\nimport FormatUtils from '../../utils/FormatUtils';\nimport ProjectUtils from '../../utils/ProjectUtils';\nimport ProjectActions from '../../actions/ProjectActions';\nimport Modal from './modal.js';\n\nconst EventBrowser = React.createClass({\n\n  onKeyUp: function(event) {\n    var enterKeyCode = 13;\n    if (event.keyCode === enterKeyCode) this.selectEventCollection();\n  },\n\n  shouldFetchCollectionSchema: function (collection) {\n    if (!this.props.project.schema[collection]) return false;\n    return _.keys(this.props.project.schema[collection].properties).length < 1;\n  },\n\n  selectEventCollectionClick: function(event) {\n    event.preventDefault();\n    this.props.selectEventCollection(this.state.activeEventCollection);\n  },\n\n  setActiveEventCollectionClick: function(event) {\n    this.setActiveEventCollection(event.target.innerText);\n  },\n\n  setActiveEventCollection: function(collection) {\n    if (collection === this.state.activeEventCollection) return;\n    this.setState({ activeEventCollection: collection });\n    if (this.state.activeView === 'recentEvents') {\n      this.fetchRecentEvents(collection);\n    }\n    else if (this.shouldFetchCollectionSchema(collection)) {\n      ProjectActions.fetchCollectionSchema(this.props.client, collection);\n    }\n  },\n\n  modalOpened: function() {\n    if (this.state.activeView === 'recentEvents') {\n      this.fetchRecentEvents();\n    }\n    else if (this.shouldFetchCollectionSchema(this.state.activeEventCollection)) {\n      ProjectActions.fetchCollectionSchema(this.props.client, this.state.activeEventCollection);\n    }\n  },\n\n  fetchRecentEvents: function(collectionToUse) {\n    var collection = collectionToUse ? collectionToUse : this.state.activeEventCollection;\n    var schema = this.props.project.schema;\n    if (!_.isEmpty(schema) && schema[collection] && !schema[collection].recentEvents && !schema[collection].loading) {\n      ProjectActions.fetchRecentEventsForCollection(this.props.client, collection);\n    }\n  },\n\n  setSearchText: function(event) {\n    this.setState({ searchtext: event.target.value });\n  },\n\n  // Builders\n\n  buildEventCollectionNodes: function() {\n    return _.map(this.props.project.eventCollections, _.bind(function(eventCollection) {\n      var re = new RegExp(this.state.searchtext, 'i');\n      var classes = classNames({\n        'active': this.state.activeEventCollection === eventCollection,\n        'hide':  re.test(eventCollection) ? false : true\n      });\n      return (\n        <li className={classes} key={eventCollection}>\n          <a href=\"#\" onClick={this.setActiveEventCollectionClick}>{eventCollection}</a>\n        </li>\n      );\n    }, this));\n  },\n\n  // Convenience functions\n\n  getNavClasses: function(name) {\n    return (this.state.activeView === name) ? 'active' : '';\n  },\n\n  shouldShowLoader: function() {\n    if (this.props.project.schema[this.state.activeEventCollection]) {\n      return this.props.project.schema[this.state.activeEventCollection].loading;\n    }\n    return false;\n  },\n\n  getRecentEvents: function() {\n    if (!this.props.project.schema[this.state.activeEventCollection]) return \"\";\n    var recentEvents = this.props.project.schema[this.state.activeEventCollection].recentEvents;\n    return recentEvents ? FormatUtils.prettyPrintJSON(recentEvents) : \"\";\n  },\n\n  getSchema: function() {\n    var schema = this.props.project.schema;\n    var collection = this.state.activeEventCollection;\n    var properties = schema[collection] ? schema[collection].properties : {};\n    var ordered = {};\n    if (properties) {\n      _.each(Object.keys(properties).sort(), function(key, i) {\n        ordered[key] = properties[key];\n      });\n    }\n    return FormatUtils.prettyPrintJSON(ordered) || '';\n  },\n\n  changeActiveView: function(event) {\n    event.preventDefault();\n    var tabName = event.target.name;\n    this.setState({ activeView: tabName });\n    if (tabName === 'recentEvents') this.fetchRecentEvents();\n  },\n\n  // Lifecycle hooks\n\n  getInitialState: function() {\n    return {\n      activeView: 'schema',\n      activeEventCollection: null,\n      searchtext: ''\n    }\n  },\n\n  componentDidMount: function() {\n    if (!this.state.activeEventCollection && !_.isEmpty(this.props.project.schema)) {\n      this.setActiveEventCollection(this.props.currentEventCollection || this.props.project.eventCollections[0]);\n    }\n  },\n\n  componentWillReceiveProps: function(nextProps) {\n    if (!_.isEmpty(nextProps.project.schema) && !this.state.activeEventCollection) {\n      this.setState({ activeEventCollection: nextProps.project.eventCollections[0] });\n    }\n    if (nextProps.currentEventCollection && nextProps.currentEventCollection != this.props.currentEventCollection) {\n      this.setState({ activeEventCollection: nextProps.currentEventCollection });\n    }\n  },\n\n  render: function() {\n    var previewData;\n    if (this.state.activeView === 'recentEvents') {\n      previewData = this.getRecentEvents();\n    } else {\n      previewData = this.getSchema();\n    }\n\n    var browseContent = (\n      <div className=\"event-browser\" onKeyUp={this.handleKeyUp}>\n        <div className=\"event-names\">\n          <div className=\"search-box\">\n            <input type=\"text\" name=\"search\" ref=\"search-box\" placeholder=\"Search...\" onChange={this.setSearchText} autoComplete=\"off\" />\n            <span className=\"glyphicon glyphicon-search icon\"></span>\n          </div>\n          <ul className=\"nav nav-pills nav-stacked event-names-list\" ref=\"event-names-list\">\n            {this.buildEventCollectionNodes()}\n          </ul>\n        </div>\n        <div className=\"event-browser-content\">\n          <ul className=\"nav nav-tabs view-options\">\n            <li className={this.getNavClasses('schema')}>\n              <a href=\"#\" name=\"schema\" onClick={this.changeActiveView}>\n                Schema\n              </a>\n            </li>\n            <li className={this.getNavClasses('recentEvents')}>\n              <a href=\"#\" name=\"recentEvents\" onClick={this.changeActiveView}>\n                Recent Events\n              </a>\n            </li>\n          </ul>\n          <div ref=\"event-data-wrapper\" className=\"event-data-wrapper\">\n            <Loader ref=\"loader\" visible={this.shouldShowLoader()} />\n            <textarea className=\"json-view\" value={previewData} readOnly />\n          </div>\n        </div>\n      </div>\n    );\n\n    var alertContent = (\n      <div className=\"alert alert-info no-margin no-collections-alert\">\n        There is no data to preview. This project does not have any event collections.\n      </div>\n    );\n\n    var footerBtns = [{ text: 'Close' }];\n\n    var modalClasses = this.props.project.eventCollections.length > 0 ? \"event-browser-modal\" : \"\";\n\n    if (this.props.project.eventCollections.length > 0) {\n      footerBtns.push({\n        text: 'Use this Event Collection',\n        iconName: 'ok',\n        classes: 'btn-primary',\n        onClick: this.selectEventCollectionClick\n      });\n    }\n\n    return (\n      <Modal ref=\"modal\"\n             title=\"Project Event Collections\"\n             size=\"large\"\n             modalClasses={modalClasses}\n             onOpen={this.modalOpened}\n             footerBtns={footerBtns}>\n\n        { this.props.project.eventCollections.length > 0 ? browseContent : alertContent }\n      </Modal>\n    );\n  }\n});\n\nmodule.exports = EventBrowser;\n","import React from 'react';\nimport _ from 'lodash';\nimport EventBrowser from '../common/event_browser.js';\nimport Visualization from './visualization/index.js';\nimport QueryPaneTabs from './query_pane_tabs.js';\nimport QueryBuilder from './query_builder/index.js';\nimport BrowseQueries from './saved_queries/browse_queries.js';\nimport CacheToggle from './cache_toggle.js';\nimport QueryActions from './query_actions.js';\nimport Notice from '../common/notice.js';\nimport FilterManager from '../common/filter_manager.js';\nimport ExplorerStore from '../../stores/ExplorerStore';\nimport ExplorerActions from '../../actions/ExplorerActions';\nimport NoticeActions from '../../actions/NoticeActions';\nimport AppStateActions from '../../actions/AppStateActions';\nimport NoticeStore from '../../stores/NoticeStore';\nimport AppStateStore from '../../stores/AppStateStore';\nimport ExplorerUtils from '../../utils/ExplorerUtils';\nimport FilterUtils from '../../utils/FilterUtils';\nimport ProjectUtils from '../../utils/ProjectUtils';\nimport QueryStringUtils from '../../utils/QueryStringUtils';\n\nfunction getStoresState() {\n  return {\n    allPersistedExplorers: ExplorerStore.getAllPersisted(),\n    activeExplorer: ExplorerStore.getActive(),\n    notice: NoticeStore.getGlobalNotice(),\n    stepNotices: NoticeStore.getStepNotices(),\n    appState: AppStateStore.getState()\n  };\n}\n\nconst Explorer = React.createClass({\n\n  toggleFields: function() {\n    _.each(this.getFieldsToggleComponents(), function(toggleObj) {\n      if (toggleObj.component) {\n        var hasValue = (!_.isUndefined(toggleObj.value) && !_.isNull(toggleObj.value)) ? true : false;\n        toggleObj.component.setState({ open: hasValue });\n      }\n    });\n  },\n\n  // ********************************\n  // Callbacks for child components\n  // ********************************\n\n  selectEventCollection: function(collectionName) {\n    var updates = {\n      query: {\n        event_collection: collectionName\n      }\n    };\n    ExplorerActions.update(this.state.activeExplorer.id, updates);\n    this.refs['event-browser'].refs.modal.close();\n  },\n\n  savedQueryClicked: function(event) {\n    event.preventDefault();\n    if (this.state.activeExplorer.loading) {\n      NoticeActions.create({\n        icon: 'info-sign',\n        type: 'warning',\n        text: \"There is already a query in progress. Wait for it to finish loading before selecting a query.\"\n      });\n    } else {\n      ExplorerActions.revertActiveChanges();\n      var modelId = event.currentTarget.dataset.id;\n      ExplorerActions.setActive(modelId);\n      ExplorerActions.exec(this.props.client, modelId);\n    }\n  },\n\n  removeSavedQueryClicked: function() {\n    if (confirm('Are you sure you want to delete this saved query?')) {\n      ExplorerActions.destroy(this.props.persistence, this.state.activeExplorer.id);\n    }\n  },\n\n  saveQueryClick: function(event) {\n    event.preventDefault();\n    ExplorerActions.save(this.props.persistence, this.state.activeExplorer.id);\n  },\n\n  cloneQueryClick: function(event) {\n    event.preventDefault();\n    ExplorerActions.clone(this.state.activeExplorer.id);\n    var newExplorer = ExplorerStore.getLast();\n    ExplorerActions.setActive(newExplorer.id);\n    this.setState({ activeQueryPane: 'build' });\n  },\n\n  createNewQuery: function(event) {\n    event.preventDefault();\n    ExplorerActions.create();\n    var newExplorer = ExplorerStore.getLast();\n    ExplorerActions.setActive(newExplorer.id);\n    this.setState({ activeQueryPane: 'build' });\n  },\n\n  onBrowseEvents: function(event) {\n    event.preventDefault();\n    this.refs['event-browser'].refs.modal.open();\n  },\n\n  handleFiltersToggle: function() {\n    this.refs['filter-manager'].open();\n  },\n\n  onDisplayNameChange: function(event) {\n    var updates = {\n      query_name: ExplorerUtils.slugify(event.target.value),\n      metadata: {\n        display_name: event.target.value\n      }\n    };\n    ExplorerActions.update(this.state.activeExplorer.id, updates);\n  },\n\n  onQueryNameChange: function(event) {\n    var name = event.target.value.replace(/[^\\w-]/g,'');\n    ExplorerActions.update(this.state.activeExplorer.id, { query_name: name });\n  },\n\n  handleRevertChanges: function(event) {\n    event.preventDefault();\n    ExplorerActions.revertActiveChanges();\n  },\n\n  handleQuerySubmit: function(event) {\n    event.preventDefault();\n    if (ExplorerUtils.isEmailExtraction(this.state.activeExplorer)) {\n      ExplorerActions.runEmailExtraction(this.props.client, this.state.activeExplorer.id);\n    } else {\n      ExplorerActions.exec(this.props.client, this.state.activeExplorer.id);\n    }\n  },\n\n  setExtractionType: function(event) {\n    var updates = {\n      query: {\n        email: event.target.value === 'email' ? \"\" : null\n      }\n    };\n    ExplorerActions.update(this.state.activeExplorer.id, updates);\n  },\n\n  handleClearQuery: function() {\n    // NOTE: (Eric Anderson, Aug 19, 2015): Awful terrible hack to\n    // ensure that the components properly display the values of the cleared\n    // model.\n    var self = this;\n    setTimeout(function(){\n      ExplorerActions.clear(self.state.activeExplorer.id);\n    }, 0);\n  },\n\n  handleAddFilter: function() {\n    ExplorerActions.addFilter(this.state.activeExplorer.id);\n  },\n\n  handleRemoveFilter: function(index) {\n    ExplorerActions.removeFilter(this.state.activeExplorer.id, index);\n  },\n\n  handleFilterChange: function(index, updates) {\n    ExplorerActions.updateFilter(this.state.activeExplorer.id, index, updates);\n  },\n\n  // ********************************\n  // Convenience functions\n  // ********************************\n\n  setVizWrapTop: function(top) {\n    this.refs['viz-area'].style.top = top + 'px';\n  },\n\n  getSelectedIndex: function() {\n    if (!this.state.activeExplorer || !ExplorerUtils.isPersisted(this.state.activeExplorer)) {\n      return null;\n    }\n    return _.findIndex(this.state.allPersistedExplorers, { id: this.state.activeExplorer.id });\n  },\n\n  toggleQueryPane: function(pane) {\n    this.setState({ activeQueryPane: pane });\n  },\n\n  getSelectedIndex: function() {\n    var index;\n    for (var i=0; i<this.state.allPersistedExplorers.length; i++) {\n      if (this.state.allPersistedExplorers[i].active) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  },\n\n  toggleCodeSample: function(event) {\n    event.preventDefault();\n    AppStateActions.update({\n      codeSampleHidden: !this.state.appState.codeSampleHidden\n    });\n  },\n\n  getEventPropertyNames: function(collection)  {\n    return ProjectUtils.getEventCollectionPropertyNames(\n      this.props.project,\n      collection\n    );\n  },\n\n  getPropertyType: function (eventCollection, property_name) {\n    return ProjectUtils.getPropertyType(\n      this.props.project,\n      eventCollection,\n      property_name\n    );\n  },\n\n  // Lifecycle hooks\n\n  componentDidMount: function() {\n    ExplorerStore.addChangeListener(this._onChange);\n    NoticeStore.addChangeListener(this._onChange);\n    AppStateStore.addChangeListener(this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    ExplorerStore.removeChangeListener(this._onChange);\n    NoticeStore.removeChangeListener(this._onChange);\n    AppStateStore.removeChangeListener(this._onChange);\n    // Create a default filter if there are no filters already on this model\n    if (!this.state.activeExplorer.query.filters.length) {\n      ExplorerActions.addFilter(this.state.activeExplorer.id);\n    }\n  },\n\n  getInitialState: function() {\n    return _.assign(getStoresState(), {\n      activeQueryPane: 'build'\n    });\n  },\n\n  render: function() {\n    var cacheToggle,\n        queryPane,\n        queryPaneTabs,\n        browseListNotice,\n        browseEmptyContent;\n\n    if (this.props.persistence) {\n      queryPaneTabs = <QueryPaneTabs ref=\"query-pane-tabs\"\n                                     activePane={this.state.activeQueryPane}\n                                     toggleCallback={this.toggleQueryPane}\n                                     createNewQuery={this.createNewQuery}\n                                     persisted={ExplorerUtils.isPersisted(this.state.activeExplorer)} />;\n      if (['extraction'].indexOf(this.state.activeExplorer.query.analysis_type) === -1) {\n        cacheToggle = <CacheToggle model={this.state.activeExplorer} />;\n      }\n      if (this.state.appState.fetchingPersistedExplorers) {\n        browseListNotice = <Notice notice={{ icon: 'info-sign', text: 'Loading saved queries...', type: 'info' }} closable={false} />\n      } else {\n        browseEmptyContent = <h4 className=\"text-center\">You don&#39;t have any saved queries yet.</h4>;\n      }\n    }\n\n    if (!this.props.persistence || this.state.activeQueryPane === 'build') {\n      queryPane = <QueryBuilder ref=\"query-builder\"\n                                model={this.state.activeExplorer}\n                                originalModel={this.state.activeExplorerOriginal}\n                                client={this.props.client}\n                                project={this.props.project}\n                                onBrowseEvents={this.onBrowseEvents}\n                                handleFiltersToggle={this.handleFiltersToggle}\n                                handleRevertChanges={this.handleRevertChanges}\n                                handleQuerySubmit={this.handleQuerySubmit}\n                                setExtractionType={this.setExtractionType}\n                                handleClearQuery={this.handleClearQuery}\n                                getEventPropertyNames={this.getEventPropertyNames}\n                                getPropertyType={this.getPropertyType}\n                                analysisTypes={ProjectUtils.getConstant('ANALYSIS_TYPES')}\n                                stepNotices={this.state.stepNotices} />;\n    } else {\n      queryPane = <BrowseQueries ref=\"query-browser\"\n                                 listItems={this.state.allPersistedExplorers}\n                                 emptyContent={browseEmptyContent}\n                                 notice={browseListNotice}\n                                 clickCallback={this.savedQueryClicked}\n                                 selectedIndex={this.getSelectedIndex()} />;\n    }\n\n    return (\n      <div ref=\"root\">\n        <div className=\"row\">\n          <div className=\"col-sm-5 col-md-4 explorer-query-builder\">\n            {queryPaneTabs}\n            {queryPane}\n          </div>\n          <div ref=\"viz-area\" className=\"col-sm-7 col-md-8 explorer-visualization\">\n            <Visualization notice={this.state.notice}\n                           model={this.state.activeExplorer}\n                           client={this.props.client}\n                           project={this.props.project}\n                           persistence={this.props.persistence}\n                           onNameChange={this.onNameChange}\n                           appState={this.state.appState}\n                           toggleCodeSample={this.toggleCodeSample}\n                           onQueryNameChange={this.onQueryNameChange}\n                           onDisplayNameChange={this.onDisplayNameChange} />\n            {cacheToggle}\n            <QueryActions model={this.state.activeExplorer}\n                          handleRevertChanges={this.handleRevertChanges}\n                          handleQuerySubmit={this.handleQuerySubmit}\n                          saveQueryClick={this.saveQueryClick}\n                          removeClick={this.removeSavedQueryClicked}\n                          cloneQueryClick={this.cloneQueryClick}\n                          persistence={this.props.persistence}\n                          codeSampleHidden={this.state.appState.codeSampleHidden}\n                          toggleCodeSample={this.toggleCodeSample} />\n          </div>\n        </div>\n        <EventBrowser ref=\"event-browser\"\n                      client={this.props.client}\n                      project={this.props.project}\n                      currentEventCollection={this.state.activeExplorer.query.event_collection}\n                      selectEventCollection={this.selectEventCollection} />\n        <FilterManager ref=\"filter-manager\"\n                       eventCollection={this.state.activeExplorer.query.event_collection}\n                       filters={this.state.activeExplorer.query.filters}\n                       handleChange={this.handleFilterChange}\n                       removeFilter={this.handleRemoveFilter}\n                       addFilter={this.handleAddFilter}\n                       getPropertyType={this.getPropertyType}\n                       propertyNames={this.getEventPropertyNames(this.state.activeExplorer.query.event_collection)} />\n      </div>\n    );\n  },\n\n  _onChange: function() {\n    var newState = getStoresState();\n    this.setState(newState);\n    if (ExplorerUtils.isPersisted(newState.activeExplorer)) {\n      window.history.pushState({ model: newState.activeExplorer }, \"\", '?saved_query='+newState.activeExplorer.id);\n    } else {\n      QueryStringUtils.updateSearchString(ExplorerUtils.paramsForURL(newState.activeExplorer));\n    }\n  }\n});\n\nmodule.exports = Explorer;\n","import React from 'react';\nimport Loader from './common/loader.js';\nimport ProjectStore from '../stores/ProjectStore';\nimport AppStateStore from '../stores/AppStateStore';\nimport Explorer from './explorer/index.js';\n\nfunction getProjectState() {\n  return {\n    project: ProjectStore.getProject(),\n    app: AppStateStore.getState()\n  };\n}\n\nconst App = React.createClass({\n\n\tcomponentDidMount: function() {\n    ProjectStore.addChangeListener(this._onChange);\n    AppStateStore.addChangeListener(this._onChange);\n\t},\n\n  componentWillUnmount: function() {\n    ProjectStore.removeChangeListener(this._onChange);\n    AppStateStore.addChangeListener(this._onChange);\n  },\n\n\tgetInitialState: function() {\n\t\treturn getProjectState();\n\t},\n\n  render: function () {\n    return (\n      <div id=\"keen-explorer\">\n        <Loader visible={this.state.project.loading || !this.state.app.ready} additionalClasses=\"app-loader\" />\n        <Explorer project={this.state.project}\n                  client={this.props.client}\n                  persistence={this.props.persistence} />\n      </div>\n    );\n  },\n\n  _onChange: function() {\n    this.setState(getProjectState());\n  }\n\n});\n\nmodule.exports = App;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__79__;","module.exports = {\n  isDST: function() {\n    var date = new Date();\n    var jan = new Date(date.getFullYear(), 0, 1);\n    var jul = new Date(date.getFullYear(), 6, 1);\n    var stdOffset = Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());\n    return date.getTimezoneOffset() < stdOffset;\n  }\n};\n","import _ from 'lodash';\nimport FormatUtils from './FormatUtils';\nimport FilterUtils from './FilterUtils';\nimport TimeframeUtils from './TimeframeUtils';\n\nconst STEP_PARAMS = [\n  'event_collection',\n  'actor_property',\n  'timeframe',\n  'interval',\n  'timezone',\n  'filters',\n  'optional',\n  'inverted',\n  'with_actors'\n];\nmodule.exports = {\n\n  stepJSON: function (step) {\n    var params = _.cloneDeep(step);\n\n    _.assign(params, TimeframeUtils.getTimeParameters(step.time, step.timezone));\n\n    if (params.filters) {\n      params.filters = _.map(params.filters, function(filter) {\n        return FilterUtils.queryJSON(filter, TimeframeUtils.getTimezoneOffset(params.timezone));\n      });\n\n      _.remove(params.filters, _.isEmpty);\n    }\n\n    // Remove empty, null, or unnecessary properties\n    _.each(params, function(value, key) {\n      if (!FormatUtils.isValidQueryValue(value) || !_.includes(STEP_PARAMS, key)) {\n        delete params[key];\n      }\n    });\n\n    return params;\n  },\n\n  formatQueryParams: function (step) {\n    if (step.timeframe) {\n      var unpackedTime = TimeframeUtils.unpackTimeframeParam(step.timeframe, step.timezone);\n      step.time = unpackedTime.time;\n      step.timezone = unpackedTime.timezone;\n    }\n\n    if (step.filters) {\n      step.filters = _.compact(_.map(step.filters, FilterUtils.formatFilterParams));\n    }\n\n    step.inverted = (step.inverted === true || step.inverted === \"true\");\n    step.optional = (step.optional === true || step.optional === \"true\");\n    step.with_actors = (step.with_actors === true || step.with_actors === \"true\");\n\n    return step;\n  }\n\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__82__;","import _ from 'lodash';\nimport ExplorerUtils from '../../utils/ExplorerUtils';\n\nfunction KeenSavedQueries(config) {\n  this.config = config;\n}\n\nKeenSavedQueries.prototype.create = function(model, callback) {\n  var body = _.omit(model, ['id']);\n  this.config.client\n    .put(this.config.client.url('queries', 'saved', model.query_name))\n    .auth(this.config.client.masterKey())\n    .send(body)\n    .then(function(res){\n      callback(null, res);\n    })\n    .catch(callback);\n};\n\nKeenSavedQueries.prototype.update = function(model, callback) {\n  var body = _.omit(model, ['id']);\n  this.config.client\n    .put(this.config.client.url('queries', 'saved', model.id))\n    .auth(this.config.client.masterKey())\n    .send(body)\n    .then(function(res){\n      callback(null, res);\n    })\n    .catch(callback);\n};\n\nKeenSavedQueries.prototype.destroy = function(model, callback) {\n  this.config.client\n    .del(this.config.client.url('queries', 'saved', model.id))\n    .auth(this.config.client.masterKey())\n    .send()\n    .then(function(res){\n      callback(null, res);\n    })\n    .catch(function(err){\n      if (err.status === 204) {\n        callback(null, undefined);\n      }\n      else {\n        callback(err, null);\n      }\n    });\n};\n\nKeenSavedQueries.prototype.get = function(model, callback) {\n  if (model) {\n    this.config.client\n      .get(this.config.client.url('queries', 'saved', model.id))\n      .auth(this.config.client.masterKey())\n      .send()\n      .then(function(res){\n        callback(null, res);\n      })\n      .catch(callback);\n  } else {\n    this.config.client\n      .get(this.config.client.url('queries', 'saved'))\n      .auth(this.config.client.masterKey())\n      .send()\n      .then(function(res){\n        callback(null, res);\n      })\n      .catch(callback);\n  }\n};\n\nmodule.exports = KeenSavedQueries;\n","import KeenSavedQueries from './KeenSavedQueries.js';\n\nmodule.exports = {\n  KeenSavedQueries\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__85__;","module.exports = __WEBPACK_EXTERNAL_MODULE__86__;","import _ from 'lodash';\nimport KeenAnalysis from 'keen-analysis';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Persistence from './modules/persistence/persistence.js';\nimport AppDispatcher from './dispatcher/AppDispatcher';\nimport AppComponent from './components/app.js';\nimport ProjectActions from './actions/ProjectActions';\nimport ExplorerActions from './actions/ExplorerActions';\nimport AppStateActions from './actions/AppStateActions';\nimport NoticeActions from './actions/NoticeActions';\nimport ExplorerUtils from './utils/ExplorerUtils';\nimport FormatUtils from './utils/FormatUtils';\nimport { run as RunValidations } from './utils/RunValidations';\nimport ExplorerValidations from './validations/ExplorerValidations';\nimport ExplorerStore from './stores/ExplorerStore';\nimport ProjectStore from './stores/ProjectStore';\nimport QueryStringUtils from './utils/QueryStringUtils';\n\nexport const KeenExplorer = function (el) {\n  var tempId = FormatUtils.generateTempId();\n  this.appDispatcher = AppDispatcher;\n  this.config = {\n    params: QueryStringUtils.getQueryAttributes(),\n    persistence: null\n  };\n  this.el(el);\n  ExplorerActions.create(_.assign(ExplorerUtils.formatQueryParams(this.config.params) || {}, { 'id': tempId }));\n  ExplorerActions.setActive(tempId);\n  ExplorerActions.validate(tempId);\n}\n\nKeenExplorer.prototype.client = function(obj) {\n  if (!arguments.length) return this.config.client;\n  this.config.client = new KeenAnalysis(obj);\n  this.config.client.resources({\n    'events': '{protocol}://{host}/3.0/projects/{projectId}/events'\n  });\n  ProjectActions.create({ client: this.config.client });\n  ProjectActions.fetchProjectCollections(this.config.client);\n  return this;\n};\n\nKeenExplorer.prototype.el = function(target) {\n  if (!arguments.length) return this.config.el;\n  if (target.nodeName) {\n    this.config.el = target;\n  }\n  else if (document.querySelector) {\n    this.config.el = document.querySelector(target);\n  }\n  else {\n    this.config.el = undefined;\n  }\n  return this;\n};\n\nKeenExplorer.prototype.fetch = function(){\n  if (this.config.persistence) {\n    ExplorerActions.fetchAllPersisted(this.config.persistence, function(err) {\n      if (err) console.error('There was an error fetching the persisted explorers: ', err.stack);\n    });\n    // Is this a saved query we want to load?\n    if (this.config.params.saved_query) {\n      // Once the models come back from the server, mark the right one as active.\n      ExplorerActions.fetchPersisted(this.config.persistence, { id: this.config.params.saved_query },\n        this.doneFetchingSavedQuery.bind(this, this.config.params.saved_query));\n    } else {\n      AppStateActions.update({ ready: true });\n      // Run the query for this explorer if it's valid\n      var isEmailExtraction = ExplorerUtils.isEmailExtraction(ExplorerStore.getActive());\n      RunValidations(ExplorerValidations, ExplorerStore.getActive());\n      if (!isEmailExtraction && ExplorerStore.getActive().isValid) {\n        ExplorerActions.exec(this.config.client, ExplorerStore.getActive().id);\n      }\n    }\n  }\n  this.render();\n  return this;\n};\n\nKeenExplorer.prototype.persistence = function(bool) {\n  if (!arguments.length) return this.config.persistence;\n  if (typeof bool === 'boolean' && bool) {\n    if (!this.config.client || !this.config.client.masterKey()) {\n      console.error('This feature requires a client instance with a masterKey value');\n    }\n    this.config.persistence = new Persistence.KeenSavedQueries({\n      baseUrl: this.config.client.url('queries', 'saved'),\n      client: this.config.client\n    });\n    this.config.persistence.config.masterKey = this.config.client.masterKey();\n  }\n  return this;\n};\n\nKeenExplorer.prototype.doneFetchingSavedQuery = function(savedQueryName, err) {\n  if (!err) {\n    ExplorerActions.setActive(savedQueryName);\n    ExplorerActions.exec(this.config.client, savedQueryName);\n    AppStateActions.update({ ready: true });\n  } else {\n    if (err.status === 404) {\n      // We couldn't find that saved query.\n      NoticeActions.create({\n        text: 'The saved query '+savedQueryName+' could not be found.',\n        type: 'error',\n        icon: 'remove-sign'\n      });\n      var id = FormatUtils.generateTempId();\n      ExplorerActions.create({ id: id });\n      ExplorerActions.setActive(id);\n      AppStateActions.update({ ready: true });\n    } else {\n      console.error(\"There was a problem fetching a saved query: \", err.stack);\n    }\n  }\n};\n\nKeenExplorer.prototype.render = function() {\n  let Component = React.createFactory(AppComponent);\n  ReactDOM.render(Component({\n    persistence: this.config.persistence,\n    client: this.config.client\n  }), this.config.el);\n};\n\nKeenExplorer.Persistence = Persistence;\nexport default KeenExplorer;\n"],"sourceRoot":""}